<!-- GDPR Cookie Consent Banner -->
<div id="cookieBanner" class="light display-bottom" style="display: none;">
    <div id="closeIcon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
        </svg>
    </div>
    
    <div class="content-wrap">
        <div class="msg-wrap">
            <div class="title-wrap">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20">
                    <path fill="#3B9797" d="M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 0 0-57.79 57.81l-35.1 68.88a132.645 132.645 0 0 0-12.82 80.95l12.08 76.27a132.521 132.521 0 0 0 37.16 70.37l54.64 54.64a132.036 132.036 0 0 0 70.37 37.16l76.27 12.15c27.51 4.36 55.7-.11 80.95-12.8l68.88-35.08a132.166 132.166 0 0 0 57.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"></path>
                </svg>
                <h4 style="margin: 0; font-size: 18px; color: var(--color-navy); font-weight: 700;">Cookie Consent</h4>
            </div>
            <p style="font-size: 14px; line-height: 1.6; color: var(--color-navy); margin-bottom: 15px;">
                We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. 
                By clicking "Accept All", you consent to our use of cookies. See our 
                <a href="/privacy-policy.html" style="color: var(--color-teal); border-bottom: 1px dotted var(--color-teal);">Privacy Policy</a> 
                for more information.
            </p>
            
            <div id="cookieSettings" style="display: none;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="14" height="14">
                    <path fill="currentColor" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path>
                </svg>
                <span style="margin-left: 5px; font-size: 12px; font-weight: 600; color: var(--color-navy);">Customize Settings</span>
            </div>
            
            <div id="cookieTypes" style="display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(59, 151, 151, 0.2);">
                <h5 style="font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 10px; text-transform: uppercase;">Cookie Preferences</h5>
                
                <div style="margin-bottom: 12px;">
                    <label style="display: flex; align-items: start; cursor: pointer;">
                        <input type="checkbox" checked disabled style="margin-top: 2px; margin-right: 8px; cursor: not-allowed;">
                        <div>
                            <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Essential Cookies (Required)</strong>
                            <span style="font-size: 12px; color: #666;">Necessary for the website to function properly.</span>
                        </div>
                    </label>
                </div>
                
                <div style="margin-bottom: 12px;">
                    <label style="display: flex; align-items: start; cursor: pointer;">
                        <input type="checkbox" id="analyticsCookies" checked style="margin-top: 2px; margin-right: 8px;">
                        <div>
                            <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Analytics Cookies</strong>
                            <span style="font-size: 12px; color: #666;">Help us understand how you interact with the website.</span>
                        </div>
                    </label>
                </div>
                
                <div style="margin-bottom: 12px;">
                    <label style="display: flex; align-items: start; cursor: pointer;">
                        <input type="checkbox" id="marketingCookies" style="margin-top: 2px; margin-right: 8px;">
                        <div>
                            <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Marketing Cookies</strong>
                            <span style="font-size: 12px; color: #666;">Used to deliver relevant advertisements.</span>
                        </div>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="btn-wrap">
            <button id="cookieAccept" style="background: var(--color-teal); color: white; font-weight: 600;">Accept All</button>
            <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal); font-weight: 600;">Reject All</button>
            <button id="cookieSave" style="background: var(--color-blue); color: white; font-weight: 600; display: none;">Save Preferences</button>
        </div>
    </div>
</div>

<script>
// GDPR Cookie Consent Banner JavaScript
(function() {
    'use strict';
    
    // Cookie utility functions
    const CookieConsent = {
        // Set cookie with expiry
        setCookie: function(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/;SameSite=Lax";
        },
        
        // Get cookie value
        getCookie: function(name) {
            const nameEQ = name + "=";
            const cookies = document.cookie.split(';');
            for(let i = 0; i < cookies.length; i++) {
                let c = cookies[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        },
        
        // Check if user has made a choice
        hasConsent: function() {
            return this.getCookie('cookieConsent') !== null;
        },
        
        // Get consent preferences
        getPreferences: function() {
            const consent = this.getCookie('cookieConsent');
            if (!consent) return null;
            
            try {
                return JSON.parse(decodeURIComponent(consent));
            } catch (e) {
                return null;
            }
        },
        
        // Save preferences
        savePreferences: function(preferences) {
            const value = encodeURIComponent(JSON.stringify(preferences));
            this.setCookie('cookieConsent', value, 365);
        },
        
        // Initialize Google Analytics based on consent
        initAnalytics: function(enabled) {
            if (enabled && typeof gtag !== 'undefined') {
                gtag('consent', 'update', {
                    'analytics_storage': 'granted'
                });
            } else if (typeof gtag !== 'undefined') {
                gtag('consent', 'update', {
                    'analytics_storage': 'denied'
                });
            }
        }
    };
    
    // Initialize banner
    function initCookieBanner() {
        const banner = document.getElementById('cookieBanner');
        if (!banner) return;
        
        const closeIcon = document.getElementById('closeIcon');
        const settingsBtn = document.getElementById('cookieSettings');
        const acceptBtn = document.getElementById('cookieAccept');
        const rejectBtn = document.getElementById('cookieReject');
        const saveBtn = document.getElementById('cookieSave');
        const cookieTypes = document.getElementById('cookieTypes');
        
        // Check if user has already given consent
        if (CookieConsent.hasConsent()) {
            const preferences = CookieConsent.getPreferences();
            if (preferences && preferences.analytics) {
                CookieConsent.initAnalytics(true);
            }
            return;
        }
        
        // Show banner
        banner.style.display = 'block';
        
        // Close button
        closeIcon.addEventListener('click', function() {
            banner.style.display = 'none';
        });
        
        // Settings toggle
        settingsBtn.addEventListener('click', function() {
            const isVisible = cookieTypes.style.display !== 'none';
            cookieTypes.style.display = isVisible ? 'none' : 'block';
            saveBtn.style.display = isVisible ? 'none' : 'inline-block';
        });
        
        // Accept all cookies
        acceptBtn.addEventListener('click', function() {
            const preferences = {
                essential: true,
                analytics: true,
                marketing: false,
                timestamp: new Date().toISOString()
            };
            CookieConsent.savePreferences(preferences);
            CookieConsent.initAnalytics(true);
            banner.style.display = 'none';
        });
        
        // Reject all non-essential cookies
        rejectBtn.addEventListener('click', function() {
            const preferences = {
                essential: true,
                analytics: false,
                marketing: false,
                timestamp: new Date().toISOString()
            };
            CookieConsent.savePreferences(preferences);
            CookieConsent.initAnalytics(false);
            banner.style.display = 'none';
        });
        
        // Save custom preferences
        saveBtn.addEventListener('click', function() {
            const analyticsCheckbox = document.getElementById('analyticsCookies');
            const marketingCheckbox = document.getElementById('marketingCookies');
            
            const preferences = {
                essential: true,
                analytics: analyticsCheckbox ? analyticsCheckbox.checked : false,
                marketing: marketingCheckbox ? marketingCheckbox.checked : false,
                timestamp: new Date().toISOString()
            };
            
            CookieConsent.savePreferences(preferences);
            CookieConsent.initAnalytics(preferences.analytics);
            banner.style.display = 'none';
        });
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initCookieBanner);
    } else {
        initCookieBanner();
    }
})();
</script>
