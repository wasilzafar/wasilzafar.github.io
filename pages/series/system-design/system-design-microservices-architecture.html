<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, archive" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Master microservices and serverless architecture patterns for scalable systems. Learn service decomposition, API gateways, service mesh, FaaS, containerization, and Kubernetes orchestration." />
    <meta name="author" content="Wasil Zafar" />
    <meta name="keywords" content="Microservices, Serverless, FaaS, Service Mesh, Kubernetes, Docker, API Gateway, Lambda, Azure Functions, Service Discovery, System Design, Distributed Systems" />
    <meta property="og:title" content="System Design Series Part 5: Microservices Architecture" />
    <meta property="og:description" content="Master microservices architecture patterns, service mesh, and container orchestration for scalable systems." />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2026-01-25" />
    <meta property="article:author" content="Wasil Zafar" />
    <meta property="article:section" content="Technology" />
    
    <title>System Design Series Part 5: Microservices Architecture - Wasil Zafar</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', { 'ad_storage': 'denied', 'ad_user_data': 'denied', 'ad_personalization': 'denied', 'analytics_storage': 'denied', 'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE'] });
        gtag('consent', 'default', { 'ad_storage': 'granted', 'ad_user_data': 'granted', 'ad_personalization': 'granted', 'analytics_storage': 'granted' });
        gtag('set', 'url_passthrough', true);
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PBS8M2JR');</script>

    </head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div class="content-wrap">
            <div class="msg-wrap"><p style="font-size: 14px; color: var(--color-navy);">We use cookies. See our <a href="/privacy-policy.html" style="color: var(--color-teal);">Privacy Policy</a>.</p></div>
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal);">Reject All</button>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/"><span class="gradient-text">Wasil Zafar</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#certifications">Certifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#interests">Interests</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="blog-hero">
        <div class="container py-5">
            <div class="blog-header">
                <a href="/pages/categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
                <h1 class="display-4 fw-bold mb-3">System Design Series Part 5: Microservices Architecture</h1>
                <div class="blog-meta">
                    <span><i class="fas fa-calendar me-2"></i>January 25, 2026</span>
                    <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                    <span class="reading-time"><i class="fas fa-clock me-1"></i>45 min read</span>
                    <button onclick="window.print()" class="print-btn"><i class="fas fa-print"></i> Print</button>
                </div>
                <p class="lead">Master microservices architecture patterns for building scalable, maintainable systems. Learn service decomposition, API gateways, service mesh, containerization, and Kubernetes orchestration.</p>
            </div>
        </div>
    </section>

    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents"><i class="fas fa-list"></i></button>

    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header">
            <h3><i class="fas fa-list me-2"></i>Table of Contents</h3>
            <button class="closebtn" onclick="closeNav()">&times;</button>
        </div>
        <ol>
            <li><a href="#introduction" onclick="closeNav()">Microservices Fundamentals</a>
                <ul>
                    <li><a href="#introduction" onclick="closeNav()">What are Microservices?</a></li>
                    <li><a href="#monolith-vs-microservices" onclick="closeNav()">Monolith vs Microservices</a></li>
                </ul>
            </li>
            <li><a href="#decomposition" onclick="closeNav()">Service Decomposition</a>
                <ul>
                    <li><a href="#decomposition" onclick="closeNav()">Domain-Driven Design</a></li>
                    <li><a href="#boundaries" onclick="closeNav()">Service Boundaries</a></li>
                </ul>
            </li>
            <li><a href="#patterns" onclick="closeNav()">Architecture Patterns</a>
                <ul>
                    <li><a href="#patterns" onclick="closeNav()">API Gateway</a></li>
                    <li><a href="#service-mesh" onclick="closeNav()">Service Mesh</a></li>
                </ul>
            </li>
            <li><a href="#serverless" onclick="closeNav()">Serverless Architecture</a>
                <ul>
                    <li><a href="#serverless" onclick="closeNav()">FaaS Fundamentals</a></li>
                    <li><a href="#serverless-patterns" onclick="closeNav()">Serverless Patterns</a></li>
                    <li><a href="#serverless-tradeoffs" onclick="closeNav()">Tradeoffs</a></li>
                </ul>
            </li>
            <li><a href="#next-steps" onclick="closeNav()">Next Steps</a></li>
        </ol>
    </div>

    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">

                <div id="introduction" class="blog-content">
                    <h2><i class="fas fa-cubes me-2 text-teal"></i>Microservices Fundamentals</h2>
                    
                    <div class="highlight-box" style="background: rgba(191, 9, 47, 0.1); border-left-color: var(--color-crimson);">
                        <i class="fas fa-book me-2"></i>
                        <strong>Series Navigation:</strong> This is Part 5 of the 15-part System Design Series. <a href="system-design-database-sharding.html">Review Part 4: Database Design & Sharding</a> first.
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">15-Part Series</span>
                            <span class="badge bg-crimson">System Design Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="system-design-introduction.html">Introduction to System Design</a> - Fundamentals, why it matters, key concepts</li>
                                <li><a href="system-design-scalability-fundamentals.html">Scalability Fundamentals</a> - Horizontal vs vertical scaling, stateless design</li>
                                <li><a href="system-design-load-balancing-caching.html">Load Balancing & Caching</a> - Algorithms, Redis, CDN patterns</li>
                                <li><a href="system-design-database-sharding.html">Database Design & Sharding</a> - SQL vs NoSQL, replication, partitioning</li>
                                <li><strong>Microservices Architecture (This Guide)</strong> - Service decomposition, API gateways, sagas</li>
                                <li><a href="system-design-api-rest-graphql.html">API Design & REST/GraphQL</a> - RESTful principles, GraphQL, gRPC</li>
                                <li><a href="system-design-message-queues-event-driven.html">Message Queues & Event-Driven</a> - Kafka, RabbitMQ, event sourcing</li>
                                <li><a href="system-design-cap-theorem-consistency.html">CAP Theorem & Consistency</a> - Distributed trade-offs, eventual consistency</li>
                                <li><a href="system-design-rate-limiting-security.html">Rate Limiting & Security</a> - Throttling algorithms, DDoS protection</li>
                                <li><a href="system-design-monitoring-observability.html">Monitoring & Observability</a> - Logging, metrics, distributed tracing</li>
                                <li><a href="system-design-real-world-case-studies.html">Real-World Case Studies</a> - URL shortener, chat, feed, video streaming</li>
                                <li><a href="system-design-low-level-design-patterns.html">Low-Level Design Patterns</a> - SOLID, OOP patterns, data modeling</li>
                                <li><a href="system-design-distributed-systems-deep-dive.html">Distributed Systems Deep Dive</a> - Consensus, Paxos, Raft, coordination</li>
                                <li><a href="system-design-authentication-security.html">Authentication & Security</a> - OAuth, JWT, zero trust, compliance</li>
                                <li><a href="system-design-interview-preparation.html">Interview Preparation</a> - 4-step framework, estimation, strategies</li>
                            </ol>
                        </div>
                    </div>
                    
                    <p><strong>Microservices architecture</strong> structures an application as a collection of loosely coupled, independently deployable services. Each service is owned by a small team and focuses on a specific business capability.</p>

                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> Microservices aren't always the answer. Start with a monolith and extract services as complexity grows and team boundaries become clear.
                    </div>

                    <h3>Core Principles</h3>
                    <ul>
                        <li><strong>Single Responsibility:</strong> Each service does one thing well</li>
                        <li><strong>Loose Coupling:</strong> Services interact through well-defined interfaces</li>
                        <li><strong>High Cohesion:</strong> Related functionality grouped together</li>
                        <li><strong>Independent Deployment:</strong> Deploy services without affecting others</li>
                        <li><strong>Decentralized Data:</strong> Each service owns its data store</li>
                        <li><strong>Failure Isolation:</strong> One service failure doesn't crash the system</li>
                    </ul>
                </div>

                <div id="monolith-vs-microservices" class="blog-content mt-5">
                    <h3>Monolith vs Microservices</h3>
                    <p>Understanding when to use each architecture is crucial:</p>

                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Aspect</th>
                                <th>Monolith</th>
                                <th>Microservices</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Deployment</strong></td>
                                <td>Deploy entire application</td>
                                <td>Deploy services independently</td>
                            </tr>
                            <tr>
                                <td><strong>Scaling</strong></td>
                                <td>Scale entire application</td>
                                <td>Scale individual services</td>
                            </tr>
                            <tr>
                                <td><strong>Technology</strong></td>
                                <td>Single tech stack</td>
                                <td>Polyglot (different stacks per service)</td>
                            </tr>
                            <tr>
                                <td><strong>Team Structure</strong></td>
                                <td>Large, cross-functional</td>
                                <td>Small, service-owning teams</td>
                            </tr>
                            <tr>
                                <td><strong>Complexity</strong></td>
                                <td>In-process calls</td>
                                <td>Network calls, distributed systems</td>
                            </tr>
                            <tr>
                                <td><strong>Data</strong></td>
                                <td>Shared database</td>
                                <td>Database per service</td>
                            </tr>
                            <tr>
                                <td><strong>Testing</strong></td>
                                <td>End-to-end easier</td>
                                <td>Integration testing complex</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="experiment-card">
                        <h4><i class="fas fa-building me-2"></i>When to Choose Monolith</h4>
                        <div class="experiment-content">
                            <ul>
                                <li>Small team (< 10 developers)</li>
                                <li>Early-stage startup exploring product-market fit</li>
                                <li>Simple domain with clear boundaries</li>
                                <li>Need rapid development without distributed complexity</li>
                                <li>Limited DevOps expertise</li>
                            </ul>
<pre><code class="language-python"># Monolith structure example
my_app/
├── app/
│   ├── models/
│   │   ├── user.py
│   │   ├── order.py
│   │   └── product.py
│   ├── services/
│   │   ├── user_service.py
│   │   ├── order_service.py
│   │   └── product_service.py
│   ├── api/
│   │   └── routes.py
│   └── database.py
├── tests/
└── requirements.txt</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Simple</span>
                            <span class="bias-tag">Fast to Start</span>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-cubes me-2"></i>When to Choose Microservices</h4>
                        <div class="experiment-content">
                            <ul>
                                <li>Large organization with multiple teams</li>
                                <li>Different parts of system have different scaling needs</li>
                                <li>Teams need to deploy independently</li>
                                <li>Complex domain with clear bounded contexts</li>
                                <li>Strong DevOps/infrastructure capabilities</li>
                            </ul>
<pre><code class="language-python"># Microservices structure example
platform/
├── services/
│   ├── user-service/
│   │   ├── src/
│   │   ├── Dockerfile
│   │   └── k8s/
│   ├── order-service/
│   │   ├── src/
│   │   ├── Dockerfile
│   │   └── k8s/
│   ├── payment-service/
│   │   ├── src/
│   │   ├── Dockerfile
│   │   └── k8s/
│   └── notification-service/
│       ├── src/
│       ├── Dockerfile
│       └── k8s/
├── api-gateway/
├── infrastructure/
└── docker-compose.yml</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Scalable</span>
                            <span class="bias-tag">Team Autonomy</span>
                        </div>
                    </div>

                    <div class="highlight-box" style="background: rgba(191, 9, 47, 0.1); border-left-color: var(--color-crimson);">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>The Monolith First Approach:</strong> Many successful companies (Shopify, Etsy) started as monoliths and extracted services as they scaled. Don't prematurely optimize for microservices—the complexity isn't free.
                    </div>
                </div>

                <div id="decomposition" class="blog-content mt-5">
                    <h2><i class="fas fa-puzzle-piece me-2 text-teal"></i>Service Decomposition</h2>
                    <p>Breaking a monolith into microservices requires thoughtful decomposition strategies:</p>

                    <h3>Domain-Driven Design (DDD)</h3>
                    <p>Use <strong>bounded contexts</strong> from DDD to identify service boundaries:</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-shopping-cart me-2"></i>E-Commerce Bounded Contexts</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Bounded Contexts for E-Commerce Platform

# User Context - User identity and preferences
class UserService:
    """Handles user registration, authentication, profiles"""
    def register_user(self, email, password): pass
    def authenticate(self, email, password): pass
    def get_profile(self, user_id): pass

# Catalog Context - Product information
class CatalogService:
    """Manages product listings, categories, search"""
    def get_product(self, product_id): pass
    def search_products(self, query): pass
    def get_category(self, category_id): pass

# Order Context - Order lifecycle
class OrderService:
    """Handles order creation, status, history"""
    def create_order(self, user_id, items): pass
    def get_order_status(self, order_id): pass
    def cancel_order(self, order_id): pass

# Inventory Context - Stock management
class InventoryService:
    """Manages stock levels, reservations"""
    def check_availability(self, product_id, quantity): pass
    def reserve_stock(self, product_id, quantity): pass
    def release_stock(self, product_id, quantity): pass

# Payment Context - Financial transactions
class PaymentService:
    """Processes payments, refunds"""
    def process_payment(self, order_id, amount): pass
    def refund_payment(self, payment_id): pass

# Shipping Context - Fulfillment
class ShippingService:
    """Handles shipping labels, tracking"""
    def create_shipment(self, order_id): pass
    def get_tracking(self, shipment_id): pass</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">DDD</span>
                            <span class="bias-tag">Bounded Context</span>
                        </div>
                    </div>

                    <h3>Decomposition Strategies</h3>
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Strategy</th>
                                <th>Description</th>
                                <th>When to Use</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>By Business Capability</strong></td>
                                <td>Align services with business functions</td>
                                <td>Clear business domains exist</td>
                            </tr>
                            <tr>
                                <td><strong>By Subdomain</strong></td>
                                <td>Core, supporting, generic subdomains</td>
                                <td>Complex domain with varying importance</td>
                            </tr>
                            <tr>
                                <td><strong>Strangler Fig</strong></td>
                                <td>Gradually replace monolith pieces</td>
                                <td>Migrating existing monolith</td>
                            </tr>
                            <tr>
                                <td><strong>By Team</strong></td>
                                <td>Conway's Law—match org structure</td>
                                <td>Clear team boundaries</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="boundaries" class="blog-content mt-5">
                    <h3>Service Boundaries</h3>
                    <p>Good service boundaries minimize inter-service communication:</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-check-circle me-2 text-success"></i>Good Boundaries</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Good: Order service owns all order data
class OrderService:
    def create_order(self, user_id, items):
        # All order logic contained within service
        order = Order(user_id=user_id)
        for item in items:
            order.add_item(item)
        order.calculate_total()
        self.db.save(order)
        
        # Emit event for other services (async)
        self.event_bus.publish("order.created", order)
        return order
    
    def get_order_details(self, order_id):
        # No external calls needed
        return self.db.get(order_id)</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-times-circle me-2 text-danger"></i>Bad Boundaries (Distributed Monolith)</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Bad: Order service makes synchronous calls for every operation
class OrderService:
    def create_order(self, user_id, items):
        # Synchronous calls create tight coupling
        user = self.user_service.get_user(user_id)  # Network call
        
        for item in items:
            product = self.catalog_service.get_product(item.id)  # Network call
            price = self.pricing_service.get_price(item.id)  # Network call
            stock = self.inventory_service.check(item.id)  # Network call
        
        # Any service failure = order failure
        # Can't deploy independently
        # Latency compounds with each call</code></pre>
                        </div>
                    </div>

                    <h4>Signs of Bad Boundaries</h4>
                    <ul>
                        <li>Services need to call each other synchronously for simple operations</li>
                        <li>Circular dependencies between services</li>
                        <li>Shared database between services</li>
                        <li>Must deploy multiple services together</li>
                        <li>Same data modified by multiple services</li>
                    </ul>
                </div>

                <div id="patterns" class="blog-content mt-5">
                    <h2><i class="fas fa-sitemap me-2 text-teal"></i>Architecture Patterns</h2>

                    <div class="experiment-card">
                        <h4><i class="fas fa-door-open me-2"></i>API Gateway</h4>
                        <div class="experiment-content">
                            <p>Single entry point that routes requests to appropriate services.</p>
<pre><code class="language-python"># API Gateway responsibilities
class APIGateway:
    def __init__(self):
        self.services = {
            "/users": "user-service:8080",
            "/orders": "order-service:8080",
            "/products": "catalog-service:8080"
        }
    
    def route_request(self, request):
        # 1. Authentication
        user = self.authenticate(request.headers.get("Authorization"))
        
        # 2. Rate limiting
        if self.rate_limiter.is_limited(user.id):
            return Response(status=429)
        
        # 3. Route to service
        service = self.get_service(request.path)
        
        # 4. Protocol translation (REST -> gRPC)
        response = service.forward(request)
        
        # 5. Response aggregation (if needed)
        return response
    
    def aggregate_product_page(self, product_id):
        """Combine data from multiple services"""
        product = self.catalog_service.get(product_id)
        reviews = self.review_service.get_for_product(product_id)
        inventory = self.inventory_service.check(product_id)
        
        return {
            **product,
            "reviews": reviews,
            "in_stock": inventory.available > 0
        }</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Entry Point</span>
                            <span class="bias-tag">Cross-Cutting Concerns</span>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-project-diagram me-2"></i>Backend for Frontend (BFF)</h4>
                        <div class="experiment-content">
                            <p>Separate backend for each client type (web, mobile, IoT).</p>
<pre><code class="language-python"># BFF Pattern
# Each client gets optimized API

# Mobile BFF - Minimal data, pagination
class MobileBFF:
    def get_product_list(self, page=1, limit=20):
        products = self.catalog.get_products(page, limit)
        return [{
            "id": p.id,
            "name": p.name,
            "price": p.price,
            "thumbnail": p.images[0].url  # Only first image
        } for p in products]

# Web BFF - Rich data, full details
class WebBFF:
    def get_product_list(self):
        products = self.catalog.get_products()
        for product in products:
            product["reviews_summary"] = self.reviews.get_summary(product.id)
            product["availability"] = self.inventory.check(product.id)
            product["related"] = self.recommendations.get_related(product.id)
        return products</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Client-Specific</span>
                            <span class="bias-tag">Optimized Responses</span>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-database me-2"></i>Database per Service</h4>
                        <div class="experiment-content">
                            <p>Each service owns its data store—no shared databases.</p>
<pre><code class="language-python"># Each service manages its own database
# Order Service - PostgreSQL for transactions
order_db = PostgreSQL("order-db")

# Catalog Service - MongoDB for flexible product data
catalog_db = MongoDB("catalog-db")

# Search Service - Elasticsearch for full-text search
search_db = Elasticsearch("search-cluster")

# Session Service - Redis for fast access
session_db = Redis("session-cache")

# Analytics Service - ClickHouse for time-series
analytics_db = ClickHouse("analytics-cluster")</code></pre>
                            <p><strong>Challenge:</strong> Cross-service queries require careful design (event sourcing, CQRS, or API composition).</p>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Data Isolation</span>
                            <span class="bias-tag">Polyglot Persistence</span>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-bolt me-2"></i>Saga Pattern</h4>
                        <div class="experiment-content">
                            <p>Manage distributed transactions across services using compensating transactions.</p>
<pre><code class="language-python"># Saga Pattern for Order Creation
class OrderSaga:
    def execute(self, order_data):
        saga_log = []
        
        try:
            # Step 1: Reserve inventory
            reservation = self.inventory.reserve(order_data.items)
            saga_log.append(("inventory", reservation.id))
            
            # Step 2: Process payment
            payment = self.payment.charge(order_data.user_id, order_data.total)
            saga_log.append(("payment", payment.id))
            
            # Step 3: Create order
            order = self.orders.create(order_data)
            saga_log.append(("order", order.id))
            
            # Step 4: Notify user
            self.notifications.send(order_data.user_id, "Order confirmed!")
            
            return order
            
        except Exception as e:
            # Compensating transactions (rollback)
            self.compensate(saga_log)
            raise e
    
    def compensate(self, saga_log):
        """Undo completed steps in reverse order"""
        for service, resource_id in reversed(saga_log):
            if service == "order":
                self.orders.cancel(resource_id)
            elif service == "payment":
                self.payment.refund(resource_id)
            elif service == "inventory":
                self.inventory.release(resource_id)</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Distributed Transactions</span>
                            <span class="bias-tag">Eventual Consistency</span>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-shield-alt me-2"></i>Circuit Breaker</h4>
                        <div class="experiment-content">
                            <p>Prevent cascading failures by stopping calls to failing services.</p>
<pre><code class="language-python"># Circuit Breaker Implementation
from enum import Enum
import time

class CircuitState(Enum):
    CLOSED = "closed"      # Normal operation
    OPEN = "open"          # Failing, reject calls
    HALF_OPEN = "half_open"  # Testing recovery

class CircuitBreaker:
    def __init__(self, failure_threshold=5, recovery_timeout=30):
        self.failure_threshold = failure_threshold
        self.recovery_timeout = recovery_timeout
        self.failure_count = 0
        self.last_failure_time = None
        self.state = CircuitState.CLOSED
    
    def call(self, func, *args, **kwargs):
        if self.state == CircuitState.OPEN:
            if self._should_attempt_reset():
                self.state = CircuitState.HALF_OPEN
            else:
                raise CircuitOpenError("Circuit is open")
        
        try:
            result = func(*args, **kwargs)
            self._on_success()
            return result
        except Exception as e:
            self._on_failure()
            raise e
    
    def _on_success(self):
        self.failure_count = 0
        self.state = CircuitState.CLOSED
    
    def _on_failure(self):
        self.failure_count += 1
        self.last_failure_time = time.time()
        
        if self.failure_count >= self.failure_threshold:
            self.state = CircuitState.OPEN
    
    def _should_attempt_reset(self):
        return (time.time() - self.last_failure_time) > self.recovery_timeout

# Usage
payment_circuit = CircuitBreaker(failure_threshold=5, recovery_timeout=30)
result = payment_circuit.call(payment_service.charge, user_id, amount)</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Fault Tolerance</span>
                            <span class="bias-tag">Resilience</span>
                        </div>
                    </div>
                </div>

                <div id="service-mesh" class="blog-content mt-5">
                    <h3>Service Mesh</h3>
                    <p>A <strong>service mesh</strong> is a dedicated infrastructure layer for handling service-to-service communication. It offloads common concerns from application code.</p>

                    <h4>Service Mesh Capabilities</h4>
                    <ul>
                        <li><strong>Traffic Management:</strong> Load balancing, routing, retries</li>
                        <li><strong>Security:</strong> mTLS encryption, authentication</li>
                        <li><strong>Observability:</strong> Metrics, tracing, logging</li>
                        <li><strong>Resilience:</strong> Circuit breaking, timeouts, rate limiting</li>
                    </ul>

                    <div class="experiment-card">
                        <h4><i class="fas fa-network-wired me-2"></i>Istio Service Mesh Example</h4>
                        <div class="experiment-content">
<pre><code class="language-yaml"># Istio VirtualService for traffic routing
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: order-service
spec:
  hosts:
    - order-service
  http:
    - match:
        - headers:
            x-canary:
              exact: "true"
      route:
        - destination:
            host: order-service
            subset: v2
          weight: 100
    - route:
        - destination:
            host: order-service
            subset: v1
          weight: 90
        - destination:
            host: order-service
            subset: v2
          weight: 10  # 10% canary traffic

---
# Istio DestinationRule for circuit breaking
apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: order-service
spec:
  host: order-service
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
      http:
        h2UpgradePolicy: UPGRADE
        http1MaxPendingRequests: 100
    outlierDetection:
      consecutive5xxErrors: 5
      interval: 30s
      baseEjectionTime: 30s</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Istio</span>
                            <span class="bias-tag">Traffic Management</span>
                        </div>
                    </div>

                    <h4>Popular Service Meshes</h4>
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Service Mesh</th>
                                <th>Architecture</th>
                                <th>Best For</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Istio</strong></td>
                                <td>Envoy sidecar</td>
                                <td>Full-featured, large deployments</td>
                            </tr>
                            <tr>
                                <td><strong>Linkerd</strong></td>
                                <td>Lightweight proxy</td>
                                <td>Simplicity, performance</td>
                            </tr>
                            <tr>
                                <td><strong>Consul Connect</strong></td>
                                <td>HashiCorp ecosystem</td>
                                <td>Multi-cloud, service discovery</td>
                            </tr>
                            <tr>
                                <td><strong>AWS App Mesh</strong></td>
                                <td>Envoy, AWS integration</td>
                                <td>AWS-native workloads</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="serverless" class="blog-content mt-5">
                    <h2><i class="fas fa-cloud me-2 text-teal"></i>Serverless Architecture</h2>
                    
                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> Serverless doesn't mean "no servers"—it means you don't manage servers. The cloud provider handles scaling, patching, and infrastructure automatically.
                    </div>
                    
                    <p><strong>Function-as-a-Service (FaaS)</strong> is a cloud computing model where you deploy individual functions that execute in response to events. AWS Lambda, Azure Functions, and Google Cloud Functions are popular FaaS platforms.</p>
                    
                    <h3>Serverless Benefits</h3>
                    <ul>
                        <li><strong>No Server Management:</strong> Focus on code, not infrastructure</li>
                        <li><strong>Auto-Scaling:</strong> Scale to zero or thousands instantly</li>
                        <li><strong>Pay-per-Use:</strong> Only pay for actual execution time</li>
                        <li><strong>Built-in HA:</strong> Multi-AZ by default</li>
                    </ul>

                    <div class="experiment-card">
                        <h4><i class="fas fa-lambda me-2"></i>AWS Lambda Function Example</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># AWS Lambda Function - Process uploaded images
import boto3
import json
from PIL import Image
import io

s3 = boto3.client('s3')

def lambda_handler(event, context):
    """Triggered when image uploaded to S3"""
    # Get uploaded file info
    bucket = event['Records'][0]['s3']['bucket']['name']
    key = event['Records'][0]['s3']['object']['key']
    
    # Download image
    response = s3.get_object(Bucket=bucket, Key=key)
    image_content = response['Body'].read()
    
    # Process image (resize)
    image = Image.open(io.BytesIO(image_content))
    thumbnail = image.resize((200, 200))
    
    # Save thumbnail
    buffer = io.BytesIO()
    thumbnail.save(buffer, format='JPEG')
    buffer.seek(0)
    
    thumbnail_key = f"thumbnails/{key}"
    s3.put_object(
        Bucket=bucket,
        Key=thumbnail_key,
        Body=buffer.getvalue()
    )
    
    return {
        'statusCode': 200,
        'body': json.dumps({'thumbnail': thumbnail_key})
    }</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">AWS Lambda</span>
                            <span class="bias-tag">Event-Driven</span>
                        </div>
                    </div>
                </div>

                <div id="serverless-patterns" class="blog-content mt-5">
                    <h3>Serverless Patterns</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-bolt me-2"></i>Event-Driven Processing</h4>
                        <div class="experiment-content">
                            <p>Functions triggered by events from various sources:</p>
<pre><code class="language-yaml"># serverless.yml - Event triggers
service: order-processor

functions:
  processOrder:
    handler: handler.process_order
    events:
      - sqs:
          arn: arn:aws:sqs:region:account:order-queue
          batchSize: 10
  
  sendNotification:
    handler: handler.send_notification
    events:
      - sns:
          arn: arn:aws:sns:region:account:order-notifications
  
  apiEndpoint:
    handler: handler.api
    events:
      - http:
          path: /orders
          method: post
  
  scheduledReport:
    handler: handler.generate_report
    events:
      - schedule: rate(1 day)</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-link me-2"></i>Function Composition</h4>
                        <div class="experiment-content">
                            <p>Chain functions using Step Functions or event choreography:</p>
<pre><code class="language-json"># AWS Step Functions - Order workflow
{
  "Comment": "Order Processing Workflow",
  "StartAt": "ValidateOrder",
  "States": {
    "ValidateOrder": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:...:validateOrder",
      "Next": "CheckInventory"
    },
    "CheckInventory": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:...:checkInventory",
      "Next": "ProcessPayment",
      "Catch": [
        {
          "ErrorEquals": ["OutOfStockError"],
          "Next": "NotifyOutOfStock"
        }
      ]
    },
    "ProcessPayment": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:...:processPayment",
      "Next": "FulfillOrder"
    },
    "FulfillOrder": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:...:fulfillOrder",
      "End": true
    },
    "NotifyOutOfStock": {
      "Type": "Task",
      "Resource": "arn:aws:lambda:...:notifyUser",
      "End": true
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div id="serverless-tradeoffs" class="blog-content mt-5">
                    <h3>Serverless Tradeoffs</h3>

                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Benefit</th>
                                <th>Tradeoff</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>No server management</td>
                                <td>Less control over environment</td>
                            </tr>
                            <tr>
                                <td>Auto-scaling</td>
                                <td>Cold start latency (100ms-few seconds)</td>
                            </tr>
                            <tr>
                                <td>Pay-per-execution</td>
                                <td>Expensive for constant high load</td>
                            </tr>
                            <tr>
                                <td>Built-in HA</td>
                                <td>Vendor lock-in</td>
                            </tr>
                            <tr>
                                <td>Rapid development</td>
                                <td>Debugging/testing more complex</td>
                            </tr>
                            <tr>
                                <td>Event-driven simplicity</td>
                                <td>Limited execution time (15 min max)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box" style="background: rgba(191, 9, 47, 0.1); border-left-color: var(--color-crimson);">
                        <i class="fas fa-calculator"></i>
                        <strong>Cost Comparison:</strong> At low traffic, serverless is cheaper. But at ~1M requests/day with 200ms execution, EC2 often becomes more economical. Calculate your break-even point!
                    </div>

                    <h4>When to Use Serverless</h4>
                    <ul>
                        <li>✅ Variable/unpredictable traffic</li>
                        <li>✅ Event-driven workloads</li>
                        <li>✅ Short-running tasks (&lt; 15 minutes)</li>
                        <li>✅ Rapid prototyping</li>
                        <li>✅ Background jobs (image processing, data ETL)</li>
                        <li>❌ Long-running processes</li>
                        <li>❌ Consistent high-throughput workloads</li>
                        <li>❌ Latency-sensitive applications (cold starts)</li>
                    </ul>
                </div>

                <div id="next-steps" class="blog-content mt-5">
                    <h2><i class="fas fa-arrow-right me-2 text-teal"></i>Next Steps</h2>
                    
                    <div class="related-posts">
                        <h3><i class="fas fa-book-reader me-2"></i>Continue the Series</h3>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 4: Database Design & Sharding</h5>
                            <p class="text-muted small mb-2">Review database design patterns and sharding strategies.</p>
                            <a href="system-design-database-sharding.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 6: API Design & REST/GraphQL</h5>
                            <p class="text-muted small mb-2">Learn API design best practices and when to use REST vs GraphQL.</p>
                            <a href="system-design-api-rest-graphql.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 7: Message Queues & Event-Driven</h5>
                            <p class="text-muted small mb-2">Master asynchronous communication with message queues and event-driven architecture.</p>
                            <a href="system-design-message-queues-event-driven.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </section>

    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">
                        I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.
                    </p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://in.pinterest.com/wasilz/" target="_blank" class="social-icon" title="Pinterest">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <hr class="bg-secondary">

            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small">
                        <i class="fas fa-icons me-2"></i>Icons from <a href="https://www.flaticon.com/" target="_blank" class="text-light">Flaticon</a> &amp; <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a>
                    </p>
                    <p class="small mt-3">
                        <a href="/" class="text-light text-decoration-none">Home</a> | 
                        <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | 
                        <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">
                        Enjoying this content? ☕ <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Keep me caffeinated</a> to keep the pixels flowing!
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <button id="scrollToTop" class="scroll-to-top"><i class="fas fa-arrow-up"></i></button>
    <!-- Category Indicator -->
    <div id="categoryIndicator" class="category-indicator" title="Current Section">
        <i class="fas fa-tag"></i><span id="categoryText">Technology</span>
    </div>
    <script src="../../../js/cookie-consent.js"></script>
    <script src="../../../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

            </body>
</html>
