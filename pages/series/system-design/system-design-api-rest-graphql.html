<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, archive" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Master API design and networking protocols for scalable systems. Learn REST principles, GraphQL, WebSockets, gRPC, TCP/UDP, DNS, authentication, and real-world API patterns." />
    <meta name="author" content="Wasil Zafar" />
    <meta name="keywords" content="API Design, REST, GraphQL, WebSockets, gRPC, TCP/UDP, DNS, Networking, HTTP, Authentication, OAuth, System Design, Web Services" />
    <meta property="og:title" content="System Design Series Part 6: API Design & REST/GraphQL" />
    <meta property="og:description" content="Master API design best practices, REST principles, and GraphQL for building scalable web services." />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2026-01-25" />
    <meta property="article:author" content="Wasil Zafar" />
    <meta property="article:section" content="Technology" />
    
    <title>System Design Series Part 6: API Design & REST/GraphQL - Wasil Zafar</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', { 'ad_storage': 'denied', 'ad_user_data': 'denied', 'ad_personalization': 'denied', 'analytics_storage': 'denied', 'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE'] });
        gtag('consent', 'default', { 'ad_storage': 'granted', 'ad_user_data': 'granted', 'ad_personalization': 'granted', 'analytics_storage': 'granted' });
        gtag('set', 'url_passthrough', true);
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PBS8M2JR');</script>

    </head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div class="content-wrap">
            <div class="msg-wrap"><p style="font-size: 14px; color: var(--color-navy);">We use cookies. See our <a href="/privacy-policy.html" style="color: var(--color-teal);">Privacy Policy</a>.</p></div>
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal);">Reject All</button>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/"><span class="gradient-text">Wasil Zafar</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#certifications">Certifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#interests">Interests</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="blog-hero">
        <div class="container py-5">
            <div class="blog-header">
                <a href="/pages/categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
                <h1 class="display-4 fw-bold mb-3">System Design Series Part 6: API Design & REST/GraphQL</h1>
                <div class="blog-meta">
                    <span><i class="fas fa-calendar me-2"></i>January 25, 2026</span>
                    <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                    <span class="reading-time"><i class="fas fa-clock me-1"></i>35 min read</span>
                    <button onclick="window.print()" class="print-btn"><i class="fas fa-print"></i> Print</button>
                </div>
                <p class="lead">Master API design best practices for building scalable web services. Learn REST principles, GraphQL advantages, versioning strategies, authentication patterns, and real-world API design considerations.</p>
            </div>
        </div>
    </section>

    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents"><i class="fas fa-list"></i></button>

    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header">
            <h3><i class="fas fa-list me-2"></i>Table of Contents</h3>
            <button class="closebtn" onclick="closeNav()">&times;</button>
        </div>
        <ol>
            <li><a href="#rest" onclick="closeNav()">REST API Design</a>
                <ul>
                    <li><a href="#rest" onclick="closeNav()">REST Principles</a></li>
                    <li><a href="#http-methods" onclick="closeNav()">HTTP Methods</a></li>
                </ul>
            </li>
            <li><a href="#graphql" onclick="closeNav()">GraphQL</a>
                <ul>
                    <li><a href="#graphql" onclick="closeNav()">GraphQL Fundamentals</a></li>
                    <li><a href="#rest-vs-graphql" onclick="closeNav()">REST vs GraphQL</a></li>
                </ul>
            </li>
            <li><a href="#best-practices" onclick="closeNav()">Best Practices</a>
                <ul>
                    <li><a href="#best-practices" onclick="closeNav()">Versioning</a></li>
                    <li><a href="#authentication" onclick="closeNav()">Authentication</a></li>
                </ul>
            </li>
            <li><a href="#networking" onclick="closeNav()">Networking Protocols</a>
                <ul>
                    <li><a href="#networking" onclick="closeNav()">TCP/UDP & DNS</a></li>
                    <li><a href="#websockets" onclick="closeNav()">WebSockets</a></li>
                    <li><a href="#grpc" onclick="closeNav()">gRPC</a></li>
                </ul>
            </li>
            <li><a href="#next-steps" onclick="closeNav()">Next Steps</a></li>
        </ol>
    </div>

    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">

                <div id="rest" class="blog-content">
                    <h2><i class="fas fa-exchange-alt me-2 text-teal"></i>REST API Design</h2>
                    
                    <div class="highlight-box" style="background: rgba(191, 9, 47, 0.1); border-left-color: var(--color-crimson);">
                        <i class="fas fa-book me-2"></i>
                        <strong>Series Navigation:</strong> This is Part 6 of the 15-part System Design Series. <a href="system-design-microservices-architecture.html">Review Part 5: Microservices Architecture</a> first.
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">15-Part Series</span>
                            <span class="badge bg-crimson">System Design Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="system-design-introduction.html">Introduction to System Design</a> - Fundamentals, why it matters, key concepts</li>
                                <li><a href="system-design-scalability-fundamentals.html">Scalability Fundamentals</a> - Horizontal vs vertical scaling, stateless design</li>
                                <li><a href="system-design-load-balancing-caching.html">Load Balancing & Caching</a> - Algorithms, Redis, CDN patterns</li>
                                <li><a href="system-design-database-sharding.html">Database Design & Sharding</a> - SQL vs NoSQL, replication, partitioning</li>
                                <li><a href="system-design-microservices-architecture.html">Microservices Architecture</a> - Service decomposition, API gateways, sagas</li>
                                <li><strong>API Design & REST/GraphQL (This Guide)</strong> - RESTful principles, GraphQL, gRPC</li>
                                <li><a href="system-design-message-queues-event-driven.html">Message Queues & Event-Driven</a> - Kafka, RabbitMQ, event sourcing</li>
                                <li><a href="system-design-cap-theorem-consistency.html">CAP Theorem & Consistency</a> - Distributed trade-offs, eventual consistency</li>
                                <li><a href="system-design-rate-limiting-security.html">Rate Limiting & Security</a> - Throttling algorithms, DDoS protection</li>
                                <li><a href="system-design-monitoring-observability.html">Monitoring & Observability</a> - Logging, metrics, distributed tracing</li>
                                <li><a href="system-design-real-world-case-studies.html">Real-World Case Studies</a> - URL shortener, chat, feed, video streaming</li>
                                <li><a href="system-design-low-level-design-patterns.html">Low-Level Design Patterns</a> - SOLID, OOP patterns, data modeling</li>
                                <li><a href="system-design-distributed-systems-deep-dive.html">Distributed Systems Deep Dive</a> - Consensus, Paxos, Raft, coordination</li>
                                <li><a href="system-design-authentication-security.html">Authentication & Security</a> - OAuth, JWT, zero trust, compliance</li>
                                <li><a href="system-design-interview-preparation.html">Interview Preparation</a> - 4-step framework, estimation, strategies</li>
                            </ol>
                        </div>
                    </div>
                    
                    <p><strong>REST (Representational State Transfer)</strong> is an architectural style for designing networked applications. It relies on a stateless, client-server protocol—almost always HTTP—to provide standard operations on resources.</p>

                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> Good API design is about making the common cases easy and the complex cases possible. Think like a consumer of your API.
                    </div>

                    <h3>RESTful Principles</h3>
                    <ul>
                        <li><strong>Client-Server:</strong> Separation of concerns—UI from data storage</li>
                        <li><strong>Stateless:</strong> Each request contains all information needed</li>
                        <li><strong>Cacheable:</strong> Responses can be cached to improve performance</li>
                        <li><strong>Uniform Interface:</strong> Standardized methods and URI structure</li>
                        <li><strong>Layered System:</strong> Client can't tell if connected to end server</li>
                    </ul>

                    <h3>Resource Naming Conventions</h3>
<pre><code class="language-python"># Good REST URLs - Resources as nouns, plural
GET    /api/v1/users              # List all users
GET    /api/v1/users/123          # Get specific user
POST   /api/v1/users              # Create new user
PUT    /api/v1/users/123          # Update entire user
PATCH  /api/v1/users/123          # Partial update
DELETE /api/v1/users/123          # Delete user

# Nested resources
GET    /api/v1/users/123/orders           # User's orders
GET    /api/v1/users/123/orders/456       # Specific order
POST   /api/v1/users/123/orders           # Create order for user

# Bad REST URLs - Avoid verbs, actions
GET    /api/v1/getUsers           # ❌ Verb in URL
POST   /api/v1/createUser         # ❌ Verb in URL
GET    /api/v1/user               # ❌ Singular noun</code></pre>
                </div>

                <div id="http-methods" class="blog-content mt-5">
                    <h3>HTTP Methods</h3>
                    <p>Each HTTP method has specific semantics and properties:</p>

                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Method</th>
                                <th>Purpose</th>
                                <th>Idempotent</th>
                                <th>Safe</th>
                                <th>Request Body</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>GET</strong></td>
                                <td>Retrieve resource</td>
                                <td>✅ Yes</td>
                                <td>✅ Yes</td>
                                <td>No</td>
                            </tr>
                            <tr>
                                <td><strong>POST</strong></td>
                                <td>Create resource</td>
                                <td>❌ No</td>
                                <td>❌ No</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td><strong>PUT</strong></td>
                                <td>Replace resource</td>
                                <td>✅ Yes</td>
                                <td>❌ No</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td><strong>PATCH</strong></td>
                                <td>Partial update</td>
                                <td>❌ No*</td>
                                <td>❌ No</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td><strong>DELETE</strong></td>
                                <td>Remove resource</td>
                                <td>✅ Yes</td>
                                <td>❌ No</td>
                                <td>Optional</td>
                            </tr>
                            <tr>
                                <td><strong>HEAD</strong></td>
                                <td>Get headers only</td>
                                <td>✅ Yes</td>
                                <td>✅ Yes</td>
                                <td>No</td>
                            </tr>
                            <tr>
                                <td><strong>OPTIONS</strong></td>
                                <td>Get allowed methods</td>
                                <td>✅ Yes</td>
                                <td>✅ Yes</td>
                                <td>No</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><em>*PATCH can be idempotent if designed carefully</em></p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-code me-2"></i>Status Codes</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># HTTP Status Codes - Use them correctly!

# 2xx Success
200 OK              # General success, return data
201 Created         # Resource created (return location header)
204 No Content      # Success, no response body (DELETE)

# 3xx Redirection
301 Moved Permanently    # Resource URL changed
304 Not Modified         # Cached version is current

# 4xx Client Errors
400 Bad Request     # Invalid syntax, validation error
401 Unauthorized    # Authentication required/failed
403 Forbidden       # Authenticated but not authorized
404 Not Found       # Resource doesn't exist
405 Method Not Allowed   # HTTP method not supported
409 Conflict        # State conflict (duplicate, version)
422 Unprocessable Entity  # Valid syntax, semantic error
429 Too Many Requests    # Rate limit exceeded

# 5xx Server Errors
500 Internal Server Error  # Unexpected server error
502 Bad Gateway            # Upstream server error
503 Service Unavailable    # Maintenance or overload
504 Gateway Timeout        # Upstream timeout</code></pre>
                        </div>
                    </div>

                    <h4>Response Format</h4>
<pre><code class="language-json">// Successful response
{
    "data": {
        "id": 123,
        "name": "John Doe",
        "email": "john@example.com",
        "created_at": "2024-01-15T10:30:00Z"
    },
    "meta": {
        "request_id": "abc123",
        "response_time_ms": 45
    }
}

// Error response
{
    "error": {
        "code": "VALIDATION_ERROR",
        "message": "Invalid email format",
        "details": [
            {
                "field": "email",
                "message": "Must be a valid email address"
            }
        ]
    },
    "meta": {
        "request_id": "def456"
    }
}</code></pre>

                    <h4>Pagination</h4>
<pre><code class="language-python"># Cursor-based pagination (recommended for large datasets)
GET /api/v1/users?cursor=eyJpZCI6MTAwfQ&limit=20

# Response
{
    "data": [...],
    "pagination": {
        "next_cursor": "eyJpZCI6MTIwfQ",
        "has_more": true
    }
}

# Offset-based pagination (simpler but less efficient)
GET /api/v1/users?page=5&per_page=20

# Response
{
    "data": [...],
    "pagination": {
        "total": 458,
        "page": 5,
        "per_page": 20,
        "total_pages": 23
    }
}</code></pre>
                </div>

                <div id="graphql" class="blog-content mt-5">
                    <h2><i class="fas fa-project-diagram me-2 text-teal"></i>GraphQL</h2>
                    <p><strong>GraphQL</strong> is a query language for APIs developed by Facebook. It lets clients request exactly the data they need, solving over-fetching and under-fetching problems common in REST.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-code me-2"></i>Schema Definition</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># GraphQL Schema (SDL)
type User {
    id: ID!
    name: String!
    email: String!
    posts: [Post!]!
    followers: [User!]!
    createdAt: DateTime!
}

type Post {
    id: ID!
    title: String!
    content: String!
    author: User!
    comments: [Comment!]!
    likes: Int!
    publishedAt: DateTime
}

type Comment {
    id: ID!
    text: String!
    author: User!
    createdAt: DateTime!
}

type Query {
    user(id: ID!): User
    users(limit: Int, offset: Int): [User!]!
    post(id: ID!): Post
    posts(authorId: ID, published: Boolean): [Post!]!
}

type Mutation {
    createUser(input: CreateUserInput!): User!
    updateUser(id: ID!, input: UpdateUserInput!): User!
    createPost(input: CreatePostInput!): Post!
    deletePost(id: ID!): Boolean!
}

input CreateUserInput {
    name: String!
    email: String!
}

input CreatePostInput {
    title: String!
    content: String!
}</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-search me-2"></i>Queries</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># GraphQL Query - Client requests exactly what it needs
query GetUserWithPosts($userId: ID!) {
    user(id: $userId) {
        name
        email
        posts {
            id
            title
            likes
            comments {
                text
                author {
                    name
                }
            }
        }
    }
}

# Variables
{
    "userId": "123"
}

# Response - Only requested fields
{
    "data": {
        "user": {
            "name": "John Doe",
            "email": "john@example.com",
            "posts": [
                {
                    "id": "post_1",
                    "title": "My First Post",
                    "likes": 42,
                    "comments": [
                        {
                            "text": "Great post!",
                            "author": { "name": "Jane Smith" }
                        }
                    ]
                }
            ]
        }
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-edit me-2"></i>Mutations</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># GraphQL Mutation - Create/Update data
mutation CreatePost($input: CreatePostInput!) {
    createPost(input: $input) {
        id
        title
        content
        publishedAt
        author {
            name
        }
    }
}

# Variables
{
    "input": {
        "title": "GraphQL Best Practices",
        "content": "Here's what I learned..."
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-bolt me-2"></i>Subscriptions (Real-time)</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># GraphQL Subscription - Real-time updates
subscription OnNewComment($postId: ID!) {
    commentAdded(postId: $postId) {
        id
        text
        author {
            name
            avatar
        }
        createdAt
    }
}

# Server pushes updates when new comments arrive</code></pre>
                        </div>
                    </div>
                </div>

                <div id="rest-vs-graphql" class="blog-content mt-5">
                    <h3>REST vs GraphQL</h3>
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Aspect</th>
                                <th>REST</th>
                                <th>GraphQL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Data Fetching</strong></td>
                                <td>Multiple endpoints, fixed responses</td>
                                <td>Single endpoint, flexible queries</td>
                            </tr>
                            <tr>
                                <td><strong>Over/Under-fetching</strong></td>
                                <td>Common problem</td>
                                <td>Request exactly what you need</td>
                            </tr>
                            <tr>
                                <td><strong>Versioning</strong></td>
                                <td>URL versioning (/v1/, /v2/)</td>
                                <td>Evolve schema, deprecate fields</td>
                            </tr>
                            <tr>
                                <td><strong>Caching</strong></td>
                                <td>HTTP caching built-in</td>
                                <td>More complex, client-side caching</td>
                            </tr>
                            <tr>
                                <td><strong>Learning Curve</strong></td>
                                <td>Familiar HTTP semantics</td>
                                <td>New query language, tooling</td>
                            </tr>
                            <tr>
                                <td><strong>Documentation</strong></td>
                                <td>OpenAPI/Swagger</td>
                                <td>Self-documenting schema</td>
                            </tr>
                            <tr>
                                <td><strong>Best For</strong></td>
                                <td>Simple CRUD, public APIs, caching-heavy</td>
                                <td>Complex data relationships, mobile apps</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Choosing Between Them:</strong> Use REST for simple, resource-based APIs with good caching needs. Use GraphQL when clients have diverse data needs or you're building mobile apps where bandwidth matters.
                    </div>
                </div>

                <div id="best-practices" class="blog-content mt-5">
                    <h2><i class="fas fa-check-circle me-2 text-teal"></i>Best Practices</h2>

                    <h4>1. Versioning</h4>
<pre><code class="language-python"># URL Path Versioning (most common)
GET /api/v1/users
GET /api/v2/users

# Header Versioning
GET /api/users
Accept: application/vnd.myapi.v2+json

# Query Parameter Versioning
GET /api/users?version=2</code></pre>

                    <h4>2. Error Handling</h4>
<pre><code class="language-python"># Consistent error format
from flask import Flask, jsonify

app = Flask(__name__)

class APIError(Exception):
    def __init__(self, code, message, details=None, status_code=400):
        self.code = code
        self.message = message
        self.details = details or []
        self.status_code = status_code

@app.errorhandler(APIError)
def handle_api_error(error):
    return jsonify({
        "error": {
            "code": error.code,
            "message": error.message,
            "details": error.details
        }
    }), error.status_code

# Usage
raise APIError(
    code="VALIDATION_ERROR",
    message="Invalid input data",
    details=[{"field": "email", "message": "Invalid format"}],
    status_code=422
)</code></pre>

                    <h4>3. Request Validation</h4>
<pre><code class="language-python"># Using Pydantic for validation
from pydantic import BaseModel, EmailStr, validator
from typing import Optional

class CreateUserRequest(BaseModel):
    name: str
    email: EmailStr
    age: Optional[int] = None
    
    @validator('name')
    def name_must_not_be_empty(cls, v):
        if not v.strip():
            raise ValueError('Name cannot be empty')
        return v.strip()
    
    @validator('age')
    def age_must_be_positive(cls, v):
        if v is not None and v < 0:
            raise ValueError('Age must be positive')
        return v

# Automatically validates and returns 422 on error</code></pre>

                    <h4>4. Filtering, Sorting, and Field Selection</h4>
<pre><code class="language-python"># Flexible querying
GET /api/v1/products?
    category=electronics&
    price_min=100&
    price_max=500&
    sort=-created_at,name&    # Descending created_at, then name
    fields=id,name,price      # Only return these fields

# Implementation
def get_products(request):
    query = Product.query
    
    # Filtering
    if category := request.args.get('category'):
        query = query.filter(Product.category == category)
    if price_min := request.args.get('price_min'):
        query = query.filter(Product.price >= float(price_min))
    
    # Sorting
    sort_fields = request.args.get('sort', 'id').split(',')
    for field in sort_fields:
        if field.startswith('-'):
            query = query.order_by(desc(getattr(Product, field[1:])))
        else:
            query = query.order_by(getattr(Product, field))
    
    # Field selection
    fields = request.args.get('fields', '').split(',')
    
    return query.all()</code></pre>
                </div>

                <div id="authentication" class="blog-content mt-5">
                    <h3>Authentication</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-key me-2"></i>JWT (JSON Web Token)</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># JWT Authentication Flow
import jwt
from datetime import datetime, timedelta

SECRET_KEY = "your-secret-key"

def create_token(user_id):
    payload = {
        "sub": user_id,
        "iat": datetime.utcnow(),
        "exp": datetime.utcnow() + timedelta(hours=24)
    }
    return jwt.encode(payload, SECRET_KEY, algorithm="HS256")

def verify_token(token):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=["HS256"])
        return payload["sub"]
    except jwt.ExpiredSignatureError:
        raise APIError("TOKEN_EXPIRED", "Token has expired", status_code=401)
    except jwt.InvalidTokenError:
        raise APIError("INVALID_TOKEN", "Invalid token", status_code=401)

# Usage in requests
# Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Stateless</span>
                            <span class="bias-tag">Scalable</span>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-shield-alt me-2"></i>OAuth 2.0 / OpenID Connect</h4>
                        <div class="experiment-content">
                            <p>For third-party authentication and authorization:</p>
<pre><code class="language-python"># OAuth 2.0 Authorization Code Flow
# 1. Redirect user to authorization server
GET https://auth.example.com/authorize?
    response_type=code&
    client_id=YOUR_CLIENT_ID&
    redirect_uri=https://yourapp.com/callback&
    scope=openid profile email&
    state=random_state

# 2. User authenticates and grants permission

# 3. Receive authorization code at callback
GET https://yourapp.com/callback?code=AUTH_CODE&state=random_state

# 4. Exchange code for tokens
POST https://auth.example.com/token
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&
code=AUTH_CODE&
redirect_uri=https://yourapp.com/callback&
client_id=YOUR_CLIENT_ID&
client_secret=YOUR_CLIENT_SECRET

# 5. Receive access token and ID token
{
    "access_token": "eyJ...",
    "token_type": "Bearer",
    "expires_in": 3600,
    "refresh_token": "dGhpc...",
    "id_token": "eyJ..."
}</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-fingerprint me-2"></i>API Keys</h4>
                        <div class="experiment-content">
                            <p>For server-to-server authentication:</p>
<pre><code class="language-python"># API Key Authentication
# Header approach (recommended)
X-API-Key: your-api-key-here

# Implementation
from functools import wraps
from flask import request

def require_api_key(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        api_key = request.headers.get('X-API-Key')
        
        if not api_key:
            raise APIError("MISSING_API_KEY", "API key required", status_code=401)
        
        # Validate key (check database, cache)
        client = validate_api_key(api_key)
        if not client:
            raise APIError("INVALID_API_KEY", "Invalid API key", status_code=401)
        
        # Attach client info for rate limiting, logging
        request.client = client
        return f(*args, **kwargs)
    
    return decorated</code></pre>
                        </div>
                    </div>
                </div>

                <div id="networking" class="blog-content mt-5">
                    <h2><i class="fas fa-network-wired me-2 text-teal"></i>Networking & Communication Protocols</h2>
                    
                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> Understanding the underlying networking protocols is crucial for designing efficient APIs. HTTP sits on top of TCP/IP, and knowing when to use alternatives like WebSockets or gRPC can significantly improve system performance.
                    </div>
                    
                    <h3>HTTP/2 vs HTTP/1.1</h3>
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Feature</th>
                                <th>HTTP/1.1</th>
                                <th>HTTP/2</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Multiplexing</strong></td>
                                <td>Sequential requests (head-of-line blocking)</td>
                                <td>Multiple streams over single connection</td>
                            </tr>
                            <tr>
                                <td><strong>Header Compression</strong></td>
                                <td>None (repeated headers)</td>
                                <td>HPACK compression</td>
                            </tr>
                            <tr>
                                <td><strong>Server Push</strong></td>
                                <td>No</td>
                                <td>Yes (proactively send resources)</td>
                            </tr>
                            <tr>
                                <td><strong>Binary Protocol</strong></td>
                                <td>Text-based</td>
                                <td>Binary framing</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="websockets" class="blog-content mt-5">
                    <h3>WebSockets & Real-Time Communication</h3>
                    <p><strong>WebSockets</strong> provide full-duplex communication channels over a single TCP connection, ideal for real-time applications.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-plug me-2"></i>WebSocket Implementation</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Server-side (Python with websockets library)
import asyncio
import websockets
import json

connected_clients = set()

async def handler(websocket, path):
    # Register client
    connected_clients.add(websocket)
    
    try:
        async for message in websocket:
            data = json.loads(message)
            
            if data["type"] == "chat_message":
                # Broadcast to all connected clients
                await broadcast({
                    "type": "new_message",
                    "user": data["user"],
                    "message": data["message"],
                    "timestamp": datetime.utcnow().isoformat()
                })
                
    finally:
        connected_clients.remove(websocket)

async def broadcast(message):
    if connected_clients:
        await asyncio.gather(
            *[client.send(json.dumps(message)) for client in connected_clients]
        )

# Start server
asyncio.run(websockets.serve(handler, "localhost", 8765))</code></pre>

<pre><code class="language-javascript">// Client-side (JavaScript)
const socket = new WebSocket('wss://example.com/ws');

socket.onopen = () => {
    console.log('Connected');
    socket.send(JSON.stringify({
        type: 'chat_message',
        user: 'John',
        message: 'Hello!'
    }));
};

socket.onmessage = (event) => {
    const data = JSON.parse(event.data);
    console.log('Received:', data);
};

socket.onclose = () => console.log('Disconnected');
socket.onerror = (error) => console.error('Error:', error);</code></pre>
                        </div>
                        <div class="experiment-tags">
                            <span class="bias-tag">Real-Time</span>
                            <span class="bias-tag">Bidirectional</span>
                        </div>
                    </div>

                    <h4>When to Use WebSockets</h4>
                    <ul>
                        <li>✅ Chat applications</li>
                        <li>✅ Live notifications</li>
                        <li>✅ Real-time dashboards</li>
                        <li>✅ Multiplayer games</li>
                        <li>✅ Collaborative editing</li>
                        <li>❌ Simple request-response (use REST)</li>
                        <li>❌ Occasional updates (use polling or SSE)</li>
                    </ul>
                </div>

                <div id="grpc" class="blog-content mt-5">
                    <h3>gRPC & Protocol Buffers</h3>
                    <p><strong>gRPC</strong> is a high-performance RPC framework using Protocol Buffers for serialization. It's ideal for microservices communication.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-file-code me-2"></i>Protocol Buffer Definition</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># user.proto - Define service and messages
syntax = "proto3";

package user;

service UserService {
    // Unary RPC
    rpc GetUser(GetUserRequest) returns (User);
    
    // Server streaming
    rpc ListUsers(ListUsersRequest) returns (stream User);
    
    // Client streaming
    rpc CreateUsers(stream CreateUserRequest) returns (CreateUsersResponse);
    
    // Bidirectional streaming
    rpc Chat(stream ChatMessage) returns (stream ChatMessage);
}

message User {
    string id = 1;
    string name = 2;
    string email = 3;
    int32 age = 4;
}

message GetUserRequest {
    string id = 1;
}

message ListUsersRequest {
    int32 page_size = 1;
    string page_token = 2;
}</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-server me-2"></i>gRPC Server Implementation</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Python gRPC Server
import grpc
from concurrent import futures
import user_pb2
import user_pb2_grpc

class UserService(user_pb2_grpc.UserServiceServicer):
    def GetUser(self, request, context):
        # Fetch user from database
        user = db.get_user(request.id)
        
        if not user:
            context.set_code(grpc.StatusCode.NOT_FOUND)
            context.set_details(f"User {request.id} not found")
            return user_pb2.User()
        
        return user_pb2.User(
            id=user.id,
            name=user.name,
            email=user.email,
            age=user.age
        )
    
    def ListUsers(self, request, context):
        # Server streaming - yield multiple responses
        users = db.list_users(page_size=request.page_size)
        for user in users:
            yield user_pb2.User(
                id=user.id,
                name=user.name,
                email=user.email
            )

# Start server
server = grpc.server(futures.ThreadPoolExecutor(max_workers=10))
user_pb2_grpc.add_UserServiceServicer_to_server(UserService(), server)
server.add_insecure_port('[::]:50051')
server.start()
server.wait_for_termination()</code></pre>
                        </div>
                    </div>

                    <h4>gRPC vs REST</h4>
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Aspect</th>
                                <th>REST</th>
                                <th>gRPC</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Protocol</strong></td>
                                <td>HTTP/1.1 (usually)</td>
                                <td>HTTP/2</td>
                            </tr>
                            <tr>
                                <td><strong>Data Format</strong></td>
                                <td>JSON (text)</td>
                                <td>Protocol Buffers (binary)</td>
                            </tr>
                            <tr>
                                <td><strong>Performance</strong></td>
                                <td>Good</td>
                                <td>Excellent (10x faster serialization)</td>
                            </tr>
                            <tr>
                                <td><strong>Streaming</strong></td>
                                <td>Limited</td>
                                <td>Built-in (all 4 types)</td>
                            </tr>
                            <tr>
                                <td><strong>Browser Support</strong></td>
                                <td>Native</td>
                                <td>Requires grpc-web proxy</td>
                            </tr>
                            <tr>
                                <td><strong>Best For</strong></td>
                                <td>Public APIs, web clients</td>
                                <td>Internal microservices, mobile apps</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight-box" style="background: rgba(191, 9, 47, 0.1); border-left-color: var(--color-crimson);">
                        <i class="fas fa-chart-line"></i>
                        <strong>Performance Comparison:</strong> In benchmarks, gRPC is typically 7-10x faster than REST+JSON for serialization/deserialization, and 2-3x faster in end-to-end latency due to HTTP/2 multiplexing.
                    </div>
                </div>

                <div id="next-steps" class="blog-content mt-5">
                    <h2><i class="fas fa-arrow-right me-2 text-teal"></i>Next Steps</h2>
                    
                    <div class="related-posts">
                        <h3><i class="fas fa-book-reader me-2"></i>Continue the Series</h3>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 5: Microservices Architecture</h5>
                            <p class="text-muted small mb-2">Review microservices patterns and service mesh architectures.</p>
                            <a href="system-design-microservices-architecture.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 7: Message Queues & Event-Driven</h5>
                            <p class="text-muted small mb-2">Master asynchronous communication with message queues and event-driven architecture.</p>
                            <a href="system-design-message-queues-event-driven.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 8: CAP Theorem & Consistency</h5>
                            <p class="text-muted small mb-2">Understand distributed systems trade-offs with CAP theorem and consistency models.</p>
                            <a href="system-design-cap-theorem-consistency.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </section>

    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">
                        I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.
                    </p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://in.pinterest.com/wasilz/" target="_blank" class="social-icon" title="Pinterest">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <hr class="bg-secondary">

            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small">
                        <i class="fas fa-icons me-2"></i>Icons from <a href="https://www.flaticon.com/" target="_blank" class="text-light">Flaticon</a> &amp; <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a>
                    </p>
                    <p class="small mt-3">
                        <a href="/" class="text-light text-decoration-none">Home</a> | 
                        <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | 
                        <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">
                        Enjoying this content? ☕ <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Keep me caffeinated</a> to keep the pixels flowing!
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <button id="scrollToTop" class="scroll-to-top"><i class="fas fa-arrow-up"></i></button>
    <!-- Category Indicator -->
    <div id="categoryIndicator" class="category-indicator" title="Current Section">
        <i class="fas fa-tag"></i><span id="categoryText">Technology</span>
    </div>
    <script src="../../../js/cookie-consent.js"></script>
    <script src="../../../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-graphql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToTopBtn = document.getElementById('scrollToTop');
            window.addEventListener('scroll', function() { scrollToTopBtn.classList.toggle('show', window.scrollY > 300); });
            scrollToTopBtn.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); });
        });
        function openNav() { document.getElementById('tocSidenav').classList.add('open'); document.getElementById('tocOverlay').classList.add('show'); document.body.style.overflow = 'hidden'; }
        function closeNav() { document.getElementById('tocSidenav').classList.remove('open'); document.getElementById('tocOverlay').classList.remove('show'); document.body.style.overflow = 'auto'; }
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeNav(); });
        const themes = { 'prism-theme': 'Tomorrow Night', 'prism-default': 'Default', 'prism-dark': 'Dark', 'prism-twilight': 'Twilight', 'prism-okaidia': 'Okaidia', 'prism-solarizedlight': 'Solarized Light' };
        const savedTheme = localStorage.getItem('prism-theme') || 'prism-theme';
        function switchTheme(themeId) { Object.keys(themes).forEach(id => { const link = document.getElementById(id); if (link) link.disabled = true; }); const selectedLink = document.getElementById(themeId); if (selectedLink) { selectedLink.disabled = false; localStorage.setItem('prism-theme', themeId); } setTimeout(() => Prism.highlightAll(), 10); }
        document.addEventListener('DOMContentLoaded', function() { switchTheme(savedTheme); });
        Prism.plugins.toolbar.registerButton('theme-switcher', function() { const select = document.createElement('select'); Object.keys(themes).forEach(id => { const opt = document.createElement('option'); opt.value = id; opt.textContent = themes[id]; if (id === savedTheme) opt.selected = true; select.appendChild(opt); }); select.addEventListener('change', e => switchTheme(e.target.value)); return select; });
    </script>

            </body>
</html>
