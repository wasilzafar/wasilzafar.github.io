<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, archive" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Apply system design principles to real-world case studies. Design URL shorteners, chat systems, social media feeds, video streaming platforms, and more." />
    <meta name="author" content="Wasil Zafar" />
    <meta name="keywords" content="System Design, Case Studies, URL Shortener, Twitter Design, Netflix Architecture, Uber Design, Real-World Systems, Architecture" />
    <meta property="og:title" content="System Design Series Part 11: Real-World Case Studies" />
    <meta property="og:description" content="Apply system design principles to real-world case studies like Netflix, Uber, Twitter, and more." />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2026-01-25" />
    <meta property="article:author" content="Wasil Zafar" />
    <meta property="article:section" content="Technology" />
    
    <title>System Design Series Part 11: Real-World Case Studies - Wasil Zafar</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', { 'ad_storage': 'denied', 'ad_user_data': 'denied', 'ad_personalization': 'denied', 'analytics_storage': 'denied', 'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE'] });
        gtag('consent', 'default', { 'ad_storage': 'granted', 'ad_user_data': 'granted', 'ad_personalization': 'granted', 'analytics_storage': 'granted' });
        gtag('set', 'url_passthrough', true);
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PBS8M2JR');</script>

    </head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div class="content-wrap">
            <div class="msg-wrap"><p style="font-size: 14px; color: var(--color-navy);">We use cookies. See our <a href="/privacy-policy.html" style="color: var(--color-teal);">Privacy Policy</a>.</p></div>
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal);">Reject All</button>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/"><span class="gradient-text">Wasil Zafar</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#certifications">Certifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#interests">Interests</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="blog-hero">
        <div class="container py-5">
            <div class="blog-header">
                <a href="/pages/categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
                <h1 class="display-4 fw-bold mb-3">System Design Series Part 11: Real-World Case Studies</h1>
                <div class="blog-meta">
                    <span><i class="fas fa-calendar me-2"></i>January 25, 2026</span>
                    <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                    <span class="reading-time"><i class="fas fa-clock me-1"></i>45 min read</span>
                    <button onclick="window.print()" class="print-btn"><i class="fas fa-print"></i> Print</button>
                </div>
                <p class="lead">Apply system design principles to real-world case studies. Design URL shorteners, chat systems, social media feeds, video streaming platforms, and learn from production architectures.</p>
            </div>
        </div>
    </section>

    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents"><i class="fas fa-list"></i></button>

    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header">
            <h3><i class="fas fa-list me-2"></i>Table of Contents</h3>
            <button class="closebtn" onclick="closeNav()">&times;</button>
        </div>
        <ol>
            <li><a href="#url-shortener" onclick="closeNav()">URL Shortener</a>
                <ul>
                    <li><a href="#url-shortener" onclick="closeNav()">Requirements</a></li>
                    <li><a href="#url-architecture" onclick="closeNav()">Architecture</a></li>
                </ul>
            </li>
            <li><a href="#chat-system" onclick="closeNav()">Chat System</a>
                <ul>
                    <li><a href="#chat-system" onclick="closeNav()">Requirements</a></li>
                    <li><a href="#chat-architecture" onclick="closeNav()">Architecture</a></li>
                </ul>
            </li>
            <li><a href="#social-feed" onclick="closeNav()">Social Media Feed</a>
                <ul>
                    <li><a href="#social-feed" onclick="closeNav()">Requirements</a></li>
                    <li><a href="#feed-architecture" onclick="closeNav()">Architecture</a></li>
                </ul>
            </li>
            <li><a href="#video-streaming" onclick="closeNav()">Video Streaming</a>
                <ul>
                    <li><a href="#video-streaming" onclick="closeNav()">Requirements</a></li>
                    <li><a href="#streaming-architecture" onclick="closeNav()">Architecture</a></li>
                </ul>
            </li>
            <li><a href="#ride-sharing" onclick="closeNav()">Ride-Sharing</a></li>
            <li><a href="#ecommerce" onclick="closeNav()">E-commerce Platform</a>
                <ul>
                    <li><a href="#ecommerce" onclick="closeNav()">Requirements</a></li>
                    <li><a href="#ecommerce-architecture" onclick="closeNav()">Architecture</a></li>
                </ul>
            </li>
            <li><a href="#search-engine" onclick="closeNav()">Search Engine</a>
                <ul>
                    <li><a href="#search-engine" onclick="closeNav()">Requirements</a></li>
                    <li><a href="#search-architecture" onclick="closeNav()">Architecture</a></li>
                </ul>
            </li>
            <li><a href="#summary" onclick="closeNav()">Series Summary</a></li>
        </ol>
    </div>

    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">

                <div id="url-shortener" class="blog-content">
                    <h2><i class="fas fa-link me-2 text-teal"></i>URL Shortener (like bit.ly)</h2>
                    
                    <div class="highlight-box crimson">
                        <i class="fas fa-book me-2"></i>
                        <strong>Series Navigation:</strong> This is Part 11 of the 15-part System Design Series. <a href="system-design-monitoring-observability.html">Review Part 10: Monitoring & Observability</a> first.
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">15-Part Series</span>
                            <span class="badge bg-crimson">System Design Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="system-design-introduction.html">Introduction to System Design</a> - Fundamentals, why it matters, key concepts</li>
                                <li><a href="system-design-scalability-fundamentals.html">Scalability Fundamentals</a> - Horizontal vs vertical scaling, stateless design</li>
                                <li><a href="system-design-load-balancing-caching.html">Load Balancing & Caching</a> - Algorithms, Redis, CDN patterns</li>
                                <li><a href="system-design-database-sharding.html">Database Design & Sharding</a> - SQL vs NoSQL, replication, partitioning</li>
                                <li><a href="system-design-microservices-architecture.html">Microservices Architecture</a> - Service decomposition, API gateways, sagas</li>
                                <li><a href="system-design-api-rest-graphql.html">API Design & REST/GraphQL</a> - RESTful principles, GraphQL, gRPC</li>
                                <li><a href="system-design-message-queues-event-driven.html">Message Queues & Event-Driven</a> - Kafka, RabbitMQ, event sourcing</li>
                                <li><a href="system-design-cap-theorem-consistency.html">CAP Theorem & Consistency</a> - Distributed trade-offs, eventual consistency</li>
                                <li><a href="system-design-rate-limiting-security.html">Rate Limiting & Security</a> - Throttling algorithms, DDoS protection</li>
                                <li><a href="system-design-monitoring-observability.html">Monitoring & Observability</a> - Logging, metrics, distributed tracing</li>
                                <li><strong>Real-World Case Studies (This Guide)</strong> - URL shortener, chat, feed, video streaming</li>
                                <li><a href="system-design-low-level-design-patterns.html">Low-Level Design Patterns</a> - SOLID, OOP patterns, data modeling</li>
                                <li><a href="system-design-distributed-systems-deep-dive.html">Distributed Systems Deep Dive</a> - Consensus, Paxos, Raft, coordination</li>
                                <li><a href="system-design-authentication-security.html">Authentication & Security</a> - OAuth, JWT, zero trust, compliance</li>
                                <li><a href="system-design-interview-preparation.html">Interview Preparation</a> - 4-step framework, estimation, strategies</li>
                            </ol>
                        </div>
                    </div>
                    
                    <p>A <strong>URL shortener</strong> is a classic system design interview question. It tests your understanding of hashing, databases, caching, and handling high read/write ratios.</p>

                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> URL shorteners have a high read-to-write ratio (100:1 or more). Design for read-heavy workloads with aggressive caching.
                    </div>

                    <h4>Functional Requirements</h4>
                    <ul>
                        <li>Given a long URL, return a short URL</li>
                        <li>Given a short URL, redirect to original URL</li>
                        <li>Custom short URLs (optional)</li>
                        <li>Analytics: click counts, geographic data</li>
                        <li>URL expiration (optional)</li>
                    </ul>

                    <h4>Scale Estimation</h4>
<pre><code class="language-python"># Back-of-envelope estimation
# Assumptions:
# - 100M new URLs per month
# - 100:1 read/write ratio (10B redirects/month)

# Writes: 100M / (30 * 24 * 3600) ≈ 40 URLs/second
# Reads: 40 * 100 = 4000 redirects/second (peak: 40,000)

# Storage (5 years):
# - 100M * 12 * 5 = 6B URLs
# - Each URL: ~500 bytes (original URL + metadata)
# - Total: 6B * 500 = 3TB

# Short URL length:
# - Base62 (a-z, A-Z, 0-9) = 62 characters
# - 6 characters: 62^6 = 56.8B combinations (enough for 6B URLs)
# - 7 characters: 62^7 = 3.5T combinations (future-proof)</code></pre>
                </div>

                <div id="url-architecture" class="blog-content mt-5">
                    <h3>URL Shortener Architecture</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-key me-2"></i>Short URL Generation</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Approach 1: Base62 Encoding of Counter
import string

class Base62Encoder:
    CHARS = string.ascii_letters + string.digits  # 62 chars
    
    def encode(self, num):
        if num == 0:
            return self.CHARS[0]
        
        result = []
        while num:
            result.append(self.CHARS[num % 62])
            num //= 62
        return ''.join(reversed(result))
    
    def decode(self, short_code):
        num = 0
        for char in short_code:
            num = num * 62 + self.CHARS.index(char)
        return num

# Use distributed counter service for unique IDs
class URLShortener:
    def __init__(self, counter_service, db, cache):
        self.counter = counter_service
        self.encoder = Base62Encoder()
        self.db = db
        self.cache = cache
    
    def create_short_url(self, long_url, user_id=None):
        # Get unique ID from counter service
        unique_id = self.counter.get_next()
        short_code = self.encoder.encode(unique_id)
        
        # Store mapping
        self.db.insert({
            'short_code': short_code,
            'long_url': long_url,
            'user_id': user_id,
            'created_at': datetime.now(),
            'click_count': 0
        })
        
        # Pre-warm cache for popular URLs
        self.cache.set(short_code, long_url, ttl=86400)
        
        return f"https://short.url/{short_code}"
    
    def redirect(self, short_code):
        # Check cache first (fast path)
        long_url = self.cache.get(short_code)
        if long_url:
            self.increment_clicks_async(short_code)
            return long_url
        
        # Cache miss - query database
        result = self.db.find_one({'short_code': short_code})
        if not result:
            raise NotFoundError()
        
        # Update cache
        self.cache.set(short_code, result['long_url'], ttl=86400)
        self.increment_clicks_async(short_code)
        
        return result['long_url']</code></pre>
                        </div>
                    </div>

                    <h4>System Architecture</h4>
<pre><code class="language-python"># High-Level Architecture
"""
                    +------------------+
                    |   Load Balancer  |
                    +--------+---------+
                             |
              +--------------+---------------+
              |              |               |
        +-----v-----+  +-----v-----+  +-----v-----+
        | API Server|  | API Server|  | API Server|
        +-----+-----+  +-----+-----+  +-----+-----+
              |              |               |
              +--------------+---------------+
                             |
              +--------------+---------------+
              |              |               |
        +-----v-----+  +-----v-----+  +-----v-----+
        |   Redis   |  |   Redis   |  |   Redis   | (Cache Cluster)
        +-----+-----+  +-----+-----+  +-----+-----+
              |              |               |
              +--------------+---------------+
                             |
              +--------------+---------------+
              |              |               |
        +-----v-----+  +-----v-----+  +-----v-----+
        |  DB Shard |  |  DB Shard |  |  DB Shard | (Sharded by short_code)
        +-----------+  +-----------+  +-----------+
"""</code></pre>
                </div>

                <div id="chat-system" class="blog-content mt-5">
                    <h2><i class="fas fa-comments me-2 text-teal"></i>Chat System (like WhatsApp)</h2>
                    
                    <h4>Functional Requirements</h4>
                    <ul>
                        <li>1:1 messaging with delivery receipts</li>
                        <li>Group chats (up to 500 members)</li>
                        <li>Online/offline status</li>
                        <li>Message history and sync across devices</li>
                        <li>Media sharing (images, videos, files)</li>
                    </ul>

                    <h4>Scale Estimation</h4>
<pre><code class="language-python"># WhatsApp-scale estimation
# 2B users, 100B messages/day

# Messages per second: 100B / 86400 ≈ 1.15M messages/sec
# Peak: 3-5M messages/sec

# Storage per day:
# - Average message: 100 bytes
# - 100B * 100 bytes = 10TB/day
# - 7 days retention = 70TB active storage

# Connections:
# - 500M concurrent users
# - Each user maintains WebSocket connection
# - Need 500K+ servers for connections</code></pre>
                </div>

                <div id="chat-architecture" class="blog-content mt-5">
                    <h3>Chat Architecture</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-server me-2"></i>Real-time Messaging</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># WebSocket-based Chat Server
import asyncio
import websockets
import json
import redis

class ChatServer:
    def __init__(self):
        self.connections = {}  # user_id -> websocket
        self.redis = redis.Redis()
        self.pubsub = self.redis.pubsub()
    
    async def handle_connection(self, websocket, path):
        user_id = await self.authenticate(websocket)
        self.connections[user_id] = websocket
        
        # Subscribe to user's channel
        await self.subscribe_to_messages(user_id)
        
        try:
            async for message in websocket:
                await self.handle_message(user_id, json.loads(message))
        finally:
            del self.connections[user_id]
    
    async def handle_message(self, sender_id, message):
        msg_type = message['type']
        
        if msg_type == 'send':
            await self.send_message(
                sender_id,
                message['recipient_id'],
                message['content']
            )
        elif msg_type == 'ack':
            await self.acknowledge_message(message['message_id'])
    
    async def send_message(self, sender_id, recipient_id, content):
        # Generate message ID
        msg_id = generate_uuid()
        
        # Store message
        msg = {
            'id': msg_id,
            'sender': sender_id,
            'recipient': recipient_id,
            'content': content,
            'timestamp': time.time(),
            'status': 'sent'
        }
        
        # Persist to database
        await self.db.messages.insert_one(msg)
        
        # Try to deliver in real-time
        if recipient_id in self.connections:
            # Same server - deliver directly
            await self.connections[recipient_id].send(json.dumps(msg))
        else:
            # Different server - publish to Redis
            self.redis.publish(f"user:{recipient_id}", json.dumps(msg))
        
        # Send delivery receipt to sender
        await self.connections[sender_id].send(json.dumps({
            'type': 'sent',
            'message_id': msg_id
        }))</code></pre>
                        </div>
                    </div>

                    <h4>Message Delivery Flow</h4>
<pre><code class="language-python"># Message States: sent → delivered → read

"""
Sender                Server              Recipient
  |                     |                     |
  |--- Send Message --->|                     |
  |                     |-- Store in DB       |
  |<-- Sent Receipt ----|                     |
  |                     |--- Push Message --->|
  |                     |<-- Delivered Ack ---|
  |<-- Delivered Receipt|                     |
  |                     |                     |
  |                     |<---- Read Ack ------|
  |<-- Read Receipt ----|                     |
"""</code></pre>
                </div>

                <div id="social-feed" class="blog-content mt-5">
                    <h2><i class="fas fa-rss me-2 text-teal"></i>Social Media Feed (like Twitter)</h2>
                    
                    <h4>Functional Requirements</h4>
                    <ul>
                        <li>Post tweets (280 chars, images, videos)</li>
                        <li>Follow/unfollow users</li>
                        <li>Home timeline (posts from followed users)</li>
                        <li>User timeline (user's own posts)</li>
                        <li>Like, retweet, reply</li>
                        <li>Notifications</li>
                    </ul>

                    <h4>The Fan-out Problem</h4>
<pre><code class="language-python"># Two approaches for generating timelines:

# 1. Fan-out on Write (Push Model)
# When user posts, push to all followers' timelines
# Pros: Fast reads (timeline pre-computed)
# Cons: Slow writes for users with millions of followers

# 2. Fan-out on Read (Pull Model)
# When user views timeline, fetch from followed users
# Pros: Fast writes, no wasted work
# Cons: Slow reads (must query many users)

# Hybrid Approach (Twitter's solution):
# - Regular users: Fan-out on write
# - Celebrities (>10K followers): Fan-out on read
# - Merge results at read time</code></pre>
                </div>

                <div id="feed-architecture" class="blog-content mt-5">
                    <h3>Feed Architecture</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-stream me-2"></i>Timeline Generation</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Hybrid Fan-out Implementation
class TimelineService:
    def __init__(self, redis, db, celebrity_threshold=10000):
        self.redis = redis
        self.db = db
        self.celebrity_threshold = celebrity_threshold
    
    def post_tweet(self, user_id, content):
        tweet = {
            'id': generate_id(),
            'user_id': user_id,
            'content': content,
            'timestamp': time.time()
        }
        
        # Store tweet
        self.db.tweets.insert_one(tweet)
        
        # Check if user is celebrity
        follower_count = self.get_follower_count(user_id)
        
        if follower_count < self.celebrity_threshold:
            # Fan-out on write for regular users
            self.fan_out_tweet(user_id, tweet)
        else:
            # Celebrities: tweet stays in their timeline only
            # Followers will pull on read
            pass
        
        return tweet
    
    def fan_out_tweet(self, user_id, tweet):
        """Push tweet to all followers' timelines"""
        followers = self.get_followers(user_id)
        
        # Use Redis pipeline for efficiency
        pipe = self.redis.pipeline()
        for follower_id in followers:
            # Add to follower's timeline (sorted set by timestamp)
            pipe.zadd(
                f"timeline:{follower_id}",
                {tweet['id']: tweet['timestamp']}
            )
            # Trim to keep only recent tweets
            pipe.zremrangebyrank(f"timeline:{follower_id}", 0, -801)
        pipe.execute()
    
    def get_timeline(self, user_id, count=50):
        # Get pre-computed timeline
        tweet_ids = self.redis.zrevrange(
            f"timeline:{user_id}", 0, count - 1
        )
        
        # Get celebrity tweets (fan-out on read)
        celebrity_tweets = self.get_celebrity_tweets(user_id)
        
        # Merge and sort
        all_ids = list(tweet_ids) + [t['id'] for t in celebrity_tweets]
        
        # Fetch full tweet data
        tweets = self.db.tweets.find({'id': {'$in': all_ids}})
        
        return sorted(tweets, key=lambda t: t['timestamp'], reverse=True)[:count]</code></pre>
                        </div>
                    </div>
                </div>

                <div id="video-streaming" class="blog-content mt-5">
                    <h2><i class="fas fa-video me-2 text-teal"></i>Video Streaming (like Netflix)</h2>
                    
                    <h4>Key Challenges</h4>
                    <ul>
                        <li><strong>Content Delivery:</strong> Serve terabytes of video globally</li>
                        <li><strong>Adaptive Streaming:</strong> Adjust quality based on bandwidth</li>
                        <li><strong>Encoding:</strong> Multiple resolutions and codecs</li>
                        <li><strong>Recommendations:</strong> Personalized content suggestions</li>
                    </ul>
                </div>

                <div id="streaming-architecture" class="blog-content mt-5">
                    <h3>Streaming Architecture</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-film me-2"></i>Video Processing Pipeline</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Video Processing Pipeline
"""
Upload → Validation → Transcoding → Packaging → CDN Distribution

1. Upload: Original video to object storage
2. Validation: Format check, virus scan, content moderation
3. Transcoding: Multiple resolutions (4K, 1080p, 720p, 480p, 360p)
4. Packaging: HLS/DASH adaptive streaming formats
5. CDN: Distribute to edge locations worldwide
"""

# HLS Adaptive Streaming
# Master playlist points to variant playlists
"""
#EXTM3U
#EXT-X-STREAM-INF:BANDWIDTH=1280000,RESOLUTION=720x480
480p/playlist.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=2560000,RESOLUTION=1280x720
720p/playlist.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=7680000,RESOLUTION=1920x1080
1080p/playlist.m3u8
"""

# Client adaptively switches quality based on bandwidth
class AdaptivePlayer:
    def __init__(self, master_playlist_url):
        self.variants = self.parse_master_playlist(master_playlist_url)
        self.current_bandwidth = self.measure_bandwidth()
    
    def select_quality(self):
        # Choose highest quality that fits bandwidth
        for variant in sorted(self.variants, key=lambda v: -v['bandwidth']):
            if variant['bandwidth'] < self.current_bandwidth * 0.8:
                return variant
        return self.variants[-1]  # Lowest quality fallback</code></pre>
                        </div>
                    </div>
                </div>

                <div id="ride-sharing" class="blog-content mt-5">
                    <h2><i class="fas fa-car me-2 text-teal"></i>Ride-Sharing (like Uber)</h2>
                    
                    <h4>Key Challenges</h4>
                    <ul>
                        <li><strong>Real-time Location:</strong> Track millions of drivers continuously</li>
                        <li><strong>Matching:</strong> Connect riders with nearby drivers efficiently</li>
                        <li><strong>ETA Calculation:</strong> Real-time traffic and route optimization</li>
                        <li><strong>Surge Pricing:</strong> Dynamic pricing based on demand</li>
                    </ul>

                    <div class="experiment-card">
                        <h4><i class="fas fa-map-marker-alt me-2"></i>Location Service</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Geospatial Indexing for Driver Matching
import redis
from geopy.distance import geodesic

class LocationService:
    def __init__(self, redis_client):
        self.redis = redis_client
    
    def update_driver_location(self, driver_id, lat, lng):
        """Update driver position in geospatial index"""
        # Redis GEO commands use sorted sets
        self.redis.geoadd("drivers:active", (lng, lat, driver_id))
        
        # Store additional driver metadata
        self.redis.hset(f"driver:{driver_id}", mapping={
            "lat": lat,
            "lng": lng,
            "updated_at": time.time(),
            "status": "available"
        })
    
    def find_nearby_drivers(self, lat, lng, radius_km=5, limit=10):
        """Find available drivers within radius"""
        # Query drivers within radius
        nearby = self.redis.georadius(
            "drivers:active",
            lng, lat,
            radius_km, unit="km",
            withdist=True,
            sort="ASC",
            count=limit * 2  # Get extra for filtering
        )
        
        # Filter by availability
        available = []
        for driver_id, distance in nearby:
            status = self.redis.hget(f"driver:{driver_id}", "status")
            if status == "available":
                available.append({
                    "driver_id": driver_id,
                    "distance_km": distance
                })
                if len(available) >= limit:
                    break
        
        return available
    
    def match_ride(self, rider_lat, rider_lng, destination_lat, destination_lng):
        """Match rider with optimal driver"""
        nearby_drivers = self.find_nearby_drivers(rider_lat, rider_lng)
        
        if not nearby_drivers:
            return None  # No drivers available
        
        # Select closest available driver
        driver = nearby_drivers[0]
        
        # Mark driver as assigned
        self.redis.hset(f"driver:{driver['driver_id']}", "status", "assigned")
        
        return driver</code></pre>
                        </div>
                    </div>
                </div>

                <div id="ecommerce" class="blog-content mt-5">
                    <h2><i class="fas fa-shopping-cart me-2 text-teal"></i>E-commerce Platform (like Amazon)</h2>
                    
                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> E-commerce platforms must handle massive read traffic (browsing), complex inventory management, and maintain data consistency during high-volume sales events.
                    </div>
                    
                    <h4 class="mt-3">Functional Requirements</h4>
                    <ul>
                        <li>Product catalog with search and filtering</li>
                        <li>Shopping cart with real-time inventory checks</li>
                        <li>Order placement with payment processing</li>
                        <li>Order tracking and delivery status</li>
                        <li>User reviews and recommendations</li>
                    </ul>
                    
                    <h4 class="mt-3">Non-Functional Requirements</h4>
                    <ul>
                        <li><strong>Availability:</strong> 99.99% (minutes of downtime = millions in lost sales)</li>
                        <li><strong>Scale:</strong> Handle 10x traffic during flash sales</li>
                        <li><strong>Consistency:</strong> Inventory counts must be accurate (no overselling)</li>
                        <li><strong>Latency:</strong> Sub-200ms for search, 500ms for checkout</li>
                    </ul>
                </div>

                <div id="ecommerce-architecture" class="blog-content mt-5">
                    <h3>E-commerce Architecture</h3>
                    
                    <h4>Key Components</h4>
                    <ul>
                        <li><strong>Product Service:</strong> Catalog, search (Elasticsearch), CDN for images</li>
                        <li><strong>Cart Service:</strong> Redis for session, real-time inventory reservation</li>
                        <li><strong>Order Service:</strong> Saga pattern for distributed transactions</li>
                        <li><strong>Payment Service:</strong> Idempotent APIs, retry with exponential backoff</li>
                        <li><strong>Inventory Service:</strong> Eventual consistency with reservation system</li>
                        <li><strong>Recommendation Engine:</strong> Collaborative filtering, ML models</li>
                    </ul>
                    
                    <h4 class="mt-3">Handling Flash Sales</h4>
                    <ul>
                        <li><strong>Rate limiting:</strong> Queue requests, serve in batches</li>
                        <li><strong>Inventory reservation:</strong> Optimistic locking with TTL</li>
                        <li><strong>Circuit breakers:</strong> Prevent cascade failures</li>
                        <li><strong>Read replicas:</strong> Scale product catalog reads</li>
                    </ul>

                    <div class="experiment-card">
                        <h4><i class="fas fa-box me-2"></i>Inventory Reservation</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Flash Sale Inventory Reservation
class InventoryService:
    def __init__(self, redis, db):
        self.redis = redis
        self.db = db
    
    def reserve_stock(self, product_id, quantity, user_id, ttl=600):
        """Reserve stock with TTL (prevents cart abandonment lock-up)"""
        reservation_id = f"res:{user_id}:{product_id}:{uuid.uuid4()}"
        
        # Lua script for atomic decrement and reservation
        lua_script = """
        local stock = tonumber(redis.call('GET', KEYS[1]) or 0)
        local quantity = tonumber(ARGV[1])
        
        if stock >= quantity then
            redis.call('DECRBY', KEYS[1], quantity)
            redis.call('SETEX', KEYS[2], ARGV[2], ARGV[1])
            return 1
        else
            return 0
        end
        """
        
        result = self.redis.eval(
            lua_script,
            2,  # Number of keys
            f"stock:{product_id}",  # KEYS[1]
            reservation_id,          # KEYS[2]
            quantity,                # ARGV[1]
            ttl                      # ARGV[2]
        )
        
        if result == 1:
            return reservation_id
        else:
            raise InsufficientStockError()
    
    def confirm_reservation(self, reservation_id):
        """Convert reservation to permanent stock reduction"""
        quantity = self.redis.get(reservation_id)
        if quantity:
            self.redis.delete(reservation_id)
            # Persist to database
            self.db.execute(
                "UPDATE inventory SET stock = stock - %s WHERE product_id = %s",
                (quantity, self.extract_product_id(reservation_id))
            )
    
    def release_reservation(self, reservation_id):
        """Release reservation (cart abandoned or payment failed)"""
        quantity = self.redis.get(reservation_id)
        if quantity:
            product_id = self.extract_product_id(reservation_id)
            self.redis.incrby(f"stock:{product_id}", int(quantity))
            self.redis.delete(reservation_id)</code></pre>
                        </div>
                    </div>
                </div>

                <div id="search-engine" class="blog-content mt-5">
                    <h2><i class="fas fa-search me-2 text-teal"></i>Search Engine (like Google)</h2>
                    
                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> Web-scale search requires crawling billions of pages, building inverted indexes, and ranking results in milliseconds.
                    </div>
                    
                    <h4 class="mt-3">Functional Requirements</h4>
                    <ul>
                        <li>Crawl and index web pages continuously</li>
                        <li>Return relevant results for any query</li>
                        <li>Autocomplete and spell correction</li>
                        <li>Personalized results based on user history</li>
                        <li>Image, video, and news search</li>
                    </ul>
                    
                    <h4 class="mt-3">Scale Considerations</h4>
                    <ul>
                        <li><strong>Crawling:</strong> Billions of pages, politeness policies (robots.txt)</li>
                        <li><strong>Indexing:</strong> Petabytes of data, inverted indexes</li>
                        <li><strong>Query processing:</strong> Millions of QPS, sub-500ms latency</li>
                        <li><strong>Freshness:</strong> Breaking news indexed in minutes</li>
                    </ul>
                </div>

                <div id="search-architecture" class="blog-content mt-5">
                    <h3>Search Engine Architecture</h3>
                    
                    <h4>Core Components</h4>
                    <ul>
                        <li><strong>URL Frontier:</strong> Priority queue of URLs to crawl</li>
                        <li><strong>Web Crawler:</strong> Distributed crawlers with politeness policies</li>
                        <li><strong>Document Store:</strong> Raw HTML storage (distributed file system)</li>
                        <li><strong>Indexer:</strong> Build inverted index (word → document IDs)</li>
                        <li><strong>Index Server:</strong> Sharded index across thousands of machines</li>
                        <li><strong>Query Processor:</strong> Parse query, retrieve docs, rank results</li>
                        <li><strong>Ranker:</strong> PageRank + ML models for relevance scoring</li>
                    </ul>
                    
                    <h4 class="mt-3">Inverted Index Structure</h4>
<pre><code class="language-json">// Inverted Index Example
{
  "distributed": [
    {"doc_id": 1, "positions": [5, 42], "tf": 0.02},
    {"doc_id": 7, "positions": [12], "tf": 0.01}
  ],
  "systems": [
    {"doc_id": 1, "positions": [6, 43], "tf": 0.02},
    {"doc_id": 3, "positions": [1, 15, 89], "tf": 0.03}
  ]
}
</code></pre>
                    
                    <h4 class="mt-3">PageRank Algorithm</h4>
                    <p>PageRank scores pages based on incoming links. Pages linked by many high-quality pages rank higher.</p>
<pre><code class="language-python"># Simplified PageRank
def pagerank(graph, damping=0.85, iterations=100):
    """
    graph: dict of page -> list of outgoing links
    """
    n = len(graph)
    ranks = {page: 1/n for page in graph}
    
    for _ in range(iterations):
        new_ranks = {}
        for page in graph:
            rank_sum = sum(
                ranks[incoming] / len(graph[incoming])
                for incoming in graph
                if page in graph[incoming]
            )
            new_ranks[page] = (1 - damping) / n + damping * rank_sum
        ranks = new_ranks
    
    return ranks</code></pre>
                </div>

                <div id="summary" class="blog-content mt-5">
                    <h2><i class="fas fa-graduation-cap me-2 text-teal"></i>Series Summary</h2>
                    <p>You've completed the case studies! Continue to Part 12 to learn Low-Level Design (LLD) fundamentals including object-oriented design, SOLID principles, and design patterns.</p>
                    
                    <div class="related-posts">
                        <h3><i class="fas fa-book-reader me-2"></i>Continue the Series</h3>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 12: Low-Level Design (LLD) Fundamentals</h5>
                            <p class="text-muted small mb-2">Master object-oriented design, SOLID principles, and design patterns.</p>
                            <a href="system-design-low-level-design-patterns.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 1: Introduction to System Design</h5>
                            <p class="text-muted small mb-2">Start from the beginning with fundamental concepts.</p>
                            <a href="system-design-introduction.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 10: Monitoring & Observability</h5>
                            <p class="text-muted small mb-2">Review monitoring, logging, and distributed tracing.</p>
                            <a href="system-design-monitoring-observability.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </section>

    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">
                        I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.
                    </p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://in.pinterest.com/wasilz/" target="_blank" class="social-icon" title="Pinterest">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <hr class="bg-secondary">

            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small">
                        <i class="fas fa-icons me-2"></i>Icons from <a href="https://www.flaticon.com/" target="_blank" class="text-light">Flaticon</a> &amp; <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a>
                    </p>
                    <p class="small mt-3">
                        <a href="/" class="text-light text-decoration-none">Home</a> | 
                        <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | 
                        <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">
                        Enjoying this content? ☕ <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Keep me caffeinated</a> to keep the pixels flowing!
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <button id="scrollToTop" class="scroll-to-top"><i class="fas fa-arrow-up"></i></button>
    <!-- Category Indicator -->
    <div id="categoryIndicator" class="category-indicator" title="Current Section">
        <i class="fas fa-tag"></i><span id="categoryText">Technology</span>
    </div>
    <script src="../../../js/cookie-consent.js"></script>
    <script src="../../../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

            </body>
</html>
