<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, archive" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Master API testing and contracts - unit testing, integration testing, contract testing with Pact, Postman/Newman automation, Prism mocking, and test-driven API development." />
    <meta name="author" content="Wasil Zafar" />
    <meta name="keywords" content="API Testing, Contract Testing, Pact, Postman, Newman, Prism, Integration Testing, TDD" />
    <meta property="og:title" content="API Development Series Part 15: Testing & Contracts" />
    <meta property="og:description" content="Master API testing, contract testing, and automated test strategies." />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2026-01-31" />
    <meta property="article:author" content="Wasil Zafar" />
    <meta property="article:section" content="Technology" />
    
    <title>API Development Series Part 15: Testing & Contracts - Wasil Zafar</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />

    <!-- Prism.js Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <!-- Google Consent Mode v2 -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', {
            'ad_storage': 'denied', 'ad_user_data': 'denied', 'ad_personalization': 'denied', 'analytics_storage': 'denied',
            'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE']
        });
        gtag('consent', 'default', { 'ad_storage': 'granted', 'ad_user_data': 'granted', 'ad_personalization': 'granted', 'analytics_storage': 'granted' });
        gtag('set', 'url_passthrough', true);
    </script>

    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) { w[l] = w[l] || []; w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
            var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-PBS8M2JR');
    </script>
</head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <!-- GDPR Cookie Consent Banner -->
    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div id="closeIcon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path></svg></div>
        <div class="content-wrap">
            <div class="msg-wrap">
                <div class="title-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20"><path fill="#3B9797" d="M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 0 0-57.79 57.81l-35.1 68.88a132.645 132.645 0 0 0-12.82 80.95l12.08 76.27a132.521 132.521 0 0 0 37.16 70.37l54.64 54.64a132.036 132.036 0 0 0 70.37 37.16l76.27 12.15c27.51 4.36 55.7-.11 80.95-12.8l68.88-35.08a132.166 132.166 0 0 0 57.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"></path></svg>
                    <h4 style="margin: 0; font-size: 18px; color: var(--color-navy); font-weight: 700;">Cookie Consent</h4>
                </div>
                <p style="font-size: 14px; line-height: 1.6; color: var(--color-navy); margin-bottom: 15px;">We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. See our <a href="/privacy-policy.html" style="color: var(--color-teal); border-bottom: 1px dotted var(--color-teal);">Privacy Policy</a> for more information.</p>
                <div id="cookieSettings" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="14" height="14"><path fill="currentColor" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg><span style="margin-left: 5px; font-size: 12px; font-weight: 600; color: var(--color-navy);">Customize Settings</span></div>
                <div id="cookieTypes" style="display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(59, 151, 151, 0.2);">
                    <h5 style="font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 10px; text-transform: uppercase;">Cookie Preferences</h5>
                    <div style="margin-bottom: 12px;"><label style="display: flex; align-items: start; cursor: pointer;"><input type="checkbox" checked disabled style="margin-top: 2px; margin-right: 8px; cursor: not-allowed;"><div><strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Essential Cookies (Required)</strong><span style="font-size: 12px; color: #666;">Necessary for the website to function properly.</span></div></label></div>
                    <div style="margin-bottom: 12px;"><label style="display: flex; align-items: start; cursor: pointer;"><input type="checkbox" id="analyticsCookies" checked style="margin-top: 2px; margin-right: 8px;"><div><strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Analytics Cookies</strong><span style="font-size: 12px; color: #666;">Help us understand how you interact with the website.</span></div></label></div>
                    <div style="margin-bottom: 12px;"><label style="display: flex; align-items: start; cursor: pointer;"><input type="checkbox" id="marketingCookies" style="margin-top: 2px; margin-right: 8px;"><div><strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Marketing Cookies</strong><span style="font-size: 12px; color: #666;">Used to deliver relevant advertisements.</span></div></label></div>
                </div>
            </div>
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white; font-weight: 600;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal); font-weight: 600;">Reject All</button>
                <button id="cookieSave" style="background: var(--color-blue); color: white; font-weight: 600; display: none;">Save Preferences</button>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/"><span class="gradient-text">Wasil Zafar</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#certifications">Certifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#interests">Interests</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="blog-hero">
        <div class="container py-5">
            <div class="blog-header">
                <a href="../../categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
                <h1 class="display-4 fw-bold mb-3">API Development Series Part 15: Testing & Contracts</h1>
                <div class="blog-meta">
                    <span><i class="fas fa-calendar me-2"></i>January 31, 2026</span>
                    <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                    <span class="reading-time"><i class="fas fa-clock me-1"></i>45 min read</span>
                    <button onclick="window.print()" class="print-btn" title="Print this article"><i class="fas fa-print"></i> Print</button>
                </div>
                <p class="lead">Master API testing and contracts including unit testing, integration testing, contract testing with Pact, Postman/Newman automation, Prism mocking, and test-driven API development.</p>
            </div>
        </div>
    </section>

    <!-- Table of Contents Toggle Button -->
    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents" aria-label="Open Table of Contents"><i class="fas fa-list"></i></button>

    <!-- Side Navigation TOC -->
    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header"><h3><i class="fas fa-list me-2"></i>Table of Contents</h3><button class="closebtn" onclick="closeNav()" aria-label="Close Table of Contents">&times;</button></div>
        <ol>
            <li><a href="#testing-pyramid" onclick="closeNav()">API Testing Pyramid</a></li>
            <li><a href="#unit-testing" onclick="closeNav()">Unit Testing APIs</a></li>
            <li><a href="#integration" onclick="closeNav()">Integration Testing</a></li>
            <li><a href="#contract-testing" onclick="closeNav()">Contract Testing</a></li>
            <li><a href="#postman" onclick="closeNav()">Postman & Newman</a></li>
            <li><a href="#mocking" onclick="closeNav()">API Mocking</a></li>
        </ol>
    </div>
    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <!-- Main Content -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                <div class="blog-content">
                    
                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-rocket me-2"></i>
                        <strong>Series Navigation:</strong> This is Part 15 of the 17-part API Development Series. <a href="api-dev-graphql-grpc.html">Review Part 14: GraphQL & gRPC</a> first.
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">17-Part Series</span>
                            <span class="badge bg-crimson">API Development Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="api-dev-backend-fundamentals.html">Backend API Fundamentals</a> - REST, HTTP, status codes, URI design</li>
                                <li><a href="api-dev-data-persistence.html">Data Layer & Persistence</a> - Database integration, CRUD, transactions, Redis</li>
                                <li><a href="api-dev-openapi-specification.html">OpenAPI Specification</a> - Contract-first design, OpenAPI 3.0/3.1</li>
                                <li><a href="api-dev-documentation-dx.html">Documentation & DX</a> - Swagger UI, Redoc, developer portals</li>
                                <li><a href="api-dev-authentication-authorization.html">Authentication & Authorization</a> - OAuth 2.0, JWT, RBAC, ABAC</li>
                                <li><a href="api-dev-security-hardening.html">Security Hardening</a> - OWASP Top 10, input validation, CORS</li>
                                <li><a href="api-dev-aws-api-gateway.html">AWS API Gateway</a> - REST/HTTP APIs, Lambda integration, WAF</li>
                                <li><a href="api-dev-azure-apim.html">Azure API Management</a> - Policies, products, developer portal</li>
                                <li><a href="api-dev-gcp-apigee.html">GCP Apigee</a> - API proxies, monetization, analytics</li>
                                <li><a href="api-dev-architecture-patterns.html">Architecture Patterns</a> - Gateway, BFF, microservices, DDD</li>
                                <li><a href="api-dev-versioning-governance.html">Versioning & Governance</a> - SemVer, deprecation, lifecycle</li>
                                <li><a href="api-dev-monitoring-analytics.html">Monitoring & Analytics</a> - Observability, tracing, SLIs/SLOs</li>
                                <li><a href="api-dev-performance-rate-limiting.html">Performance & Rate Limiting</a> - Caching, throttling, load testing</li>
                                <li><a href="api-dev-graphql-grpc.html">GraphQL & gRPC</a> - Alternative API styles, Protocol Buffers</li>
                                <li><strong>Testing & Contracts (This Guide)</strong> - Contract testing, Pact, Postman/Newman</li>
                                <li><a href="api-dev-cicd-automation.html">CI/CD & Automation</a> - Spectral, GitHub Actions, Terraform</li>
                                <li><a href="api-dev-product-management.html">API Product Management</a> - API as Product, monetization, ecosystems</li>
                            </ol>
                        </div>
                    </div>

                    <h2 id="testing-pyramid"><i class="fas fa-layer-group me-2 text-teal"></i>API Testing Pyramid</h2>
                    
                    <h3>The Testing Pyramid for APIs</h3>
                    <p>Effective API testing requires a balanced approach across multiple layers, from fast unit tests to comprehensive end-to-end tests.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-pyramid me-2"></i>API Testing Pyramid</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal">Reference</span>
                        </div>
                        <div class="content">
                            <table class="table table-bordered">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Layer</th>
                                        <th>Quantity</th>
                                        <th>Speed</th>
                                        <th>What It Tests</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Unit</strong></td>
                                        <td>Many (70%)</td>
                                        <td>Fast (ms)</td>
                                        <td>Business logic, validators, transformers</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Integration</strong></td>
                                        <td>Some (20%)</td>
                                        <td>Medium (s)</td>
                                        <td>Database, external services, middleware</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Contract</strong></td>
                                        <td>Key APIs</td>
                                        <td>Medium</td>
                                        <td>API shape, consumer expectations</td>
                                    </tr>
                                    <tr>
                                        <td><strong>E2E</strong></td>
                                        <td>Few (10%)</td>
                                        <td>Slow (min)</td>
                                        <td>Full user journeys, critical paths</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <h2 id="unit-testing"><i class="fas fa-microscope me-2 text-teal"></i>Unit Testing APIs</h2>

                    <h3>Testing Business Logic</h3>
<pre><code class="language-javascript">// taskService.js
class TaskService {
  constructor(taskRepository) {
    this.taskRepository = taskRepository;
  }

  async createTask(data, userId) {
    if (!data.title?.trim()) {
      throw new ValidationError('Title is required');
    }
    
    const task = {
      ...data,
      id: generateId(),
      ownerId: userId,
      status: data.status || 'pending',
      createdAt: new Date()
    };
    
    return this.taskRepository.save(task);
  }
}

// taskService.test.js
const { TaskService } = require('./taskService');
const { ValidationError } = require('./errors');

describe('TaskService', () => {
  let taskService;
  let mockRepository;

  beforeEach(() => {
    mockRepository = {
      save: jest.fn(task => Promise.resolve({ ...task, id: 'task_123' })),
      findById: jest.fn()
    };
    taskService = new TaskService(mockRepository);
  });

  describe('createTask', () => {
    it('should create a task with default status', async () => {
      const task = await taskService.createTask(
        { title: 'Test task' },
        'user_1'
      );

      expect(task.title).toBe('Test task');
      expect(task.status).toBe('pending');
      expect(task.ownerId).toBe('user_1');
      expect(mockRepository.save).toHaveBeenCalledTimes(1);
    });

    it('should throw ValidationError for empty title', async () => {
      await expect(
        taskService.createTask({ title: '' }, 'user_1')
      ).rejects.toThrow(ValidationError);
    });

    it('should throw ValidationError for whitespace-only title', async () => {
      await expect(
        taskService.createTask({ title: '   ' }, 'user_1')
      ).rejects.toThrow(ValidationError);
    });
  });
});</code></pre>

                    <h2 id="integration"><i class="fas fa-plug me-2 text-teal"></i>Integration Testing</h2>

                    <h3>Testing with Real Database</h3>
<pre><code class="language-javascript">// tasks.integration.test.js
const request = require('supertest');
const { createApp } = require('../app');
const { setupTestDb, teardownTestDb, getTestDb } = require('./testUtils');

describe('Tasks API Integration', () => {
  let app;
  let db;
  let authToken;

  beforeAll(async () => {
    db = await setupTestDb();
    app = createApp({ db });
    
    // Get auth token for tests
    const authRes = await request(app)
      .post('/auth/login')
      .send({ email: 'test@example.com', password: 'password123' });
    authToken = authRes.body.accessToken;
  });

  afterAll(async () => {
    await teardownTestDb();
  });

  beforeEach(async () => {
    // Clean tasks table between tests
    await db.query('DELETE FROM tasks');
  });

  describe('POST /tasks', () => {
    it('should create a task and return 201', async () => {
      const response = await request(app)
        .post('/tasks')
        .set('Authorization', `Bearer ${authToken}`)
        .send({ title: 'Integration test task', priority: 'high' });

      expect(response.status).toBe(201);
      expect(response.body.id).toBeDefined();
      expect(response.body.title).toBe('Integration test task');
      expect(response.headers.location).toMatch(/\/tasks\/task_/);

      // Verify in database
      const dbTask = await db.query(
        'SELECT * FROM tasks WHERE id = $1',
        [response.body.id]
      );
      expect(dbTask.rows[0].title).toBe('Integration test task');
    });

    it('should return 422 for invalid data', async () => {
      const response = await request(app)
        .post('/tasks')
        .set('Authorization', `Bearer ${authToken}`)
        .send({ title: '' });

      expect(response.status).toBe(422);
      expect(response.body.errors).toBeDefined();
    });

    it('should return 401 without auth token', async () => {
      const response = await request(app)
        .post('/tasks')
        .send({ title: 'Unauthorized task' });

      expect(response.status).toBe(401);
    });
  });

  describe('GET /tasks', () => {
    beforeEach(async () => {
      // Seed test data
      await db.query(`
        INSERT INTO tasks (id, title, status, owner_id)
        VALUES 
          ('task_1', 'Task 1', 'pending', 'user_1'),
          ('task_2', 'Task 2', 'completed', 'user_1'),
          ('task_3', 'Task 3', 'pending', 'user_1')
      `);
    });

    it('should return paginated tasks', async () => {
      const response = await request(app)
        .get('/tasks?limit=2')
        .set('Authorization', `Bearer ${authToken}`);

      expect(response.status).toBe(200);
      expect(response.body.data).toHaveLength(2);
      expect(response.body.pagination.hasMore).toBe(true);
    });

    it('should filter by status', async () => {
      const response = await request(app)
        .get('/tasks?status=completed')
        .set('Authorization', `Bearer ${authToken}`);

      expect(response.status).toBe(200);
      expect(response.body.data).toHaveLength(1);
      expect(response.body.data[0].status).toBe('completed');
    });
  });
});</code></pre>

                    <h2 id="contract-testing"><i class="fas fa-file-contract me-2 text-teal"></i>Contract Testing</h2>

                    <h3>Consumer-Driven Contract Testing with Pact</h3>
                    <div class="highlight-box">
                        <i class="fas fa-handshake me-2"></i>
                        <strong>Contract Testing:</strong> Ensures API consumers and providers agree on the API shape. Contracts are generated by consumers and verified by providers.
                    </div>

<pre><code class="language-javascript">// consumer.pact.test.js - Frontend/Consumer side
const { PactV3 } = require('@pact-foundation/pact');
const { TaskApiClient } = require('./taskApiClient');

const provider = new PactV3({
  consumer: 'TaskWebApp',
  provider: 'TaskAPI'
});

describe('Task API Contract', () => {
  it('should get a task by ID', async () => {
    // Define expected interaction
    provider
      .given('a task with ID task_123 exists')
      .uponReceiving('a request to get task task_123')
      .withRequest({
        method: 'GET',
        path: '/tasks/task_123',
        headers: { 'Authorization': 'Bearer valid-token' }
      })
      .willRespondWith({
        status: 200,
        headers: { 'Content-Type': 'application/json' },
        body: {
          id: 'task_123',
          title: Matchers.string('Sample task'),
          status: Matchers.term({
            matcher: 'pending|in_progress|completed',
            generate: 'pending'
          }),
          createdAt: Matchers.iso8601DateTime()
        }
      });

    // Run test against mock provider
    await provider.executeTest(async (mockProvider) => {
      const client = new TaskApiClient(mockProvider.url);
      const task = await client.getTask('task_123');
      
      expect(task.id).toBe('task_123');
      expect(task.status).toBe('pending');
    });
  });

  it('should create a task', async () => {
    provider
      .uponReceiving('a request to create a task')
      .withRequest({
        method: 'POST',
        path: '/tasks',
        headers: {
          'Authorization': 'Bearer valid-token',
          'Content-Type': 'application/json'
        },
        body: {
          title: 'New task'
        }
      })
      .willRespondWith({
        status: 201,
        headers: {
          'Content-Type': 'application/json',
          'Location': Matchers.term({
            matcher: '/tasks/task_.*',
            generate: '/tasks/task_456'
          })
        },
        body: {
          id: Matchers.uuid(),
          title: 'New task',
          status: 'pending'
        }
      });

    await provider.executeTest(async (mockProvider) => {
      const client = new TaskApiClient(mockProvider.url);
      const task = await client.createTask({ title: 'New task' });
      
      expect(task.title).toBe('New task');
    });
  });
});</code></pre>

                    <h4>Provider Verification</h4>
<pre><code class="language-javascript">// provider.pact.test.js - Backend/Provider side
const { Verifier } = require('@pact-foundation/pact');
const { createApp } = require('../app');

describe('Pact Provider Verification', () => {
  let server;

  beforeAll(async () => {
    const app = createApp();
    server = app.listen(4000);
  });

  afterAll(() => server.close());

  it('should validate the contract', async () => {
    const verifier = new Verifier({
      providerBaseUrl: 'http://localhost:4000',
      pactUrls: ['./pacts/TaskWebApp-TaskAPI.json'],
      // Or fetch from Pact Broker
      // pactBrokerUrl: 'https://pact-broker.example.com',
      
      stateHandlers: {
        'a task with ID task_123 exists': async () => {
          // Set up test data
          await db.query(`
            INSERT INTO tasks (id, title, status)
            VALUES ('task_123', 'Sample task', 'pending')
          `);
        }
      }
    });

    await verifier.verifyProvider();
  });
});</code></pre>

                    <h2 id="postman"><i class="fas fa-paper-plane me-2 text-teal"></i>Postman & Newman</h2>

                    <h3>Automated API Testing with Postman</h3>
<pre><code class="language-json">{
  "info": {
    "name": "Task API Tests",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create Task",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 201', () => {",
              "  pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test('Response has task ID', () => {",
              "  const json = pm.response.json();",
              "  pm.expect(json.id).to.match(/^task_/);",
              "  pm.environment.set('taskId', json.id);",
              "});",
              "",
              "pm.test('Response time under 500ms', () => {",
              "  pm.expect(pm.response.responseTime).to.be.below(500);",
              "});"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "url": "{{baseUrl}}/tasks",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"title\": \"Postman test task\"}"
        }
      }
    }
  ]
}</code></pre>

                    <h4>Running with Newman in CI</h4>
<pre><code class="language-bash"># Install Newman
npm install -g newman newman-reporter-htmlextra

# Run collection
newman run postman-collection.json \
  --environment production.postman_environment.json \
  --reporters cli,htmlextra \
  --reporter-htmlextra-export ./reports/api-test-report.html \
  --bail  # Stop on first failure</code></pre>

                    <h2 id="mocking"><i class="fas fa-theater-masks me-2 text-teal"></i>API Mocking</h2>

                    <h3>Mock Server with Prism</h3>
<pre><code class="language-bash"># Start mock server from OpenAPI spec
npx @stoplight/prism-cli mock openapi.yaml -p 4010

# Dynamic mocking with examples
curl http://localhost:4010/tasks
# Returns example from OpenAPI spec

# Force specific response
curl -H "Prefer: code=404" http://localhost:4010/tasks/invalid</code></pre>

                    <h4>MSW for Frontend Testing</h4>
<pre><code class="language-javascript">// mocks/handlers.js
import { rest } from 'msw';

export const handlers = [
  rest.get('/api/tasks', (req, res, ctx) => {
    return res(
      ctx.status(200),
      ctx.json({
        data: [
          { id: 'task_1', title: 'Mock task 1', status: 'pending' },
          { id: 'task_2', title: 'Mock task 2', status: 'completed' }
        ],
        pagination: { hasMore: false }
      })
    );
  }),

  rest.post('/api/tasks', async (req, res, ctx) => {
    const body = await req.json();
    return res(
      ctx.status(201),
      ctx.json({
        id: 'task_new',
        ...body,
        status: 'pending',
        createdAt: new Date().toISOString()
      })
    );
  })
];</code></pre>

                    <h3 id="exercises">Practice Exercises</h3>

                    <div class="experiment-card">
                        <h4><i class="fas fa-laptop-code me-2"></i>Exercise 1: Unit Tests</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal">Beginner</span>
                            <span class="badge bg-navy">45 minutes</span>
                        </div>
                        <div class="content">
                            <ul>
                                <li>Write unit tests for your service layer</li>
                                <li>Mock repository dependencies</li>
                                <li>Test edge cases and error scenarios</li>
                            </ul>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-laptop-code me-2"></i>Exercise 2: Pact Contract Tests</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal">Intermediate</span>
                            <span class="badge bg-navy">1.5 hours</span>
                        </div>
                        <div class="content">
                            <ul>
                                <li>Set up Pact for consumer contract tests</li>
                                <li>Define contracts for 3 key endpoints</li>
                                <li>Implement provider verification</li>
                            </ul>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-laptop-code me-2"></i>Exercise 3: Postman + Newman CI</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-crimson">Advanced</span>
                            <span class="badge bg-navy">2 hours</span>
                        </div>
                        <div class="content">
                            <ul>
                                <li>Create comprehensive Postman collection</li>
                                <li>Add test scripts with assertions</li>
                                <li>Set up Newman in GitHub Actions</li>
                                <li>Generate HTML test reports</li>
                            </ul>
                        </div>
                    </div>

                    <div class="highlight-box highlight-navy">
                        <i class="fas fa-forward text-primary me-2"></i>
                        <strong>Next Steps:</strong> In <a href="api-dev-cicd-automation.html" style="color: var(--color-crimson);">Part 16: CI/CD & Automation</a>, we'll build automated pipelines with Spectral linting, GitHub Actions workflows, and Terraform deployments.
                    </div>

                    <!-- Related Posts -->
                    <div class="related-posts">
                        <h3><i class="fas fa-book-reader me-2"></i>Continue the Series</h3>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 14: GraphQL & gRPC</h5>
                            <p class="text-muted small mb-2">Master GraphQL and gRPC API styles.</p>
                            <a href="api-dev-graphql-grpc.html" class="text-decoration-none">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 16: CI/CD & Automation</h5>
                            <p class="text-muted small mb-2">Learn API CI/CD pipelines, Spectral linting, and deployment strategies.</p>
                            <a href="api-dev-cicd-automation.html" class="text-decoration-none">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                    </div>

                </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.</p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://in.pinterest.com/wasilz/" target="_blank" class="social-icon" title="Pinterest"><i class="fab fa-pinterest-p"></i></a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            </div>
            <hr class="bg-secondary">
            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small"><i class="fas fa-icons me-2"></i>Icons from <a href="https://www.flaticon.com/" target="_blank" class="text-light">Flaticon</a> &amp; <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a></p>
                    <p class="small mt-3"><a href="/" class="text-light text-decoration-none">Home</a> | <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a></p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">Enjoying this content? â˜• <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Keep me caffeinated</a> to keep the pixels flowing!</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <button id="scrollToTop" class="scroll-to-top" title="Back to Top"><i class="fas fa-arrow-up"></i></button>
    <div id="categoryIndicator" class="category-indicator" title="Current Section"><i class="fas fa-tag"></i><span id="categoryText">Technology</span></div>
    <script src="../../../js/cookie-consent.js"></script>
    <script src="../../../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
</body>
</html>
