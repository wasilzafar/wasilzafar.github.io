<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Database Mastery Part 3: PostgreSQL Deep Dive | Wasil Zafar</title>
    <meta name="description" content="Master PostgreSQL - the most powerful open-source RDBMS. Learn advanced data types, indexing strategies, full-text search, extensions, partitioning, and performance tuning.">
    <meta name="keywords" content="PostgreSQL, Postgres, JSONB, arrays, GIN index, GiST, PostGIS, partitioning, materialized views, pg_stat_activity, database tuning">
    <meta name="author" content="Wasil Zafar">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Complete Database Mastery Part 3: PostgreSQL Deep Dive">
    <meta property="og:description" content="Master PostgreSQL - advanced data types, indexing strategies, full-text search, extensions, partitioning, and performance tuning.">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2026-01-31">
    <meta property="article:author" content="Wasil Zafar">
    <meta property="article:section" content="Technology">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <!-- Google Consent Mode v2 -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied',
            'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE']
        });
        
        gtag('consent', 'default', {
            'ad_storage': 'granted',
            'ad_user_data': 'granted',
            'ad_personalization': 'granted',
            'analytics_storage': 'granted'
        });
        
        gtag('set', 'url_passthrough', true);
    </script>

    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-PBS8M2JR');
    </script>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />
    
    <!-- Prism.js Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

    <!-- GDPR Cookie Consent Banner -->
    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div id="closeIcon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
            </svg>
        </div>
        
        <div class="content-wrap">
            <div class="msg-wrap">
                <div class="title-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20">
                        <path fill="#3B9797" d="M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 0 0-57.79 57.81l-35.1 68.88a132.645 132.645 0 0 0-12.82 80.95l12.08 76.27a132.521 132.521 0 0 0 37.16 70.37l54.64 54.64a132.036 132.036 0 0 0 70.37 37.16l76.27 12.15c27.51 4.36 55.7-.11 80.95-12.8l68.88-35.08a132.166 132.166 0 0 0 57.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"></path>
                    </svg>
                    <h4 style="margin: 0; font-size: 18px; color: var(--color-navy); font-weight: 700;">Cookie Consent</h4>
                </div>
                <p style="font-size: 14px; line-height: 1.6; color: var(--color-navy); margin-bottom: 15px;">
                    We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. 
                    By clicking "Accept All", you consent to our use of cookies. See our 
                    <a href="/privacy-policy.html" style="color: var(--color-teal); border-bottom: 1px dotted var(--color-teal);">Privacy Policy</a> 
                    for more information.
                </p>
                
                <div id="cookieSettings" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="14" height="14">
                        <path fill="currentColor" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path>
                    </svg>
                    <span style="margin-left: 5px; font-size: 12px; font-weight: 600; color: var(--color-navy);">Customize Settings</span>
                </div>
                
                <div id="cookieTypes" style="display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(59, 151, 151, 0.2);">
                    <h5 style="font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 10px; text-transform: uppercase;">Cookie Preferences</h5>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: flex; align-items: start; cursor: pointer;">
                            <input type="checkbox" checked disabled style="margin-top: 2px; margin-right: 8px; cursor: not-allowed;">
                            <div>
                                <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Essential Cookies (Required)</strong>
                                <span style="font-size: 12px; color: #666;">Necessary for the website to function properly.</span>
                            </div>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: flex; align-items: start; cursor: pointer;">
                            <input type="checkbox" id="analyticsCookies" checked style="margin-top: 2px; margin-right: 8px;">
                            <div>
                                <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Analytics Cookies</strong>
                                <span style="font-size: 12px; color: #666;">Help us understand how you interact with the website.</span>
                            </div>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: flex; align-items: start; cursor: pointer;">
                            <input type="checkbox" id="marketingCookies" style="margin-top: 2px; margin-right: 8px;">
                            <div>
                                <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Marketing Cookies</strong>
                                <span style="font-size: 12px; color: #666;">Used to deliver relevant advertisements.</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white; font-weight: 600;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal); font-weight: 600;">Reject All</button>
                <button id="cookieSave" style="background: var(--color-blue); color: white; font-weight: 600; display: none;">Save Preferences</button>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/">
                <span class="gradient-text">Wasil Zafar</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#certifications">Certifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#interests">Interests</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="blog-hero">
        <div class="container py-5">
            <div class="blog-header">
                <a href="/pages/categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
                <h1 class="display-4 fw-bold mb-3">Complete Database Mastery Part 3: PostgreSQL Deep Dive</h1>
                <div class="blog-meta">
                    <span><i class="fas fa-calendar me-2"></i>January 31, 2026</span>
                    <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                    <span class="reading-time"><i class="fas fa-clock me-1"></i>45 min read</span>
                    <button onclick="window.print()" class="print-btn" title="Print this article"><i class="fas fa-print"></i> Print</button>
                </div>
                <p class="lead">Master PostgreSQL—the most powerful open-source RDBMS. Learn advanced data types, indexing strategies, full-text search, extensions like PostGIS, partitioning, and performance tuning techniques.</p>
            </div>
        </div>
    </section>

    <!-- Table of Contents Toggle Button -->
    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents" aria-label="Open Table of Contents">
        <i class="fas fa-list"></i>
    </button>

    <!-- Side Navigation Overlay -->
    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header">
            <h3><i class="fas fa-list me-2"></i>Table of Contents</h3>
            <button class="closebtn" onclick="closeNav()" aria-label="Close Table of Contents">&times;</button>
        </div>
        <ol>
            <li>
                <a href="#introduction" onclick="closeNav()">Introduction</a>
                <ul>
                    <li><a href="#introduction" onclick="closeNav()">Why PostgreSQL?</a></li>
                    <li><a href="#series-nav" onclick="closeNav()">Series Navigation</a></li>
                </ul>
            </li>
            <li>
                <a href="#architecture" onclick="closeNav()">PostgreSQL Architecture</a>
                <ul>
                    <li><a href="#process-model" onclick="closeNav()">Process Model</a></li>
                    <li><a href="#memory-structure" onclick="closeNav()">Memory Structure</a></li>
                </ul>
            </li>
            <li>
                <a href="#data-types" onclick="closeNav()">Advanced Data Types</a>
                <ul>
                    <li><a href="#arrays" onclick="closeNav()">Arrays</a></li>
                    <li><a href="#jsonb" onclick="closeNav()">JSONB</a></li>
                    <li><a href="#uuid-custom" onclick="closeNav()">UUID & Custom Types</a></li>
                </ul>
            </li>
            <li>
                <a href="#indexing" onclick="closeNav()">Index Types</a>
                <ul>
                    <li><a href="#btree-hash" onclick="closeNav()">B-Tree & Hash</a></li>
                    <li><a href="#gin-gist" onclick="closeNav()">GIN & GiST</a></li>
                    <li><a href="#brin" onclick="closeNav()">BRIN Indexes</a></li>
                </ul>
            </li>
            <li><a href="#full-text-search" onclick="closeNav()">Full-Text Search</a></li>
            <li>
                <a href="#extensions" onclick="closeNav()">Extensions</a>
                <ul>
                    <li><a href="#postgis" onclick="closeNav()">PostGIS (Geospatial)</a></li>
                    <li><a href="#other-extensions" onclick="closeNav()">Other Popular Extensions</a></li>
                </ul>
            </li>
            <li>
                <a href="#advanced-features" onclick="closeNav()">Advanced Features</a>
                <ul>
                    <li><a href="#partitioning" onclick="closeNav()">Partitioning</a></li>
                    <li><a href="#materialized-views" onclick="closeNav()">Materialized Views</a></li>
                    <li><a href="#logical-replication" onclick="closeNav()">Logical Replication</a></li>
                </ul>
            </li>
            <li><a href="#performance-tuning" onclick="closeNav()">Performance Tuning</a></li>
            <li><a href="#monitoring" onclick="closeNav()">Monitoring with pg_stat</a></li>
            <li><a href="#conclusion" onclick="closeNav()">Conclusion & Next Steps</a></li>
        </ol>
    </div>

    <!-- Overlay Backdrop -->
    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <!-- Main Content -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">

                <!-- Introduction -->
                <div id="introduction" class="blog-content">
                    <h2><i class="fas fa-elephant me-2 text-teal"></i>Introduction: Why PostgreSQL?</h2>
                    
                    <p><strong>PostgreSQL</strong> (often called "Postgres") is the world's most advanced open-source relational database. It combines SQL compliance with powerful features that rival—and often exceed—commercial databases like Oracle.</p>

                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-sitemap me-2"></i>
                        <strong>Series Context:</strong> This is <strong>Part 3 of 15</strong> in the Complete Database Mastery series. We're diving deep into PostgreSQL's unique capabilities.
                    </div>

                    <div class="experiment-card" id="series-nav">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">15-Part Series</span>
                            <span class="badge bg-crimson">Database Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="database-mastery-sql-fundamentals.html"><strong>Part 1:</strong> SQL Fundamentals & Syntax</a> — Database basics, CRUD operations, joins, constraints</li>
                                <li><a href="database-mastery-advanced-sql.html"><strong>Part 2:</strong> Advanced SQL & Query Mastery</a> — CTEs, window functions, stored procedures</li>
                                <li><strong>Part 3: PostgreSQL Deep Dive (This Guide)</strong> — Advanced types, indexing, extensions, tuning</li>
                                <li><a href="database-mastery-mysql-mariadb.html"><strong>Part 4:</strong> MySQL & MariaDB</a> — Storage engines, replication, optimization</li>
                                <li><a href="database-mastery-transactions-concurrency.html"><strong>Part 5:</strong> Transactions & Concurrency</a> — ACID, isolation levels, locking, MVCC</li>
                                <li><a href="database-mastery-query-optimization.html"><strong>Part 6:</strong> Query Optimization & Indexing</a> — EXPLAIN plans, index design, performance</li>
                                <li><a href="database-mastery-data-modeling.html"><strong>Part 7:</strong> Data Modeling & Normalization</a> — ERDs, normal forms, schema design</li>
                                <li><a href="database-mastery-mongodb-nosql.html"><strong>Part 8:</strong> MongoDB & Document Databases</a> — NoSQL, aggregation, sharding</li>
                                <li><a href="database-mastery-redis-caching.html"><strong>Part 9:</strong> Redis & Caching Strategies</a> — Data structures, caching patterns, pub/sub</li>
                                <li><a href="database-mastery-administration-migrations.html"><strong>Part 10:</strong> Database Administration & Migrations</a> — Backup, versioning, maintenance</li>
                                <li><a href="database-mastery-scaling-distributed.html"><strong>Part 11:</strong> Scaling & Distributed Systems</a> — Replication, sharding, CAP theorem</li>
                                <li><a href="database-mastery-cloud-databases.html"><strong>Part 12:</strong> Cloud Databases & Managed Services</a> — AWS, Azure, GCP database offerings</li>
                                <li><a href="database-mastery-security-governance.html"><strong>Part 13:</strong> Database Security & Governance</a> — Encryption, access control, compliance</li>
                                <li><a href="database-mastery-warehousing-analytics.html"><strong>Part 14:</strong> Data Warehousing & Analytics</a> — OLAP, star schemas, columnar DBs</li>
                                <li><a href="database-mastery-capstone-projects.html"><strong>Part 15:</strong> Capstone Projects</a> — Portfolio-ready database implementations</li>
                            </ol>
                        </div>
                    </div>

                    <!-- CONTENT PLACEHOLDER -->
                    <p>Here's why PostgreSQL dominates in many high-stakes environments:</p>
                    <ul>
                        <li><strong>ACID Compliant:</strong> Full transaction support with no compromises</li>
                        <li><strong>Extensible:</strong> Custom data types, operators, indexes, and extensions</li>
                        <li><strong>Standards-based:</strong> Most SQL-compliant database available</li>
                        <li><strong>Rich Data Types:</strong> JSONB, arrays, ranges, UUIDs, geospatial, and more</li>
                        <li><strong>Mature Ecosystem:</strong> Extensions like PostGIS, TimescaleDB, and pg_cron</li>
                    </ul>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-users me-2"></i>Who Uses PostgreSQL?</h4>
                        <div class="content">
                            <ul>
                                <li><strong>Apple:</strong> Core infrastructure</li>
                                <li><strong>Instagram:</strong> Primary datastore (billions of photos)</li>
                                <li><strong>Spotify:</strong> Metadata and user data</li>
                                <li><strong>Reddit:</strong> Core database</li>
                                <li><strong>Twitch:</strong> Primary database for streaming platform</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="highlight-box">
                        <i class="fas fa-terminal me-2"></i>
                        <strong>Version Note:</strong> This guide covers PostgreSQL 14-16. Most features work in earlier versions, but newer features like JSON path queries and enhanced partitioning require 12+.
                    </div>

                </div>

                <!-- Architecture Section -->
                <div id="architecture" class="blog-content mt-5">
                    <h2><i class="fas fa-sitemap me-2 text-teal"></i>PostgreSQL Architecture</h2>
                    
                    <p>Understanding PostgreSQL's internal architecture helps you optimize performance, troubleshoot issues, and make informed configuration decisions.</p>
                    
                    <h3 id="process-model">Process Model</h3>
                    
                    <p>PostgreSQL uses a <strong>process-per-connection</strong> model—each client connection gets its own backend process. This is simpler than thread-based models and provides better isolation.</p>
                    
<pre><code class="language-bash"># View PostgreSQL processes
ps aux | grep postgres

# Output:
# postgres   1234  postmaster (main daemon)
# postgres   1235  checkpointer
# postgres   1236  background writer
# postgres   1237  walwriter
# postgres   1238  autovacuum launcher
# postgres   1240  postgres: mydb user [local] idle  (client connection)
</code></pre>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-cogs me-2"></i>Key PostgreSQL Processes</h4>
                        <div class="content">
                            <table class="table table-bordered">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Process</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>postmaster</code></td>
                                        <td>Main daemon—listens for connections, spawns backends</td>
                                    </tr>
                                    <tr>
                                        <td><code>checkpointer</code></td>
                                        <td>Writes dirty buffers to disk at checkpoint intervals</td>
                                    </tr>
                                    <tr>
                                        <td><code>background writer</code></td>
                                        <td>Gradually writes dirty buffers to reduce checkpoint spike</td>
                                    </tr>
                                    <tr>
                                        <td><code>walwriter</code></td>
                                        <td>Flushes Write-Ahead Log (WAL) to disk</td>
                                    </tr>
                                    <tr>
                                        <td><code>autovacuum</code></td>
                                        <td>Reclaims dead row space, updates statistics</td>
                                    </tr>
                                    <tr>
                                        <td><code>backend</code></td>
                                        <td>Handles individual client connections</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <h3 id="memory-structure">Memory Structure</h3>
                    
                    <p>PostgreSQL memory is divided into <strong>shared memory</strong> (used by all processes) and <strong>local memory</strong> (per-process).</p>
                    
<pre><code class="language-sql">-- View current memory settings
SHOW shared_buffers;     -- Main cache for table/index data
SHOW work_mem;           -- Memory for sorts/hash joins (per operation!)
SHOW maintenance_work_mem;  -- Memory for maintenance ops (VACUUM, CREATE INDEX)
SHOW effective_cache_size;  -- Planner hint for available cache

-- Real-world example configuration (for 16GB RAM server)
-- In postgresql.conf:
-- shared_buffers = 4GB          # 25% of RAM
-- work_mem = 64MB               # Per-operation, be careful!
-- maintenance_work_mem = 1GB    # For maintenance operations
-- effective_cache_size = 12GB   # 75% of RAM (includes OS cache)
</code></pre>
                    
                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>work_mem Danger:</strong> <code>work_mem</code> is allocated <em>per operation, per connection</em>. With 100 connections and a complex query using 3 sorts, you could need 100 × 3 × 64MB = 19GB! Start low (32-64MB) and increase carefully.
                    </div>
                </div>

                <!-- Data Types Section -->
                <div id="data-types" class="blog-content mt-5">
                    <h2><i class="fas fa-cubes me-2 text-teal"></i>Advanced Data Types</h2>
                    
                    <p>PostgreSQL's rich type system is a major competitive advantage. Beyond standard SQL types, it offers arrays, JSONB, ranges, UUIDs, and the ability to create custom types.</p>
                    
                    <h3 id="arrays">Arrays</h3>
                    
                    <p>PostgreSQL has native array support—store multiple values in a single column. Great for tags, preferences, or any multi-valued attribute.</p>
                    
<pre><code class="language-sql">-- Creating tables with arrays
CREATE TABLE articles (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200),
    tags TEXT[],                    -- Array of text
    scores INTEGER[]                -- Array of integers
);

-- Inserting array values
INSERT INTO articles (title, tags, scores) VALUES
    ('PostgreSQL Tips', ARRAY['database', 'postgresql', 'sql'], ARRAY[85, 92, 88]),
    ('Python Guide', '{"programming", "python", "tutorial"}', '{90, 95}');

-- Querying arrays
SELECT title, tags FROM articles WHERE 'postgresql' = ANY(tags);
SELECT title, tags FROM articles WHERE tags @> ARRAY['sql'];  -- Contains all
SELECT title, tags FROM articles WHERE tags && ARRAY['python', 'java'];  -- Overlaps

-- Array operations
SELECT 
    title,
    tags[1] AS first_tag,           -- 1-indexed!
    array_length(tags, 1) AS tag_count,
    array_to_string(tags, ', ') AS tags_csv,
    scores[1] + scores[2] AS sum_first_two
FROM articles;

-- Unnest: Expand array into rows
SELECT title, unnest(tags) AS tag FROM articles;
</code></pre>

                    <h3 id="jsonb">JSONB: Binary JSON</h3>
                    
                    <p>JSONB is PostgreSQL's flagship semi-structured data type. It's binary (faster queries) and indexable—getting the best of both SQL and NoSQL worlds.</p>
                    
<pre><code class="language-sql">CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    attributes JSONB
);

INSERT INTO products (name, attributes) VALUES
    ('Gaming Laptop', '{
        "brand": "ASUS",
        "specs": {"ram_gb": 32, "storage_gb": 1024, "gpu": "RTX 4080"},
        "ports": ["USB-C", "HDMI", "Ethernet"],
        "available": true
    }'),
    ('Wireless Mouse', '{
        "brand": "Logitech",
        "dpi": 25600,
        "buttons": 8,
        "wireless": true,
        "color_options": ["black", "white"]
    }');

-- JSONB querying
SELECT name, attributes->>'brand' AS brand FROM products;
SELECT name, attributes->'specs'->>'gpu' AS gpu FROM products;
SELECT name FROM products WHERE attributes->>'brand' = 'ASUS';
SELECT name FROM products WHERE (attributes->'specs'->>'ram_gb')::INT >= 16;

-- Check for existence
SELECT name FROM products WHERE attributes ? 'wireless';  -- Has key
SELECT name FROM products WHERE attributes @> '{"available": true}';  -- Contains

-- JSONB modifications
UPDATE products SET attributes = attributes || '{"warranty_years": 2}'
WHERE name = 'Gaming Laptop';

UPDATE products SET attributes = jsonb_set(attributes, '{specs,ram_gb}', '64')
WHERE name = 'Gaming Laptop';

-- Index JSONB for fast queries
CREATE INDEX idx_products_brand ON products ((attributes->>'brand'));
CREATE INDEX idx_products_attrs ON products USING GIN (attributes);
</code></pre>

                    <h3 id="uuid-custom">UUID & Custom Types</h3>
                    
<pre><code class="language-sql">-- UUID: Universally unique identifiers
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE TABLE sessions (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    user_id INT,
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO sessions (user_id) VALUES (1);
SELECT * FROM sessions;
-- id: 550e8400-e29b-41d4-a716-446655440000

-- Range types: Represent intervals
CREATE TABLE reservations (
    id SERIAL PRIMARY KEY,
    room_id INT,
    during TSRANGE  -- Timestamp range
);

INSERT INTO reservations (room_id, during) VALUES
    (101, '[2024-03-15 09:00, 2024-03-15 11:00)');

-- Prevent double-booking with exclusion constraint
ALTER TABLE reservations
ADD CONSTRAINT no_overlap EXCLUDE USING GIST (
    room_id WITH =,
    during WITH &&
);

-- Enum types: Fixed set of values
CREATE TYPE order_status AS ENUM ('pending', 'processing', 'shipped', 'delivered');

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    status order_status DEFAULT 'pending'
);

INSERT INTO orders (status) VALUES ('shipped');
-- INSERT INTO orders (status) VALUES ('cancelled');  -- ERROR: invalid
</code></pre>
                    
                    <div class="highlight-box">
                        <i class="fas fa-database me-2"></i>
                        <strong>Other Useful Types:</strong> <code>INET</code>/<code>CIDR</code> for IP addresses, <code>MACADDR</code>, <code>MONEY</code>, <code>INTERVAL</code> for durations, <code>POINT</code>/<code>BOX</code>/<code>POLYGON</code> for geometry (or use PostGIS).
                    </div>
                </div>

                <!-- Indexing Section -->
                <div id="indexing" class="blog-content mt-5">
                    <h2><i class="fas fa-search me-2 text-teal"></i>Index Types</h2>
                    
                    <p>PostgreSQL offers multiple index types, each optimized for different query patterns. Choosing the right index can make queries 100x faster.</p>
                    
                    <h3 id="btree-hash">B-Tree & Hash Indexes</h3>
                    
                    <p><strong>B-Tree</strong> is the default and most versatile index type. It supports equality and range queries, ordering, and partial matches (prefixes).</p>
                    
<pre><code class="language-sql">-- B-Tree index (default)
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_orders_date ON orders(order_date);

-- Multi-column index (order matters!)
CREATE INDEX idx_orders_customer_date ON orders(customer_id, order_date);
-- ✅ Fast: WHERE customer_id = 1
-- ✅ Fast: WHERE customer_id = 1 AND order_date > '2024-01-01'
-- ❌ Slow: WHERE order_date > '2024-01-01'  (can't use index)

-- Partial index: Only index rows that match condition
CREATE INDEX idx_orders_pending ON orders(created_at)
WHERE status = 'pending';
-- Index is small, fast, and perfect for "show pending orders" query

-- Index with expressions
CREATE INDEX idx_users_lower_email ON users(LOWER(email));
-- Now LOWER(email) queries use the index

-- Hash index (equality only, smaller than B-Tree for high-cardinality)
CREATE INDEX idx_sessions_token ON sessions USING HASH (token);
-- Only for: WHERE token = 'abc123' (not LIKE, not ranges)
</code></pre>

                    <h3 id="gin-gist">GIN & GiST Indexes</h3>
                    
                    <p><strong>GIN</strong> (Generalized Inverted Index) excels at indexing composite values—arrays, JSONB, full-text search.</p>
                    <p><strong>GiST</strong> (Generalized Search Tree) is great for geometric data, ranges, and proximity searches.</p>
                    
<pre><code class="language-sql">-- GIN for JSONB (index all keys and values)
CREATE INDEX idx_products_attrs ON products USING GIN (attributes);

-- Now these are fast:
SELECT * FROM products WHERE attributes @> '{"brand": "Apple"}';
SELECT * FROM products WHERE attributes ? 'wireless';
SELECT * FROM products WHERE attributes ?| ARRAY['wireless', 'bluetooth'];

-- GIN for arrays
CREATE INDEX idx_articles_tags ON articles USING GIN (tags);
SELECT * FROM articles WHERE tags @> ARRAY['postgresql'];

-- GIN for full-text search
CREATE INDEX idx_articles_content ON articles 
USING GIN (to_tsvector('english', content));

-- GiST for range types (prevents overlapping reservations)
CREATE INDEX idx_reservations_period ON reservations 
USING GiST (during);

-- GiST for geometry (with PostGIS)
CREATE INDEX idx_locations_point ON locations 
USING GiST (coordinates);
</code></pre>

                    <h3 id="brin">BRIN Indexes</h3>
                    
                    <p><strong>BRIN</strong> (Block Range Index) is incredibly compact—great for large, naturally-ordered data like time-series or log tables.</p>
                    
<pre><code class="language-sql">-- BRIN for time-series data (events inserted in order)
CREATE TABLE events (
    id BIGSERIAL PRIMARY KEY,
    event_time TIMESTAMP NOT NULL,
    data JSONB
);

-- BRIN stores min/max per block range (very small!)
CREATE INDEX idx_events_time ON events USING BRIN (event_time);

-- Size comparison (1 billion rows):
-- B-Tree: ~20 GB
-- BRIN: ~200 KB (!!)

-- Works because data is physically ordered by time
-- Query: WHERE event_time BETWEEN '2024-01-01' AND '2024-01-31'
-- BRIN quickly eliminates most blocks, then scans remaining
</code></pre>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-balance-scale me-2"></i>Index Type Selection Guide</h4>
                        <div class="content">
                            <table class="table table-bordered">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Index Type</th>
                                        <th>Best For</th>
                                        <th>Size</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>B-Tree</strong></td>
                                        <td>=, &lt;, &gt;, BETWEEN, LIKE 'prefix%', ORDER BY</td>
                                        <td>Medium</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Hash</strong></td>
                                        <td>= only (high cardinality)</td>
                                        <td>Small</td>
                                    </tr>
                                    <tr>
                                        <td><strong>GIN</strong></td>
                                        <td>Arrays, JSONB, full-text search, contains</td>
                                        <td>Large</td>
                                    </tr>
                                    <tr>
                                        <td><strong>GiST</strong></td>
                                        <td>Geometry, ranges, nearest-neighbor</td>
                                        <td>Medium</td>
                                    </tr>
                                    <tr>
                                        <td><strong>BRIN</strong></td>
                                        <td>Sorted data (timestamps, sequential IDs)</td>
                                        <td>Tiny</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Full-Text Search Section -->
                <div id="full-text-search" class="blog-content mt-5">
                    <h2><i class="fas fa-search-plus me-2 text-teal"></i>Full-Text Search</h2>
                    
                    <p>PostgreSQL includes powerful built-in full-text search—no need for external systems like Elasticsearch for many use cases.</p>
                    
<pre><code class="language-sql">-- Basic full-text search
CREATE TABLE articles (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    search_vector TSVECTOR  -- Pre-computed search document
);

-- Create search documents
UPDATE articles SET search_vector = 
    to_tsvector('english', title || ' ' || body);

-- Search query
SELECT title, ts_rank(search_vector, query) AS rank
FROM articles, to_tsquery('english', 'database & postgresql') AS query
WHERE search_vector @@ query
ORDER BY rank DESC;

-- Search with OR and NOT
SELECT title FROM articles
WHERE search_vector @@ to_tsquery('english', 'python | java & !javascript');

-- Auto-update search vector with trigger
CREATE OR REPLACE FUNCTION update_search_vector()
RETURNS TRIGGER AS $$
BEGIN
    NEW.search_vector = 
        setweight(to_tsvector('english', COALESCE(NEW.title, '')), 'A') ||
        setweight(to_tsvector('english', COALESCE(NEW.body, '')), 'B');
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER articles_search_update
BEFORE INSERT OR UPDATE ON articles
FOR EACH ROW EXECUTE FUNCTION update_search_vector();

-- Index for fast full-text search
CREATE INDEX idx_articles_fts ON articles USING GIN (search_vector);

-- Headline: Show matching text with highlights
SELECT 
    title,
    ts_headline('english', body, query, 'StartSel=<b>, StopSel=</b>') AS snippet
FROM articles, to_tsquery('english', 'postgresql') AS query
WHERE search_vector @@ query;
</code></pre>
                    
                    <div class="highlight-box">
                        <i class="fas fa-language me-2"></i>
                        <strong>Language Support:</strong> PostgreSQL supports many languages for stemming and stop words: <code>'english'</code>, <code>'spanish'</code>, <code>'german'</code>, <code>'simple'</code> (no stemming). Use <code>\dF</code> in psql to list available configurations.
                    </div>
                </div>

                <!-- Extensions Section -->
                <div id="extensions" class="blog-content mt-5">
                    <h2><i class="fas fa-puzzle-piece me-2 text-teal"></i>Extensions</h2>
                    
                    <p>Extensions are PostgreSQL's superpower—add specialized functionality without leaving the database. There are extensions for geospatial data, time-series, cryptography, foreign data, and much more.</p>
                    
<pre><code class="language-sql">-- List available extensions
SELECT * FROM pg_available_extensions;

-- Install an extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_stat_statements";

-- List installed extensions
\dx
</code></pre>
                    
                    <h3 id="postgis">PostGIS (Geospatial)</h3>
                    
                    <p><strong>PostGIS</strong> adds geographic objects and functions—turning PostgreSQL into a powerful spatial database used by mapping applications worldwide.</p>
                    
<pre><code class="language-sql">CREATE EXTENSION postgis;

-- Create table with geometry
CREATE TABLE stores (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    location GEOGRAPHY(POINT, 4326)  -- SRID 4326 = WGS84 (GPS)
);

INSERT INTO stores (name, location) VALUES
    ('Downtown', ST_Point(-73.9857, 40.7484)),  -- NYC
    ('Brooklyn', ST_Point(-73.9442, 40.6782));

-- Find stores within 5km of a point
SELECT name, 
       ST_Distance(location, ST_Point(-73.9712, 40.7831)::geography) AS distance_m
FROM stores
WHERE ST_DWithin(location, ST_Point(-73.9712, 40.7831)::geography, 5000)
ORDER BY distance_m;

-- Create spatial index
CREATE INDEX idx_stores_location ON stores USING GIST (location);
</code></pre>

                    <h3 id="other-extensions">Other Popular Extensions</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-puzzle-piece me-2"></i>Must-Know PostgreSQL Extensions</h4>
                        <div class="content">
                            <table class="table table-bordered">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Extension</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>pg_stat_statements</code></td>
                                        <td>Track query execution statistics (essential for optimization)</td>
                                    </tr>
                                    <tr>
                                        <td><code>uuid-ossp</code></td>
                                        <td>Generate UUIDs (v4 random, v1 timestamp-based)</td>
                                    </tr>
                                    <tr>
                                        <td><code>pg_trgm</code></td>
                                        <td>Fuzzy text matching, similarity search, LIKE optimization</td>
                                    </tr>
                                    <tr>
                                        <td><code>hstore</code></td>
                                        <td>Key-value store in a column (predecessor to JSONB)</td>
                                    </tr>
                                    <tr>
                                        <td><code>pgcrypto</code></td>
                                        <td>Cryptographic functions (hashing, encryption)</td>
                                    </tr>
                                    <tr>
                                        <td><code>postgres_fdw</code></td>
                                        <td>Query other PostgreSQL databases as local tables</td>
                                    </tr>
                                    <tr>
                                        <td><code>TimescaleDB</code></td>
                                        <td>Time-series optimization (auto-partitioning, compression)</td>
                                    </tr>
                                    <tr>
                                        <td><code>pg_cron</code></td>
                                        <td>Schedule jobs within the database</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
<pre><code class="language-sql">-- pg_trgm: Fuzzy search with LIKE optimization
CREATE EXTENSION pg_trgm;

CREATE INDEX idx_products_name_trgm ON products 
USING GIN (name gin_trgm_ops);

-- Now LIKE '%laptop%' uses the index!
SELECT * FROM products WHERE name ILIKE '%gaming%';

-- Similarity search
SELECT name, similarity(name, 'laptp') AS sim
FROM products
WHERE similarity(name, 'laptp') > 0.3
ORDER BY sim DESC;

-- pgcrypto: Password hashing
CREATE EXTENSION pgcrypto;

-- Hash password
UPDATE users SET password_hash = crypt('user_password', gen_salt('bf'))
WHERE id = 1;

-- Verify password
SELECT id FROM users
WHERE email = 'user@example.com'
  AND password_hash = crypt('user_password', password_hash);
</code></pre>
                </div>

                <!-- Advanced Features Section -->
                <div id="advanced-features" class="blog-content mt-5">
                    <h2><i class="fas fa-cogs me-2 text-teal"></i>Advanced Features</h2>
                    
                    <h3 id="partitioning">Table Partitioning</h3>
                    
                    <p>Partitioning splits large tables into smaller, more manageable pieces. Queries automatically route to relevant partitions, dramatically improving performance for time-series and historical data.</p>
                    
<pre><code class="language-sql">-- Create partitioned table (PostgreSQL 10+)
CREATE TABLE events (
    id BIGSERIAL,
    event_time TIMESTAMP NOT NULL,
    event_type VARCHAR(50),
    data JSONB
) PARTITION BY RANGE (event_time);

-- Create partitions for each month
CREATE TABLE events_2024_01 PARTITION OF events
    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');
CREATE TABLE events_2024_02 PARTITION OF events
    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');
CREATE TABLE events_2024_03 PARTITION OF events
    FOR VALUES FROM ('2024-03-01') TO ('2024-04-01');

-- Insert goes to correct partition automatically
INSERT INTO events (event_time, event_type, data) VALUES
    ('2024-02-15 10:30:00', 'page_view', '{"page": "/home"}');

-- Query automatically prunes irrelevant partitions
EXPLAIN SELECT * FROM events 
WHERE event_time >= '2024-02-01' AND event_time < '2024-03-01';
-- Only scans events_2024_02!

-- List partitioning (for categories)
CREATE TABLE orders (
    id SERIAL,
    region VARCHAR(10),
    total DECIMAL(10,2)
) PARTITION BY LIST (region);

CREATE TABLE orders_us PARTITION OF orders FOR VALUES IN ('US');
CREATE TABLE orders_eu PARTITION OF orders FOR VALUES IN ('EU', 'UK');
CREATE TABLE orders_apac PARTITION OF orders FOR VALUES IN ('APAC');
</code></pre>

                    <h3 id="materialized-views">Materialized Views</h3>
                    
                    <p>Materialized views store query results physically—perfect for expensive reports that don't need real-time data.</p>
                    
<pre><code class="language-sql">-- Create materialized view
CREATE MATERIALIZED VIEW monthly_sales_summary AS
SELECT 
    DATE_TRUNC('month', order_date) AS month,
    COUNT(*) AS order_count,
    SUM(total) AS revenue,
    AVG(total) AS avg_order
FROM orders
WHERE status = 'completed'
GROUP BY DATE_TRUNC('month', order_date)
ORDER BY month;

-- Query is instant (reads stored data)
SELECT * FROM monthly_sales_summary WHERE month >= '2024-01-01';

-- Refresh when needed
REFRESH MATERIALIZED VIEW monthly_sales_summary;

-- Concurrent refresh (doesn't lock reads)
REFRESH MATERIALIZED VIEW CONCURRENTLY monthly_sales_summary;
-- Requires unique index:
CREATE UNIQUE INDEX ON monthly_sales_summary (month);
</code></pre>

                    <h3 id="logical-replication">Logical Replication</h3>
                    
                    <p>Logical replication streams changes at the row level—replicate specific tables, support different PostgreSQL versions, or feed data to other systems.</p>
                    
<pre><code class="language-sql">-- On PRIMARY (publisher)
-- postgresql.conf: wal_level = logical

CREATE PUBLICATION my_publication FOR TABLE orders, customers;
-- Or all tables:
CREATE PUBLICATION all_tables FOR ALL TABLES;

-- On REPLICA (subscriber)
CREATE SUBSCRIPTION my_subscription
    CONNECTION 'host=primary_host dbname=mydb user=replicator'
    PUBLICATION my_publication;

-- Check replication status
SELECT * FROM pg_stat_subscription;
SELECT * FROM pg_replication_slots;
</code></pre>
                    
                    <div class="highlight-box">
                        <i class="fas fa-sync me-2"></i>
                        <strong>Replication Types:</strong>
                        <ul style="margin-top: 10px;">
                            <li><strong>Physical (streaming):</strong> Block-level copy, identical replica, same PG version required</li>
                            <li><strong>Logical:</strong> Row-level changes, selective tables, cross-version, cross-platform</li>
                        </ul>
                    </div>
                </div>

                <!-- Performance Tuning Section -->
                <div id="performance-tuning" class="blog-content mt-5">
                    <h2><i class="fas fa-tachometer-alt me-2 text-teal"></i>Performance Tuning</h2>
                    
                    <p>PostgreSQL ships with conservative defaults. Tuning these settings for your hardware and workload can dramatically improve performance.</p>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-sliders-h me-2"></i>Essential postgresql.conf Settings</h4>
                        <div class="content">
<pre><code class="language-bash"># Memory settings (for 32GB RAM server, OLTP workload)
shared_buffers = 8GB              # 25% of RAM
effective_cache_size = 24GB       # 75% of RAM (includes OS cache)
work_mem = 64MB                   # Per-operation (careful!)
maintenance_work_mem = 2GB        # For VACUUM, CREATE INDEX

# Write-Ahead Log
wal_buffers = 64MB
checkpoint_completion_target = 0.9
max_wal_size = 4GB

# Query planner
random_page_cost = 1.1            # Lower for SSD (default 4.0)
effective_io_concurrency = 200    # Higher for SSD

# Connections
max_connections = 200             # Use connection pooling!

# Parallelism (multi-core)
max_parallel_workers_per_gather = 4
max_parallel_workers = 8
max_worker_processes = 8
</code></pre>
                        </div>
                    </div>
                    
<pre><code class="language-sql">-- EXPLAIN ANALYZE: Understand query execution
EXPLAIN (ANALYZE, BUFFERS, FORMAT TEXT)
SELECT * FROM orders
WHERE customer_id = 1234
ORDER BY order_date DESC
LIMIT 10;

-- Output includes:
-- Execution time, rows examined, buffers read, index usage
-- Compare "estimated rows" vs "actual rows" for planner accuracy

-- Common issues to look for:
-- Seq Scan on large table → needs index
-- Large "rows removed by filter" → index not selective enough
-- "Sort" with high memory → increase work_mem or add index
-- Nested Loop with many iterations → check join order
</code></pre>
                    
                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Vacuum & Autovacuum:</strong> PostgreSQL MVCC creates dead rows on UPDATE/DELETE. VACUUM reclaims this space. Never disable autovacuum—instead, tune its aggressiveness if needed.
                    </div>
                    
<pre><code class="language-sql">-- Check table bloat
SELECT 
    relname AS table_name,
    n_live_tup AS live_rows,
    n_dead_tup AS dead_rows,
    ROUND(n_dead_tup::numeric / NULLIF(n_live_tup, 0) * 100, 2) AS dead_pct,
    last_autovacuum
FROM pg_stat_user_tables
WHERE n_dead_tup > 1000
ORDER BY n_dead_tup DESC;

-- Force vacuum on specific table
VACUUM (VERBOSE, ANALYZE) orders;

-- Tune autovacuum for high-write tables
ALTER TABLE orders SET (
    autovacuum_vacuum_scale_factor = 0.01,  -- Vacuum at 1% dead rows
    autovacuum_analyze_scale_factor = 0.005
);
</code></pre>
                </div>

                <!-- Monitoring Section -->
                <div id="monitoring" class="blog-content mt-5">
                    <h2><i class="fas fa-chart-line me-2 text-teal"></i>Monitoring with pg_stat</h2>
                    
                    <p>PostgreSQL has built-in statistics views that expose everything happening in your database. These are essential for troubleshooting and optimization.</p>
                    
<pre><code class="language-sql">-- Active connections and queries
SELECT 
    pid,
    usename,
    application_name,
    client_addr,
    state,
    query_start,
    NOW() - query_start AS duration,
    LEFT(query, 80) AS query_snippet
FROM pg_stat_activity
WHERE state != 'idle'
ORDER BY query_start;

-- Kill a long-running query
SELECT pg_cancel_backend(pid);   -- Graceful cancel
SELECT pg_terminate_backend(pid); -- Force terminate

-- Table statistics: Which tables are hot?
SELECT 
    relname AS table_name,
    seq_scan,                      -- Full table scans
    idx_scan,                      -- Index scans
    n_tup_ins AS inserts,
    n_tup_upd AS updates,
    n_tup_del AS deletes,
    n_live_tup AS live_rows
FROM pg_stat_user_tables
ORDER BY seq_scan DESC
LIMIT 10;

-- Index usage: Find unused indexes (candidates for removal)
SELECT 
    schemaname || '.' || relname AS table,
    indexrelname AS index,
    idx_scan AS times_used,
    pg_size_pretty(pg_relation_size(indexrelid)) AS size
FROM pg_stat_user_indexes
WHERE idx_scan < 50  -- Rarely used
ORDER BY pg_relation_size(indexrelid) DESC;
</code></pre>
                    
<pre><code class="language-sql">-- pg_stat_statements: Top queries by time
CREATE EXTENSION IF NOT EXISTS pg_stat_statements;

SELECT 
    ROUND(total_exec_time::numeric, 2) AS total_time_ms,
    calls,
    ROUND((mean_exec_time)::numeric, 2) AS avg_time_ms,
    ROUND((total_exec_time / SUM(total_exec_time) OVER()) * 100, 2) AS pct,
    LEFT(query, 100) AS query
FROM pg_stat_statements
ORDER BY total_exec_time DESC
LIMIT 20;

-- Reset statistics periodically
SELECT pg_stat_statements_reset();
SELECT pg_stat_reset();  -- Reset all stats
</code></pre>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-heartbeat me-2"></i>Key Metrics to Monitor</h4>
                        <div class="content">
                            <table class="table table-bordered">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Metric</th>
                                        <th>Source</th>
                                        <th>Alert Threshold</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Active connections</td>
                                        <td><code>pg_stat_activity</code></td>
                                        <td>> 80% of max_connections</td>
                                    </tr>
                                    <tr>
                                        <td>Long queries</td>
                                        <td><code>pg_stat_activity</code></td>
                                        <td>> 5 minutes</td>
                                    </tr>
                                    <tr>
                                        <td>Replication lag</td>
                                        <td><code>pg_stat_replication</code></td>
                                        <td>> 1 minute</td>
                                    </tr>
                                    <tr>
                                        <td>Cache hit ratio</td>
                                        <td><code>pg_stat_database</code></td>
                                        <td>< 95%</td>
                                    </tr>
                                    <tr>
                                        <td>Transaction wraparound</td>
                                        <td><code>pg_database.datfrozenxid</code></td>
                                        <td>< 200M from wraparound</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
<pre><code class="language-sql">-- Cache hit ratio (should be > 95%)
SELECT 
    SUM(heap_blks_read) AS disk_reads,
    SUM(heap_blks_hit) AS cache_hits,
    ROUND(SUM(heap_blks_hit) / NULLIF(SUM(heap_blks_hit) + SUM(heap_blks_read), 0) * 100, 2) AS cache_hit_ratio
FROM pg_statio_user_tables;
</code></pre>
                </div>

                <!-- Conclusion -->
                <div id="conclusion" class="blog-content mt-5">
                    <h2><i class="fas fa-flag-checkered me-2 text-teal"></i>Conclusion & Next Steps</h2>
                    
                    <p>PostgreSQL's advanced features make it the database of choice for complex applications. From JSONB to PostGIS, from partitioning to logical replication—you now have the knowledge to leverage its full power.</p>

                    <div class="series-next">
                        <h4><i class="fas fa-arrow-right me-2"></i>Next in the Series</h4>
                        <p>In <a href="database-mastery-mysql-mariadb.html"><strong>Part 4: MySQL & MariaDB</strong></a>, we'll explore the industry-standard databases for web systems—storage engines, replication, and optimization strategies.</p>
                    </div>
                </div>

                <!-- Related Posts -->
                <div class="related-posts">
                    <h3><i class="fas fa-book me-2"></i>Continue the Database Mastery Series</h3>
                    <div class="related-post-item">
                        <h5>Part 2: Advanced SQL & Query Mastery</h5>
                        <p>Master CTEs, window functions, stored procedures, and advanced query techniques.</p>
                        <a href="database-mastery-advanced-sql.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    <div class="related-post-item">
                        <h5>Part 4: MySQL & MariaDB</h5>
                        <p>Explore MySQL storage engines, replication setup, and query optimization.</p>
                        <a href="database-mastery-mysql-mariadb.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    <div class="related-post-item">
                        <h5>Part 6: Query Optimization & Indexing</h5>
                        <p>Master EXPLAIN plans, index design, and performance optimization techniques.</p>
                        <a href="database-mastery-query-optimization.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">
                        I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.
                    </p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://in.pinterest.com/wasilz/" target="_blank" class="social-icon" title="Pinterest">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <hr class="bg-secondary">

            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small">
                        <i class="fas fa-icons me-2"></i>Icons from <a href="https://www.flaticon.com/" target="_blank" class="text-light">Flaticon</a> &amp; <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a>
                    </p>
                    <p class="small mt-3">
                        <a href="/" class="text-light text-decoration-none">Home</a> | 
                        <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | 
                        <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">
                        Enjoying this content?  <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Keep me caffeinated</a> to keep the pixels flowing!
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll-to-Top Button -->
    <button id="scrollToTop" class="scroll-to-top" title="Back to Top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Category Indicator -->
    <div id="categoryIndicator" class="category-indicator" title="Current Section"><i class="fas fa-tag"></i><span id="categoryText">Technology</span></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../../js/main.js"></script>
    <script src="../../../js/cookie-consent.js"></script>
    
    <!-- Prism.js for Syntax Highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

    <!-- Prism Theme Switcher -->
    <script>
        const themes = {
            'prism-theme': 'Tomorrow Night',
            'prism-default': 'Default',
            'prism-dark': 'Dark',
            'prism-twilight': 'Twilight',
            'prism-okaidia': 'Okaidia',
            'prism-solarizedlight': 'Solarized Light'
        };

        const savedTheme = localStorage.getItem('prism-theme') || 'prism-theme';

        function switchTheme(themeId) {
            Object.keys(themes).forEach(id => {
                const link = document.getElementById(id);
                if (link) link.disabled = true;
            });
            
            const selectedLink = document.getElementById(themeId);
            if (selectedLink) {
                selectedLink.disabled = false;
                localStorage.setItem('prism-theme', themeId);
            }

            document.querySelectorAll('div.code-toolbar select').forEach(dropdown => {
                dropdown.value = themeId;
            });

            setTimeout(() => Prism.highlightAll(), 10);
        }

        document.addEventListener('DOMContentLoaded', function() {
            switchTheme(savedTheme);
        });

        Prism.plugins.toolbar.registerButton('theme-switcher', function(env) {
            const select = document.createElement('select');
            select.setAttribute('aria-label', 'Select code theme');
            select.className = 'prism-theme-selector';
            
            Object.keys(themes).forEach(themeId => {
                const option = document.createElement('option');
                option.value = themeId;
                option.textContent = themes[themeId];
                if (themeId === savedTheme) option.selected = true;
                select.appendChild(option);
            });
            
            select.addEventListener('change', function(e) {
                switchTheme(e.target.value);
            });
            
            return select;
        });
    </script>

    <!-- Scroll-to-Top and Category Indicator Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToTopBtn = document.getElementById('scrollToTop');
            const categoryIndicator = document.getElementById('categoryIndicator');
            
            const h2Elements = document.querySelectorAll('.blog-content h2');
            const sections = [];
            
            h2Elements.forEach(function(h2) {
                let text = h2.textContent.trim().replace(/^\d+\.\s*/, '');
                if (text.length > 25) text = text.substring(0, 22) + '...';
                sections.push({ element: h2, name: text });
            });
            
            window.addEventListener('scroll', function() {
                if (window.scrollY > 300) {
                    scrollToTopBtn.classList.add('show');
                    
                    if (sections.length > 0) {
                        let currentSection = sections[0].name;
                        for (let i = 0; i < sections.length; i++) {
                            const rect = sections[i].element.getBoundingClientRect();
                            if (rect.top <= 150) currentSection = sections[i].name;
                        }
                        categoryIndicator.textContent = currentSection;
                        categoryIndicator.classList.add('show');
                    }
                } else {
                    scrollToTopBtn.classList.remove('show');
                    categoryIndicator.classList.remove('show');
                }
            });
            
            scrollToTopBtn.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>
