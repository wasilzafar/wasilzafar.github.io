<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, archive" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Part 6: Compilers & Program Translation - Learn about lexing, parsing, AST, code generation, and compiler optimization techniques." />
    <meta name="keywords" content="compilers, program translation, lexical analysis, parsing, abstract syntax tree, AST, code generation, compiler optimization, lexer, parser" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Part 6: Compilers & Program Translation | Computer Architecture & OS Mastery" />
    <meta property="og:description" content="Master compiler fundamentals: lexical analysis, parsing, AST construction, code generation, and optimization techniques." />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://wasilzafar.com/pages/series/computer-architecture/comp-arch-compilers.html" />
    <meta property="article:published_time" content="2026-01-31" />
    <meta property="article:author" content="Wasil Zafar" />
    <meta property="article:section" content="Technology" />

    <title>Part 6: Compilers & Program Translation | Computer Architecture & OS Mastery - Wasil Zafar</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <!-- Prism.js Syntax Highlighting - Multiple Themes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />

    <!-- Google Consent Mode v2 -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'ad_user_data': 'denied',
            'ad_personalization': 'denied',
            'analytics_storage': 'denied',
            'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE']
        });
        gtag('consent', 'default', {
            'ad_storage': 'granted',
            'ad_user_data': 'granted',
            'ad_personalization': 'granted',
            'analytics_storage': 'granted'
        });
        gtag('set', 'url_passthrough', true);
    </script>

    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-PBS8M2JR');
    </script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>

    <!-- GDPR Cookie Consent Banner -->
    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div id="closeIcon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
            </svg>
        </div>
        
        <div class="content-wrap">
            <div class="msg-wrap">
                <div class="title-wrap">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20">
                        <path fill="#3B9797" d="M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 0 0-57.79 57.81l-35.1 68.88a132.645 132.645 0 0 0-12.82 80.95l12.08 76.27a132.521 132.521 0 0 0 37.16 70.37l54.64 54.64a132.036 132.036 0 0 0 70.37 37.16l76.27 12.15c27.51 4.36 55.7-.11 80.95-12.8l68.88-35.08a132.166 132.166 0 0 0 57.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"></path>
                    </svg>
                    <h4 style="margin: 0; font-size: 18px; color: var(--color-navy); font-weight: 700;">Cookie Consent</h4>
                </div>
                <p style="font-size: 14px; line-height: 1.6; color: var(--color-navy); margin-bottom: 15px;">
                    We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. 
                    By clicking "Accept All", you consent to our use of cookies. See our 
                    <a href="/privacy-policy.html" style="color: var(--color-teal); border-bottom: 1px dotted var(--color-teal);">Privacy Policy</a> 
                    for more information.
                </p>
                
                <div id="cookieSettings" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="14" height="14">
                        <path fill="currentColor" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path>
                    </svg>
                    <span style="margin-left: 5px; font-size: 12px; font-weight: 600; color: var(--color-navy);">Customize Settings</span>
                </div>
                
                <div id="cookieTypes" style="display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(59, 151, 151, 0.2);">
                    <h5 style="font-size: 12px; font-weight: 700; color: var(--color-navy); margin-bottom: 10px; text-transform: uppercase;">Cookie Preferences</h5>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: flex; align-items: start; cursor: pointer;">
                            <input type="checkbox" checked disabled style="margin-top: 2px; margin-right: 8px; cursor: not-allowed;">
                            <div>
                                <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Essential Cookies (Required)</strong>
                                <span style="font-size: 12px; color: #666;">Necessary for the website to function properly.</span>
                            </div>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: flex; align-items: start; cursor: pointer;">
                            <input type="checkbox" id="analyticsCookies" checked style="margin-top: 2px; margin-right: 8px;">
                            <div>
                                <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Analytics Cookies</strong>
                                <span style="font-size: 12px; color: #666;">Help us understand how you interact with the website.</span>
                            </div>
                        </label>
                    </div>
                    
                    <div style="margin-bottom: 12px;">
                        <label style="display: flex; align-items: start; cursor: pointer;">
                            <input type="checkbox" id="marketingCookies" style="margin-top: 2px; margin-right: 8px;">
                            <div>
                                <strong style="font-size: 13px; color: var(--color-navy); display: block; margin-bottom: 2px;">Marketing Cookies</strong>
                                <span style="font-size: 12px; color: #666;">Used to deliver relevant advertisements.</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white; font-weight: 600;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal); font-weight: 600;">Reject All</button>
                <button id="cookieSave" style="background: var(--color-blue); color: white; font-weight: 600; display: none;">Save Preferences</button>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/">
                <span class="gradient-text">Wasil Zafar</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#skills">Skills</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#certifications">Certifications</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#interests">Interests</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Blog Hero Section -->
    <section class="blog-hero">
        <div class="container py-5">
            <a href="../../categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
            <h1 class="display-4 fw-bold mt-4">Part 6: Compilers & Program Translation</h1>
            <div class="blog-meta">
                <span><i class="fas fa-calendar me-2"></i>January 31, 2026</span>
                <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                <span class="reading-time"><i class="fas fa-clock me-1"></i>30 min read</span>
                <button onclick="window.print()" class="print-btn" title="Print this article"><i class="fas fa-print"></i> Print</button>
            </div>
            <p class="lead mt-3">Understand how compilers transform high-level source code into machine code—from lexical analysis through parsing, semantic analysis, code generation, and optimization.</p>
        </div>
    </section>

    <!-- Table of Contents Toggle Button -->
    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents" aria-label="Open Table of Contents">
        <i class="fas fa-list"></i>
    </button>

    <!-- Side Navigation TOC -->
    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header">
            <h3><i class="fas fa-list me-2"></i>Table of Contents</h3>
            <button class="closebtn" onclick="closeNav()" aria-label="Close Table of Contents">&times;</button>
        </div>
        <ol>
            <li>
                <a href="#introduction" onclick="closeNav()">Introduction</a>
            </li>
            <li>
                <a href="#lexical-analysis" onclick="closeNav()">Lexical Analysis</a>
                <ul>
                    <li><a href="#tokens-lexemes" onclick="closeNav()">Tokens & Lexemes</a></li>
                    <li><a href="#lexer-implementation" onclick="closeNav()">Lexer Implementation</a></li>
                    <li><a href="#regular-expressions" onclick="closeNav()">Regular Expressions</a></li>
                </ul>
            </li>
            <li>
                <a href="#parsing" onclick="closeNav()">Parsing</a>
                <ul>
                    <li><a href="#context-free-grammars" onclick="closeNav()">Context-Free Grammars</a></li>
                    <li><a href="#top-down-parsing" onclick="closeNav()">Top-Down Parsing</a></li>
                    <li><a href="#bottom-up-parsing" onclick="closeNav()">Bottom-Up Parsing</a></li>
                </ul>
            </li>
            <li>
                <a href="#semantic-analysis" onclick="closeNav()">Semantic Analysis</a>
                <ul>
                    <li><a href="#ast-construction" onclick="closeNav()">AST Construction</a></li>
                    <li><a href="#type-checking" onclick="closeNav()">Type Checking</a></li>
                    <li><a href="#symbol-tables" onclick="closeNav()">Symbol Tables</a></li>
                </ul>
            </li>
            <li>
                <a href="#code-generation" onclick="closeNav()">Code Generation</a>
                <ul>
                    <li><a href="#intermediate-representation" onclick="closeNav()">Intermediate Representation</a></li>
                    <li><a href="#instruction-selection" onclick="closeNav()">Instruction Selection</a></li>
                    <li><a href="#register-allocation" onclick="closeNav()">Register Allocation</a></li>
                </ul>
            </li>
            <li>
                <a href="#optimization" onclick="closeNav()">Optimization</a>
                <ul>
                    <li><a href="#local-optimization" onclick="closeNav()">Local Optimization</a></li>
                    <li><a href="#global-optimization" onclick="closeNav()">Global Optimization</a></li>
                    <li><a href="#loop-optimization" onclick="closeNav()">Loop Optimization</a></li>
                </ul>
            </li>
            <li><a href="#conclusion" onclick="closeNav()">Conclusion & Next Steps</a></li>
        </ol>
    </div>

    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <!-- Main Content -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">

                <!-- Introduction -->
                <div id="introduction" class="blog-content">
                    <h2><i class="fas fa-code me-2 text-teal"></i>Introduction</h2>
                    
                    <p>Compilers are sophisticated programs that translate high-level source code into machine code that processors can execute. Understanding compiler design reveals the bridge between human-readable programs and hardware execution.</p>

                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-sitemap me-2"></i>
                        <strong>Series Context:</strong> This is <strong>Part 6 of 24</strong> in the Computer Architecture & Operating Systems Mastery series. Building on assemblers and linkers, we now explore how high-level languages are transformed into executable code.
                    </div>

                    <div class="experiment-card" id="series-nav">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">24-Part Series</span>
                            <span class="badge bg-crimson">Computer Architecture & OS Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="comp-arch-foundations.html"><strong>Part 1:</strong> Foundations of Computer Systems</a> — System overview, architectures, OS role</li>
                                <li><a href="comp-arch-digital-logic.html"><strong>Part 2:</strong> Digital Logic & CPU Building Blocks</a> — Gates, registers, datapath, microarchitecture</li>
                                <li><a href="comp-arch-isa.html"><strong>Part 3:</strong> Instruction Set Architecture (ISA)</a> — RISC vs CISC, instruction formats, addressing</li>
                                <li><a href="comp-arch-assembly.html"><strong>Part 4:</strong> Assembly Language & Machine Code</a> — Registers, stack, calling conventions</li>
                                <li><a href="comp-arch-linkers-loaders.html"><strong>Part 5:</strong> Assemblers, Linkers & Loaders</a> — Object files, ELF, dynamic linking</li>
                                <li><strong>Part 6: Compilers & Program Translation (This Guide)</strong> — Lexing, parsing, code generation</li>
                                <li><a href="comp-arch-cpu-pipelining.html"><strong>Part 7:</strong> CPU Execution & Pipelining</a> — Fetch-decode-execute, hazards, prediction</li>
                                <li><a href="comp-arch-os-kernel.html"><strong>Part 8:</strong> OS Architecture & Kernel Design</a> — Monolithic, microkernel, system calls</li>
                                <li><a href="comp-arch-processes.html"><strong>Part 9:</strong> Processes & Program Execution</a> — Process lifecycle, PCB, fork/exec</li>
                                <li><a href="comp-arch-threads-concurrency.html"><strong>Part 10:</strong> Threads & Concurrency</a> — Threading models, pthreads, race conditions</li>
                                <li><a href="comp-arch-cpu-scheduling.html"><strong>Part 11:</strong> CPU Scheduling Algorithms</a> — FCFS, RR, CFS, real-time scheduling</li>
                                <li><a href="comp-arch-synchronization.html"><strong>Part 12:</strong> Synchronization & Coordination</a> — Locks, semaphores, classic problems</li>
                                <li><a href="comp-arch-deadlocks.html"><strong>Part 13:</strong> Deadlocks & Prevention</a> — Coffman conditions, Banker's algorithm</li>
                                <li><a href="comp-arch-cache-memory-hierarchy.html"><strong>Part 14:</strong> Memory Hierarchy & Cache</a> — L1/L2/L3, cache coherence, NUMA</li>
                                <li><a href="comp-arch-memory-management.html"><strong>Part 15:</strong> Memory Management Fundamentals</a> — Address spaces, fragmentation, allocation</li>
                                <li><a href="comp-arch-virtual-memory.html"><strong>Part 16:</strong> Virtual Memory & Paging</a> — Page tables, TLB, demand paging</li>
                                <li><a href="comp-arch-file-systems.html"><strong>Part 17:</strong> File Systems & Storage</a> — Inodes, journaling, ext4, NTFS</li>
                                <li><a href="comp-arch-io-devices.html"><strong>Part 18:</strong> I/O Systems & Device Drivers</a> — Interrupts, DMA, disk scheduling</li>
                                <li><a href="comp-arch-multiprocessor.html"><strong>Part 19:</strong> Multiprocessor Systems</a> — SMP, NUMA, cache coherence</li>
                                <li><a href="comp-arch-security.html"><strong>Part 20:</strong> OS Security & Protection</a> — Privilege levels, ASLR, sandboxing</li>
                                <li><a href="comp-arch-virtualization.html"><strong>Part 21:</strong> Virtualization & Containers</a> — Hypervisors, namespaces, cgroups</li>
                                <li><a href="comp-arch-kernel-internals.html"><strong>Part 22:</strong> Advanced Kernel Internals</a> — Linux subsystems, kernel debugging</li>
                                <li><a href="comp-arch-case-studies.html"><strong>Part 23:</strong> Case Studies</a> — Linux vs Windows vs macOS</li>
                                <li><a href="comp-arch-capstone-projects.html"><strong>Part 24:</strong> Capstone Projects</a> — Shell, thread pool, paging simulator</li>
                            </ol>
                        </div>
                    </div>

                    <!-- CONTENT PLACEHOLDER -->
                    <h3>The Compiler as a Translator</h3>
                    <p>Imagine translating a novel from English to French. You can't just swap words one-by-one—you need to understand sentence structure, grammar rules, meaning, and idioms. Compilers face a similar challenge: they must understand the <em>structure</em> and <em>meaning</em> of source code before producing equivalent machine code.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-stream me-2"></i>Compilation Pipeline Overview</h4>
                        <div class="content">
<pre class="language-text"><code>Source Code (hello.c)
         │
         ▼
┌─────────────────────────────────────────────────────────────┐
│                    FRONT END                                │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐   │
│  │    Lexer      │→ │    Parser     │→ │   Semantic    │   │
│  │ (Scanner)     │  │               │  │   Analysis    │   │
│  │               │  │               │  │               │   │
│  │ "int x = 5;"  │  │ Build parse   │  │ Type check,   │   │
│  │   ↓           │  │ tree/AST      │  │ scope check   │   │
│  │ [INT][ID][=]  │  │               │  │               │   │
│  │ [NUM][;]      │  │               │  │               │   │
│  └───────────────┘  └───────────────┘  └───────────────┘   │
└──────────────────────────────┬──────────────────────────────┘
                               │ AST + Symbol Table
                               ▼
┌─────────────────────────────────────────────────────────────┐
│                    MIDDLE END                               │
│  ┌───────────────────────────────────────────────────────┐  │
│  │          Intermediate Representation (IR)             │  │
│  │          - Three-address code                         │  │
│  │          - SSA form                                   │  │
│  │          - LLVM IR                                    │  │
│  └───────────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────────┐  │
│  │           Machine-Independent Optimization            │  │
│  │          - Dead code elimination                      │  │
│  │          - Constant folding                           │  │
│  │          - Loop optimization                          │  │
│  └───────────────────────────────────────────────────────┘  │
└──────────────────────────────┬──────────────────────────────┘
                               │ Optimized IR
                               ▼
┌─────────────────────────────────────────────────────────────┐
│                    BACK END                                 │
│  ┌───────────────┐  ┌───────────────┐  ┌───────────────┐   │
│  │  Instruction  │→ │   Register    │→ │    Code       │   │
│  │  Selection    │  │   Allocation  │  │   Emission    │   │
│  │               │  │               │  │               │   │
│  │ IR → target   │  │ Map variables │  │ Output .s or  │   │
│  │ instructions  │  │ to registers  │  │ object file   │   │
│  └───────────────┘  └───────────────┘  └───────────────┘   │
└──────────────────────────────┬──────────────────────────────┘
                               │
                               ▼
                     Assembly / Object Code</code></pre>
                        </div>
                    </div>

                    <div class="highlight-box">
                        <i class="fas fa-lightbulb me-2"></i>
                        <strong>Why Multiple Phases?</strong> Separating compilation into phases allows each stage to focus on one concern. This modular design makes compilers easier to maintain, allows reusing front-ends for multiple back-ends (C → x86, C → ARM), and enables sophisticated optimization.
                    </div>

                </div>

                <!-- Lexical Analysis Section -->
                <div id="lexical-analysis" class="blog-content mt-5">
                    <h2><i class="fas fa-spell-check me-2 text-teal"></i>Lexical Analysis</h2>
                    
                    <p>The <strong>lexer</strong> (or scanner) is the first phase of compilation. It reads raw source code character-by-character and groups them into meaningful units called <strong>tokens</strong>. Think of it as reading text and identifying words, numbers, and punctuation.</p>

                    <h3 id="tokens-lexemes">Tokens & Lexemes</h3>
                    
                    <p>A <strong>lexeme</strong> is the actual character sequence in the source code. A <strong>token</strong> is the categorized representation of that lexeme.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-tag me-2"></i>Tokens from Source Code</h4>
                        <div class="content">
<pre class="language-text"><code>Source:  if (count >= 10) { total = count * price; }

Tokenization:
══════════════════════════════════════════════════════════════
Lexeme        Token Type        Additional Info
──────────────────────────────────────────────────────────────
"if"          KEYWORD_IF        -
"("           LPAREN            -
"count"       IDENTIFIER        name="count"
">="          RELOP             op=GE (greater-equal)
"10"          INTEGER_LITERAL   value=10
")"           RPAREN            -
"{"           LBRACE            -
"total"       IDENTIFIER        name="total"
"="           ASSIGN            -
"count"       IDENTIFIER        name="count"
"*"           MULOP             op=MUL
"price"       IDENTIFIER        name="price"
";"           SEMICOLON         -
"}"           RBRACE            -
══════════════════════════════════════════════════════════════</code></pre>
                        </div>
                    </div>

                    <div class="highlight-box highlight-navy">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Token Categories:</strong>
                        <ul class="mb-0 mt-2">
                            <li><strong>Keywords:</strong> <code>if</code>, <code>else</code>, <code>while</code>, <code>return</code>, <code>int</code>, <code>void</code></li>
                            <li><strong>Identifiers:</strong> variable/function names (<code>count</code>, <code>calculate</code>)</li>
                            <li><strong>Literals:</strong> numbers (<code>42</code>, <code>3.14</code>), strings (<code>"hello"</code>)</li>
                            <li><strong>Operators:</strong> <code>+</code>, <code>-</code>, <code>*</code>, <code>==</code>, <code>&&</code></li>
                            <li><strong>Delimiters:</strong> <code>(</code>, <code>)</code>, <code>{</code>, <code>}</code>, <code>;</code>, <code>,</code></li>
                        </ul>
                    </div>

                    <h3 id="lexer-implementation">Lexer Implementation</h3>
                    
                    <p>A lexer can be implemented as a finite state machine (FSM) that transitions between states based on input characters:</p>

<pre class="language-python"><code># Simple lexer for arithmetic expressions
import re
from dataclasses import dataclass
from typing import List, Tuple

@dataclass
class Token:
    type: str
    value: str
    line: int
    column: int

class Lexer:
    def __init__(self, source: str):
        self.source = source
        self.pos = 0
        self.line = 1
        self.column = 1
        
        # Token patterns (order matters!)
        self.patterns = [
            (r'\s+',           None),           # Whitespace (skip)
            (r'//.*',          None),           # Comments (skip)
            (r'\d+\.\d+',      'FLOAT'),        # Float literals
            (r'\d+',           'INTEGER'),      # Integer literals
            (r'if\b',          'IF'),           # Keywords (before IDENT!)
            (r'else\b',        'ELSE'),
            (r'while\b',       'WHILE'),
            (r'return\b',      'RETURN'),
            (r'int\b',         'INT'),
            (r'[a-zA-Z_]\w*',  'IDENTIFIER'),   # Identifiers
            (r'==',            'EQ'),           # Two-char ops first!
            (r'!=',            'NE'),
            (r'&lt;=',            'LE'),
            (r'>=',            'GE'),
            (r'&&',            'AND'),
            (r'\|\|',          'OR'),
            (r'[+\-*/]',       'BINOP'),        # Single-char operators
            (r'[&lt;>]',          'RELOP'),
            (r'=',             'ASSIGN'),
            (r'\(',            'LPAREN'),
            (r'\)',            'RPAREN'),
            (r'\{',            'LBRACE'),
            (r'\}',            'RBRACE'),
            (r';',             'SEMICOLON'),
        ]
    
    def tokenize(self) -> List[Token]:
        tokens = []
        while self.pos &lt; len(self.source):
            match = None
            for pattern, token_type in self.patterns:
                regex = re.compile(pattern)
                match = regex.match(self.source, self.pos)
                if match:
                    text = match.group(0)
                    if token_type:  # Skip whitespace/comments
                        tokens.append(Token(token_type, text, 
                                          self.line, self.column))
                    # Update position
                    newlines = text.count('\n')
                    self.line += newlines
                    if newlines:
                        self.column = len(text) - text.rfind('\n')
                    else:
                        self.column += len(text)
                    self.pos = match.end()
                    break
            if not match:
                raise SyntaxError(f"Unknown char '{self.source[self.pos]}' "
                                f"at line {self.line}, col {self.column}")
        tokens.append(Token('EOF', '', self.line, self.column))
        return tokens

# Example usage
source = "if (x >= 10) { y = x * 2; }"
lexer = Lexer(source)
for tok in lexer.tokenize():
    print(f"{tok.type:12} '{tok.value}'")</code></pre>

                    <h3 id="regular-expressions">Regular Expressions</h3>
                    
                    <p>Lexers use <strong>regular expressions</strong> to define token patterns. Each token type has a regex that describes all valid lexemes of that type.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-asterisk me-2"></i>Regular Expression Patterns for C-like Tokens</h4>
                        <div class="content">
                            <table class="table table-striped">
                                <thead>
                                    <tr><th>Token</th><th>Regex</th><th>Examples</th></tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Integer</td>
                                        <td><code>[0-9]+</code></td>
                                        <td><code>0</code>, <code>42</code>, <code>12345</code></td>
                                    </tr>
                                    <tr>
                                        <td>Float</td>
                                        <td><code>[0-9]+\.[0-9]+</code></td>
                                        <td><code>3.14</code>, <code>0.5</code></td>
                                    </tr>
                                    <tr>
                                        <td>Hex Int</td>
                                        <td><code>0[xX][0-9a-fA-F]+</code></td>
                                        <td><code>0xFF</code>, <code>0x1a2B</code></td>
                                    </tr>
                                    <tr>
                                        <td>Identifier</td>
                                        <td><code>[a-zA-Z_][a-zA-Z0-9_]*</code></td>
                                        <td><code>count</code>, <code>_temp</code>, <code>myVar2</code></td>
                                    </tr>
                                    <tr>
                                        <td>String</td>
                                        <td><code>"([^"\\]|\\.)*"</code></td>
                                        <td><code>"hello"</code>, <code>"a\nb"</code></td>
                                    </tr>
                                    <tr>
                                        <td>Char</td>
                                        <td><code>'([^'\\]|\\.)'</code></td>
                                        <td><code>'a'</code>, <code>'\n'</code>, <code>'\0'</code></td>
                                    </tr>
                                    <tr>
                                        <td>Line Comment</td>
                                        <td><code>//.*</code></td>
                                        <td><code>// comment</code></td>
                                    </tr>
                                    <tr>
                                        <td>Block Comment</td>
                                        <td><code>/\*[\s\S]*?\*/</code></td>
                                        <td><code>/* multi\nline */</code></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Longest Match Rule:</strong> When multiple patterns could match at the same position, the lexer chooses the <em>longest</em> match. This is why <code>>=</code> matches as one token (RELOP) instead of two (<code>></code> followed by <code>=</code>). Keywords must be checked <em>before</em> identifiers, or <code>if</code> would match as an identifier.
                    </div>

                </div>

                <!-- Parsing Section -->
                <div id="parsing" class="blog-content mt-5">
                    <h2><i class="fas fa-project-diagram me-2 text-teal"></i>Parsing</h2>
                    
                    <p>The <strong>parser</strong> (syntax analyzer) takes the stream of tokens from the lexer and builds a structured representation—typically a <strong>parse tree</strong> or <strong>abstract syntax tree (AST)</strong>. The parser checks that the token sequence follows the language's grammar rules.</p>

                    <h3 id="context-free-grammars">Context-Free Grammars</h3>
                    
                    <p>Parsers are built around <strong>context-free grammars (CFGs)</strong>, which define the legal structure of programs using production rules.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-sitemap me-2"></i>Grammar for Simple Expressions</h4>
                        <div class="content">
<pre class="language-text"><code>// BNF (Backus-Naur Form) Notation
// Non-terminals: expr, term, factor
// Terminals: NUMBER, IDENTIFIER, '+', '-', '*', '/', '(', ')'

Grammar Rules:
══════════════════════════════════════════════════════════════
expr    → expr '+' term        // Addition
        | expr '-' term        // Subtraction
        | term                 // Just a term

term    → term '*' factor      // Multiplication
        | term '/' factor      // Division
        | factor               // Just a factor

factor  → NUMBER               // Numeric literal
        | IDENTIFIER           // Variable
        | '(' expr ')'         // Parenthesized expression
══════════════════════════════════════════════════════════════

Example: Parse "3 + 4 * 5"

              expr
             / | \
          expr '+' term
           |       / | \
         term   term '*' factor
           |      |       |
        factor  factor    5
           |      |
           3      4

The tree structure encodes operator precedence:
• Multiplication binds tighter (deeper in tree)
• 3 + (4 * 5) = 23, not (3 + 4) * 5 = 35</code></pre>
                        </div>
                    </div>

                    <div class="highlight-box highlight-navy">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Left Recursion Problem:</strong> The grammar above uses <em>left recursion</em> (<code>expr → expr '+' term</code>), which works for bottom-up parsers but causes infinite loops in top-down parsers. For LL parsers, we must eliminate left recursion by rewriting the grammar.
                    </div>

                    <h3 id="top-down-parsing">Top-Down Parsing</h3>
                    
                    <p><strong>Top-down parsing</strong> starts at the root (start symbol) and works down to the leaves (tokens). The most common type is <strong>recursive descent parsing</strong>, where each grammar rule becomes a function.</p>

<pre class="language-python"><code># Recursive Descent Parser for Arithmetic Expressions
# Grammar (right-recursive, suitable for LL parsing):
#   expr   → term (('+' | '-') term)*
#   term   → factor (('*' | '/') factor)*
#   factor → NUMBER | IDENTIFIER | '(' expr ')'

class RecursiveDescentParser:
    def __init__(self, tokens):
        self.tokens = tokens
        self.pos = 0
    
    def current_token(self):
        return self.tokens[self.pos] if self.pos &lt; len(self.tokens) else None
    
    def eat(self, expected_type):
        """Consume token if it matches expected type"""
        token = self.current_token()
        if token and token.type == expected_type:
            self.pos += 1
            return token
        raise SyntaxError(f"Expected {expected_type}, got {token}")
    
    def parse(self):
        """Parse and return AST"""
        ast = self.expr()
        if self.current_token().type != 'EOF':
            raise SyntaxError("Unexpected tokens after expression")
        return ast
    
    def expr(self):
        """expr → term (('+' | '-') term)*"""
        node = self.term()
        while self.current_token() and self.current_token().type == 'BINOP':
            if self.current_token().value in ('+', '-'):
                op = self.eat('BINOP')
                right = self.term()
                node = BinaryOp(op.value, node, right)
            else:
                break
        return node
    
    def term(self):
        """term → factor (('*' | '/') factor)*"""
        node = self.factor()
        while self.current_token() and self.current_token().type == 'BINOP':
            if self.current_token().value in ('*', '/'):
                op = self.eat('BINOP')
                right = self.factor()
                node = BinaryOp(op.value, node, right)
            else:
                break
        return node
    
    def factor(self):
        """factor → NUMBER | IDENTIFIER | '(' expr ')'"""
        token = self.current_token()
        if token.type == 'INTEGER':
            self.eat('INTEGER')
            return Number(int(token.value))
        elif token.type == 'IDENTIFIER':
            self.eat('IDENTIFIER')
            return Variable(token.value)
        elif token.type == 'LPAREN':
            self.eat('LPAREN')
            node = self.expr()
            self.eat('RPAREN')
            return node
        raise SyntaxError(f"Unexpected token: {token}")

# AST Node classes
class BinaryOp:
    def __init__(self, op, left, right):
        self.op, self.left, self.right = op, left, right
    def __repr__(self):
        return f"({self.left} {self.op} {self.right})"

class Number:
    def __init__(self, value): self.value = value
    def __repr__(self): return str(self.value)

class Variable:
    def __init__(self, name): self.name = name
    def __repr__(self): return self.name</code></pre>

                    <h3 id="bottom-up-parsing">Bottom-Up Parsing</h3>
                    
                    <p><strong>Bottom-up parsing</strong> starts with the tokens (leaves) and works up to the start symbol (root). The most common types are <strong>LR parsers</strong> (LR(0), SLR, LALR, LR(1)), which are more powerful than LL parsers and can handle left-recursive grammars directly.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-layer-group me-2"></i>Shift-Reduce Parsing</h4>
                        <div class="content">
<pre class="language-text"><code>Parse "3 + 4 * 5" using Shift-Reduce:
══════════════════════════════════════════════════════════════
Step    Stack               Input            Action
──────────────────────────────────────────────────────────────
1       $                   3 + 4 * 5 $      Shift
2       $ 3                 + 4 * 5 $        Reduce: factor → 3
3       $ factor            + 4 * 5 $        Reduce: term → factor
4       $ term              + 4 * 5 $        Reduce: expr → term
5       $ expr              + 4 * 5 $        Shift
6       $ expr +            4 * 5 $          Shift
7       $ expr + 4          * 5 $            Reduce: factor → 4
8       $ expr + factor     * 5 $            Reduce: term → factor
9       $ expr + term       * 5 $            Shift (precedence!)
10      $ expr + term *     5 $              Shift
11      $ expr + term * 5   $                Reduce: factor → 5
12      $ expr + term * factor $             Reduce: term → term * factor
13      $ expr + term       $                Reduce: expr → expr + term
14      $ expr              $                Accept!
══════════════════════════════════════════════════════════════

Key insight at step 9: We SHIFT '*' instead of reducing "expr + term"
because multiplication has higher precedence than addition.</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-balance-scale me-2"></i>Parser Comparison</h4>
                        <div class="content">
                            <table class="table table-striped">
                                <thead>
                                    <tr><th>Aspect</th><th>LL (Top-Down)</th><th>LR (Bottom-Up)</th></tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Direction</td>
                                        <td>Start symbol → tokens</td>
                                        <td>Tokens → start symbol</td>
                                    </tr>
                                    <tr>
                                        <td>Left Recursion</td>
                                        <td>Must eliminate</td>
                                        <td>Handles directly</td>
                                    </tr>
                                    <tr>
                                        <td>Power</td>
                                        <td>Less powerful</td>
                                        <td>More powerful</td>
                                    </tr>
                                    <tr>
                                        <td>Error Messages</td>
                                        <td>Often better</td>
                                        <td>Can be cryptic</td>
                                    </tr>
                                    <tr>
                                        <td>Implementation</td>
                                        <td>Hand-written (easy)</td>
                                        <td>Usually generated (Bison, yacc)</td>
                                    </tr>
                                    <tr>
                                        <td>Examples</td>
                                        <td>GCC (GIMPLE), Go</td>
                                        <td>GCC (C/C++), PostgreSQL</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>

                <!-- Semantic Analysis Section -->
                <div id="semantic-analysis" class="blog-content mt-5">
                    <h2><i class="fas fa-search me-2 text-teal"></i>Semantic Analysis</h2>
                    
                    <p><strong>Semantic analysis</strong> checks that the program is meaningful—not just syntactically correct. A sentence like "The table ate the conversation" is grammatically correct but semantically nonsensical. Similarly, code like <code>int x = "hello";</code> parses fine but violates type rules.</p>

                    <h3 id="ast-construction">AST Construction</h3>
                    
                    <p>The <strong>Abstract Syntax Tree (AST)</strong> is a simplified version of the parse tree that removes syntactic details (parentheses, semicolons) and focuses on the essential structure.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-tree me-2"></i>Parse Tree vs AST</h4>
                        <div class="content">
<pre class="language-text"><code>Source: x = 3 + 4 * 5;

Parse Tree (concrete):                AST (abstract):
═══════════════════════════════       ═══════════════════════════
       statement                            Assign
       /   |   \                            /    \
   expr    =   expr ;                      x      +
    |          / | \                           /    \
   ID        expr + term                      3      *
  (x)        |      /|\                           /    \
           term  term * factor                   4      5
            |     |      |
         factor factor  NUM(5)
           |      |
         NUM(3) NUM(4)

AST benefits:
• Simpler structure (no redundant nodes)
• Directly represents computation
• Easier to analyze and transform</code></pre>
                        </div>
                    </div>

<pre class="language-python"><code># AST Node Definitions for a Simple Language
from dataclasses import dataclass
from typing import List, Optional

@dataclass
class AST:
    """Base class for all AST nodes"""
    pass

@dataclass
class Program(AST):
    declarations: List[AST]

@dataclass
class FunctionDecl(AST):
    name: str
    params: List['Parameter']
    return_type: str
    body: 'Block'

@dataclass
class Parameter(AST):
    name: str
    type: str

@dataclass
class Block(AST):
    statements: List[AST]

@dataclass
class VarDecl(AST):
    name: str
    type: str
    initializer: Optional[AST]

@dataclass
class Assign(AST):
    target: str
    value: AST

@dataclass
class BinaryOp(AST):
    op: str
    left: AST
    right: AST

@dataclass
class Call(AST):
    function: str
    arguments: List[AST]

@dataclass
class If(AST):
    condition: AST
    then_branch: AST
    else_branch: Optional[AST]

@dataclass
class While(AST):
    condition: AST
    body: AST

@dataclass
class Return(AST):
    value: Optional[AST]

@dataclass
class Num(AST):
    value: int

@dataclass
class Var(AST):
    name: str</code></pre>

                    <h3 id="type-checking">Type Checking</h3>
                    
                    <p><strong>Type checking</strong> ensures that operations are applied to compatible types. It catches errors like adding a string to an integer or calling a function with wrong argument types.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-check-circle me-2"></i>Type Checking Rules</h4>
                        <div class="content">
<pre class="language-text"><code>Type Inference Rules (simplified):
══════════════════════════════════════════════════════════════

1. Literals:
   42        : int
   3.14      : float
   "hello"   : string
   true      : bool

2. Variables:
   Look up type in symbol table
   Error if not declared

3. Binary Operators:
   int + int       → int
   int + float     → float (implicit conversion)
   string + string → string (concatenation)
   int + string    → ERROR!

4. Relational Operators:
   int &lt; int       → bool
   float &lt; float   → bool
   int == float    → bool (after conversion)

5. Function Calls:
   - Check argument count matches parameter count
   - Check each argument type matches parameter type
   - Return type is function's declared return type

6. Assignments:
   Target type must be compatible with value type
   int x = 5;      → OK
   int x = "hi";   → ERROR!

7. Control Flow:
   if (condition)  → condition must be bool
   while (cond)    → condition must be bool</code></pre>
                        </div>
                    </div>

<pre class="language-python"><code># Type Checker Implementation
class TypeChecker:
    def __init__(self):
        self.symbol_table = {}  # name → type
        self.function_table = {}  # name → (param_types, return_type)
    
    def check(self, node):
        """Visit AST node and return its type"""
        method = f'check_{type(node).__name__}'
        return getattr(self, method)(node)
    
    def check_Num(self, node):
        return 'int'
    
    def check_Var(self, node):
        if node.name not in self.symbol_table:
            raise TypeError(f"Undefined variable: {node.name}")
        return self.symbol_table[node.name]
    
    def check_BinaryOp(self, node):
        left_type = self.check(node.left)
        right_type = self.check(node.right)
        
        if node.op in ('+', '-', '*', '/'):
            if left_type == 'int' and right_type == 'int':
                return 'int'
            elif left_type in ('int', 'float') and right_type in ('int', 'float'):
                return 'float'
            else:
                raise TypeError(f"Cannot apply {node.op} to {left_type} and {right_type}")
        
        elif node.op in ('&lt;', '>', '&lt;=', '>=', '==', '!='):
            if left_type in ('int', 'float') and right_type in ('int', 'float'):
                return 'bool'
            raise TypeError(f"Cannot compare {left_type} with {right_type}")
        
        raise TypeError(f"Unknown operator: {node.op}")
    
    def check_VarDecl(self, node):
        if node.initializer:
            init_type = self.check(node.initializer)
            if not self.compatible(node.type, init_type):
                raise TypeError(f"Cannot initialize {node.type} with {init_type}")
        self.symbol_table[node.name] = node.type
        return None
    
    def check_Assign(self, node):
        var_type = self.symbol_table.get(node.target)
        if var_type is None:
            raise TypeError(f"Undefined variable: {node.target}")
        value_type = self.check(node.value)
        if not self.compatible(var_type, value_type):
            raise TypeError(f"Cannot assign {value_type} to {var_type}")
        return var_type
    
    def compatible(self, target, source):
        if target == source:
            return True
        if target == 'float' and source == 'int':
            return True  # Allow int → float
        return False</code></pre>

                    <h3 id="symbol-tables">Symbol Tables</h3>
                    
                    <p>The <strong>symbol table</strong> tracks all identifiers (variables, functions, types) and their attributes (type, scope, memory location). It supports nested scopes—variables in inner scopes can shadow outer ones.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-database me-2"></i>Scoped Symbol Table</h4>
                        <div class="content">
<pre class="language-text"><code>Source Code:
══════════════════════════════════════════════════════════════
int x = 10;                    // global scope

void foo(int y) {              // foo's scope
    int z = x + y;             // z is local, x is global
    if (y > 0) {               // nested scope
        int x = 5;             // shadows global x!
        z = x + y;             // uses local x (5)
    }
    z = x + y;                 // uses global x (10)
}

Symbol Table with Scope Chain:
══════════════════════════════════════════════════════════════
┌───────────────────────────────────────────────────────────┐
│ GLOBAL SCOPE                                               │
│   x: int (address: 0x1000)                                 │
│   foo: function(int) → void                                │
└──────────────────────────┬────────────────────────────────┘
                           │ parent
┌──────────────────────────▼────────────────────────────────┐
│ FOO SCOPE                                                  │
│   y: int (parameter, offset: +16)                          │
│   z: int (local, offset: -8)                               │
└──────────────────────────┬────────────────────────────────┘
                           │ parent
┌──────────────────────────▼────────────────────────────────┐
│ IF-BLOCK SCOPE                                             │
│   x: int (local, offset: -16)  ← shadows global x!        │
└───────────────────────────────────────────────────────────┘

Lookup "x" in IF-BLOCK:
1. Check IF-BLOCK scope → Found! Return local x
2. (Would check FOO scope if not found)
3. (Would check GLOBAL scope if not found)</code></pre>
                        </div>
                    </div>

<pre class="language-python"><code># Scoped Symbol Table with Nesting
class Scope:
    def __init__(self, parent=None, name="global"):
        self.symbols = {}    # name → Symbol
        self.parent = parent
        self.name = name
    
    def define(self, name, symbol):
        """Add symbol to current scope"""
        if name in self.symbols:
            raise NameError(f"Redefinition of '{name}' in {self.name} scope")
        self.symbols[name] = symbol
    
    def lookup(self, name, local_only=False):
        """Look up symbol, searching parent scopes"""
        if name in self.symbols:
            return self.symbols[name]
        if local_only or self.parent is None:
            return None
        return self.parent.lookup(name)

class Symbol:
    def __init__(self, name, type, kind, scope_level, offset=None):
        self.name = name
        self.type = type          # int, float, function, etc.
        self.kind = kind          # variable, parameter, function
        self.scope_level = scope_level
        self.offset = offset      # stack offset for locals

class SymbolTable:
    def __init__(self):
        self.current_scope = Scope(name="global")
        self.scope_level = 0
    
    def enter_scope(self, name):
        """Create new nested scope"""
        self.scope_level += 1
        self.current_scope = Scope(self.current_scope, name)
    
    def exit_scope(self):
        """Return to parent scope"""
        self.scope_level -= 1
        self.current_scope = self.current_scope.parent
    
    def define(self, name, type, kind, offset=None):
        symbol = Symbol(name, type, kind, self.scope_level, offset)
        self.current_scope.define(name, symbol)
        return symbol
    
    def lookup(self, name):
        return self.current_scope.lookup(name)</code></pre>

                </div>

                <!-- Code Generation Section -->
                <div id="code-generation" class="blog-content mt-5">
                    <h2><i class="fas fa-cogs me-2 text-teal"></i>Code Generation</h2>
                    
                    <p><strong>Code generation</strong> transforms the validated AST into lower-level code—either an intermediate representation (IR) for further optimization, or directly into assembly/machine code.</p>

                    <h3 id="intermediate-representation">Intermediate Representation</h3>
                    
                    <p>Most modern compilers use an <strong>Intermediate Representation (IR)</strong>—a language-independent form that's easier to analyze and optimize than source code or machine code.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-exchange-alt me-2"></i>Three-Address Code (TAC)</h4>
                        <div class="content">
<pre class="language-text"><code>Source: x = a + b * c - d / e;

Three-Address Code (each instruction has at most 3 operands):
══════════════════════════════════════════════════════════════
t1 = b * c       // temp1 = multiply
t2 = d / e       // temp2 = divide
t3 = a + t1      // temp3 = add
t4 = t3 - t2     // temp4 = subtract
x = t4           // assign result

Each TAC instruction:
  result = operand1 OP operand2
  result = operand
  result = OP operand    (unary)

Common TAC Instructions:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Assignment:    x = y
• Binary op:     t = x + y, t = x * y, etc.
• Unary op:      t = -x, t = !x
• Copy:          t = x
• Conditional:   if x goto L
• Unconditional: goto L
• Labels:        L:
• Call:          call f, n (call function f with n args)
• Return:        return x</code></pre>
                        </div>
                    </div>

                    <h4>LLVM IR Example</h4>
                    
<pre class="language-bash"><code># Compile C to LLVM IR
clang -S -emit-llvm hello.c -o hello.ll
cat hello.ll</code></pre>

<pre class="language-text"><code>; LLVM IR for: int square(int x) { return x * x; }
define i32 @square(i32 %x) {
entry:
  %mul = mul nsw i32 %x, %x
  ret i32 %mul
}

; LLVM IR for: int sum = a + b * c;
; Assume: a, b, c are i32 variables
%t1 = mul i32 %b, %c        ; t1 = b * c
%sum = add i32 %a, %t1      ; sum = a + t1

; LLVM IR types:
; i1   = 1-bit integer (boolean)
; i8   = 8-bit integer (char/byte)
; i32  = 32-bit integer
; i64  = 64-bit integer
; float, double = floating point
; ptr  = pointer (opaque in modern LLVM)</code></pre>

                    <h3 id="instruction-selection">Instruction Selection</h3>
                    
                    <p><strong>Instruction selection</strong> maps IR operations to target machine instructions. This involves choosing the best instruction for each operation, considering what the CPU actually supports.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-microchip me-2"></i>IR to x86-64 Assembly</h4>
                        <div class="content">
<pre class="language-text"><code>TAC:                          x86-64 Assembly:
═══════════════════════════   ═══════════════════════════════
t1 = b * c                    movl    b(%rip), %eax
                              imull   c(%rip), %eax
                              movl    %eax, -4(%rbp)  # t1

t2 = a + t1                   movl    a(%rip), %eax
                              addl    -4(%rbp), %eax
                              movl    %eax, -8(%rbp)  # t2

x = t2                        movl    -8(%rbp), %eax
                              movl    %eax, x(%rip)

Special cases - instruction selection finds efficient patterns:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
t = x * 2         →  shl  $1, %eax        (shift left = multiply by 2)
t = x * 8         →  shl  $3, %eax        (shift left 3 = multiply by 8)
t = x / 4         →  sar  $2, %eax        (shift right = divide by 4)
t = x % 8         →  and  $7, %eax        (AND mask for power-of-2 mod)
t = x * 5         →  lea  (%rax,%rax,4), %eax  (x + 4x in one instr!)
t = -x            →  neg  %eax            (negate)</code></pre>
                        </div>
                    </div>

                    <h3 id="register-allocation">Register Allocation</h3>
                    
                    <p><strong>Register allocation</strong> is one of the most critical (and complex) compiler phases. The goal: map an unlimited number of IR temporaries to a limited number of CPU registers, minimizing slow memory accesses (spills).</p>

                    <div class="highlight-box highlight-crimson">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>The Challenge:</strong> x86-64 has only ~16 general-purpose registers, but programs can have thousands of variables and temporaries. Variables that are "live" at the same time (both in use) cannot share a register.
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-network-wired me-2"></i>Register Allocation via Graph Coloring</h4>
                        <div class="content">
<pre class="language-text"><code>Step 1: Build Interference Graph
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Variables that are "live" at the same time interfere.
They cannot share a register.

t1 = a + b    // t1 born
t2 = t1 * c   // t1 still live, t2 born
t3 = t2 - d   // t1 dead, t2 live, t3 born
x = t3        // only t3 live

Live ranges:
t1: ████░░░░░░
t2: ░░██████░░
t3: ░░░░░░████

Interference graph:
    t1 ──── t2     (t1 and t2 live together at line 2)
    t2 ──── t3     (t2 and t3 live together at line 3)
    (t1 and t3 don't interfere)


Step 2: Graph Coloring (K registers)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Assign K colors (registers) so no adjacent nodes share a color.

With K=2 registers (eax, ebx):
    t1 = eax
    t2 = ebx    (can't be eax - interferes with t1)
    t3 = eax    (can't be ebx - interferes with t2, but eax is OK!)

If graph has &lt; K colors: No spills needed
If graph needs > K colors: Must "spill" some variables to memory

Spilling Strategy:
1. Pick variable to spill (heuristic: least frequently used)
2. Before each use: load from memory
3. After each definition: store to memory
4. Remove from graph, try coloring again</code></pre>
                        </div>
                    </div>

<pre class="language-python"><code># Simplified Register Allocator (Linear Scan)
class RegisterAllocator:
    def __init__(self, num_registers):
        self.num_registers = num_registers
        self.available = list(range(num_registers))  # Free registers
        self.assignment = {}  # variable → register
        self.spilled = set()  # Variables spilled to stack
    
    def allocate(self, live_intervals):
        """
        Linear scan allocation.
        live_intervals: [(var, start, end), ...] sorted by start
        """
        active = []  # Currently active intervals
        
        for var, start, end in live_intervals:
            # Expire old intervals (end before current start)
            active = [(v, s, e) for v, s, e in active if e > start]
            
            # Return registers from expired intervals
            expired_vars = set(self.assignment.keys()) - {v for v, _, _ in active}
            for v in expired_vars:
                if v in self.assignment:
                    self.available.append(self.assignment.pop(v))
            
            if self.available:
                # Assign register to new variable
                reg = self.available.pop()
                self.assignment[var] = reg
                active.append((var, start, end))
            else:
                # No registers available - spill longest-living
                spill_candidate = max(active, key=lambda x: x[2])
                if spill_candidate[2] > end:
                    # Spill the one that lives longest
                    self.spilled.add(spill_candidate[0])
                    reg = self.assignment.pop(spill_candidate[0])
                    self.assignment[var] = reg
                    active.remove(spill_candidate)
                    active.append((var, start, end))
                else:
                    # Spill current variable
                    self.spilled.add(var)
        
        return self.assignment, self.spilled</code></pre>

                </div>

                <!-- Optimization Section -->
                <div id="optimization" class="blog-content mt-5">
                    <h2><i class="fas fa-bolt me-2 text-teal"></i>Optimization</h2>
                    
                    <p>Compiler <strong>optimizations</strong> transform code to make it faster, smaller, or more power-efficient—without changing its behavior. Modern compilers apply dozens of optimizations, from simple local improvements to sophisticated whole-program transformations.</p>

                    <div class="highlight-box">
                        <i class="fas fa-tachometer-alt me-2"></i>
                        <strong>GCC/Clang Optimization Levels:</strong>
                        <ul class="mb-0 mt-2">
                            <li><code>-O0</code>: No optimization (fastest compile, slowest code)</li>
                            <li><code>-O1</code>: Basic optimizations (quick win)</li>
                            <li><code>-O2</code>: Most optimizations (good balance)</li>
                            <li><code>-O3</code>: Aggressive optimization (may increase code size)</li>
                            <li><code>-Os</code>: Optimize for size</li>
                            <li><code>-Ofast</code>: -O3 + unsafe math optimizations</li>
                        </ul>
                    </div>

                    <h3 id="local-optimization">Local Optimization</h3>
                    
                    <p><strong>Local optimizations</strong> operate within a single basic block (a straight-line sequence of code with no branches). They're simple but effective.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-compress me-2"></i>Common Local Optimizations</h4>
                        <div class="content">
<pre class="language-text"><code>1. Constant Folding
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before: x = 3 + 4 * 5;
After:  x = 23;           // Computed at compile time

2. Constant Propagation
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before: x = 5;
        y = x + 3;
        z = x * y;
After:  x = 5;
        y = 8;            // 5 + 3
        z = 40;           // 5 * 8

3. Algebraic Simplification
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
x + 0     →  x           x * 1     →  x
x - 0     →  x           x * 0     →  0
x * 2     →  x + x       x / 1     →  x
x * 2^n   →  x &lt;&lt; n      x / 2^n   →  x >> n (for unsigned)

4. Common Subexpression Elimination (CSE)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before: a = b + c;
        d = b + c;        // Same computation!
After:  t = b + c;
        a = t;
        d = t;            // Reuse computed value

5. Dead Code Elimination
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before: x = 5;
        y = x + 3;        // y never used!
        z = x * 2;
        return z;
After:  x = 5;
        z = x * 2;
        return z;         // y computation removed

6. Strength Reduction
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before: x * 15
After:  (x &lt;&lt; 4) - x      // 16x - x = 15x (shifts are faster)</code></pre>
                        </div>
                    </div>

                    <h3 id="global-optimization">Global Optimization</h3>
                    
                    <p><strong>Global optimizations</strong> operate across multiple basic blocks, requiring <strong>data-flow analysis</strong> to track how values flow through the program.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-project-diagram me-2"></i>Global Data-Flow Analysis</h4>
                        <div class="content">
<pre class="language-text"><code>Control Flow Graph (CFG):
══════════════════════════════════════════════════════════════
            ┌─────────────┐
            │ Entry:      │
            │ x = 5       │
            └──────┬──────┘
                   │
            ┌──────▼──────┐
            │ if (cond)   │
            └──────┬──────┘
                   │
        ┌──────────┴──────────┐
        ▼                     ▼
┌───────────────┐     ┌───────────────┐
│ Block A:      │     │ Block B:      │
│ y = x + 1     │     │ y = x + 2     │
└───────┬───────┘     └───────┬───────┘
        │                     │
        └──────────┬──────────┘
                   ▼
            ┌─────────────┐
            │ Exit:       │
            │ z = x + y   │  ← x is 5 in both paths!
            └─────────────┘     (global constant prop)


Reaching Definitions Analysis:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
"Which definitions of x might reach this point?"

At Exit block:
  - Definition "x = 5" reaches (only definition of x)
  - Two definitions of y reach (from A or B)

This enables:
  - Global CSE (if same expression computed on all paths)
  - Global constant propagation (if same value on all paths)
  - Dead code elimination (if value never used later)</code></pre>
                        </div>
                    </div>

                    <h3 id="loop-optimization">Loop Optimization</h3>
                    
                    <p><strong>Loop optimizations</strong> are crucial because programs spend most time in loops. Even small improvements inside a loop multiply by iteration count.</p>

                    <div class="experiment-card">
                        <h4><i class="fas fa-redo me-2"></i>Loop Optimization Techniques</h4>
                        <div class="content">
<pre class="language-text"><code>1. Loop-Invariant Code Motion (LICM)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before:                    After:
for (i = 0; i &lt; n; i++)    t = a * b;        // Moved out!
    x[i] = a * b + i;      for (i = 0; i &lt; n; i++)
                               x[i] = t + i;

a * b is loop-invariant (doesn't change in loop)


2. Strength Reduction in Loops
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before:                    After:
for (i = 0; i &lt; n; i++)    t = 0;
    x = i * 4;             for (i = 0; i &lt; n; i++) {
                               x = t;
                               t = t + 4;     // Add instead of multiply
                           }


3. Loop Unrolling
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before:                    After (4x unroll):
for (i = 0; i &lt; 100; i++)  for (i = 0; i &lt; 100; i += 4) {
    a[i] = b[i] + 1;           a[i]   = b[i]   + 1;
                               a[i+1] = b[i+1] + 1;
                               a[i+2] = b[i+2] + 1;
                               a[i+3] = b[i+3] + 1;
                           }

Benefits: Fewer branches, better instruction-level parallelism


4. Loop Vectorization (SIMD)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Before (scalar):           After (AVX2 vector):
for (i = 0; i &lt; n; i++)    for (i = 0; i &lt; n; i += 8) {
    c[i] = a[i] + b[i];        // Process 8 floats at once!
                               __m256 va = _mm256_load_ps(&amp;a[i]);
                               __m256 vb = _mm256_load_ps(&amp;b[i]);
                               __m256 vc = _mm256_add_ps(va, vb);
                               _mm256_store_ps(&amp;c[i], vc);
                           }

8x speedup (in theory) for float operations</code></pre>
                        </div>
                    </div>

                    <h4>Seeing Optimizations in Action</h4>
                    
<pre class="language-bash"><code># Compile with different optimization levels, compare assembly
gcc -O0 -S example.c -o example_O0.s
gcc -O2 -S example.c -o example_O2.s
gcc -O3 -S example.c -o example_O3.s

# Compare file sizes and instruction counts
wc -l example_O*.s
diff example_O0.s example_O2.s | head -50

# See what optimizations were applied
gcc -O2 -fopt-info example.c -o example

# LLVM: see optimization passes
clang -O2 -mllvm -print-after-all example.c 2>&gt;&amp;1 | less

# Godbolt Compiler Explorer (online)
# Visit godbolt.org - shows assembly in real-time!</code></pre>

                    <div class="highlight-box highlight-navy">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Optimization Trade-offs:</strong> More aggressive optimization means longer compile times and harder debugging (code doesn't match source). Use <code>-O0 -g</code> for development and <code>-O2</code> or <code>-O3</code> for production.
                    </div>

                    <h4>Exercises</h4>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-tasks me-2"></i>Hands-On Exercises</h4>
                        <div class="content">
                            <ol>
                                <li><strong>Build a Simple Lexer:</strong> Write a lexer for a calculator language supporting integers, +, -, *, /, parentheses. Test with expressions like "3 + 4 * (2 - 1)".</li>
                                <li><strong>Implement Recursive Descent:</strong> Build a parser for the same calculator language. Output an AST and evaluate it.</li>
                                <li><strong>Type Checker Challenge:</strong> Add type checking to your calculator—support both <code>int</code> and <code>float</code>. Handle implicit int→float conversion.</li>
                                <li><strong>Three-Address Code Generation:</strong> Extend your calculator to output TAC instead of directly evaluating. Assign temporary variables for intermediate results.</li>
                                <li><strong>Optimization Experiment:</strong> Write a C program with an obviously optimizable loop (e.g., loop-invariant multiplication). Compile with -O0 vs -O2 and compare the assembly.</li>
                                <li><strong>Godbolt Exploration:</strong> Use Compiler Explorer (godbolt.org) to see how different compilers (GCC, Clang, MSVC) optimize the same code differently.</li>
                            </ol>
                        </div>
                    </div>

                </div>

                <!-- Conclusion -->
                <div id="conclusion" class="blog-content mt-5">
                    <h2><i class="fas fa-flag-checkered me-2 text-teal"></i>Conclusion & Next Steps</h2>
                    
                    <p>You've now explored the fascinating world of compiler design—from tokenizing source code to generating optimized machine instructions. Compilers are among the most sophisticated software systems ever built, combining theory (formal languages, automata) with practical engineering (register allocation, optimization heuristics).</p>

                    <div class="highlight-box">
                        <i class="fas fa-brain me-2"></i>
                        <strong>Key Takeaways:</strong>
                        <ul class="mb-0 mt-2">
                            <li><strong>Lexical analysis</strong> converts characters to tokens using patterns (regex)</li>
                            <li><strong>Parsing</strong> builds structured trees from token streams using grammars</li>
                            <li><strong>Semantic analysis</strong> checks types, scopes, and program meaning</li>
                            <li><strong>Code generation</strong> maps AST to IR to machine instructions</li>
                            <li><strong>Register allocation</strong> is an NP-hard problem solved by heuristics</li>
                            <li><strong>Optimizations</strong> transform code for speed while preserving behavior</li>
                        </ul>
                    </div>

                    <div class="series-next">
                        <h4><i class="fas fa-arrow-right me-2"></i>Next in the Series</h4>
                        <p>In <a href="comp-arch-cpu-pipelining.html"><strong>Part 7: CPU Execution & Pipelining</strong></a>, we'll explore how CPUs actually execute the machine code compilers generate—the fetch-decode-execute cycle, pipeline stages, hazards, and branch prediction.</p>
                    </div>
                </div>

                <!-- Related Posts -->
                <div class="related-posts">
                    <h3><i class="fas fa-book me-2"></i>Continue the Computer Architecture & OS Series</h3>
                    <div class="related-post-item">
                        <h5>Part 5: Assemblers, Linkers & Loaders</h5>
                        <p>Object files, ELF format, static and dynamic linking.</p>
                        <a href="comp-arch-linkers-loaders.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    <div class="related-post-item">
                        <h5>Part 7: CPU Execution & Pipelining</h5>
                        <p>Fetch-decode-execute cycle, pipeline stages, hazards, and branch prediction.</p>
                        <a href="comp-arch-cpu-pipelining.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                    <div class="related-post-item">
                        <h5>Part 3: Instruction Set Architecture (ISA)</h5>
                        <p>RISC vs CISC, instruction formats, addressing modes, x86 vs ARM.</p>
                        <a href="comp-arch-isa.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.</p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            </div>
            <hr class="bg-secondary">
            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small"><i class="fas fa-icons me-2"></i>Icons from <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a></p>
                    <p class="small mt-3">
                        <a href="/" class="text-light text-decoration-none">Home</a> | 
                        <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | 
                        <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">Enjoying this content? <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Keep me caffeinated</a> to keep the pixels flowing!</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll-to-Top Button -->
    <button id="scrollToTop" class="scroll-to-top" title="Back to Top"><i class="fas fa-arrow-up"></i></button>

    <!-- Category Indicator -->
    <div id="categoryIndicator" class="category-indicator"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../../../js/main.js"></script>
    <script src="../../../js/cookie-consent.js"></script>
    
    <!-- Prism.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-asm6502.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

    <!-- Prism Theme Switcher -->
    <script>
        const themes = {
            'prism-theme': 'Tomorrow Night',
            'prism-default': 'Default',
            'prism-dark': 'Dark',
            'prism-twilight': 'Twilight',
            'prism-okaidia': 'Okaidia',
            'prism-solarizedlight': 'Solarized Light'
        };
        const savedTheme = localStorage.getItem('prism-theme') || 'prism-theme';
        function switchTheme(themeId) {
            Object.keys(themes).forEach(id => {
                const link = document.getElementById(id);
                if (link) link.disabled = true;
            });
            const selectedLink = document.getElementById(themeId);
            if (selectedLink) {
                selectedLink.disabled = false;
                localStorage.setItem('prism-theme', themeId);
            }
            document.querySelectorAll('div.code-toolbar select').forEach(dropdown => {
                dropdown.value = themeId;
            });
            setTimeout(() => Prism.highlightAll(), 10);
        }
        document.addEventListener('DOMContentLoaded', function() { switchTheme(savedTheme); });
        Prism.plugins.toolbar.registerButton('theme-switcher', function(env) {
            const select = document.createElement('select');
            select.setAttribute('aria-label', 'Select code theme');
            Object.keys(themes).forEach(themeId => {
                const option = document.createElement('option');
                option.value = themeId;
                option.textContent = themes[themeId];
                if (themeId === savedTheme) option.selected = true;
                select.appendChild(option);
            });
            select.addEventListener('change', function(e) { switchTheme(e.target.value); });
            return select;
        });
    </script>
</body>
</html>
