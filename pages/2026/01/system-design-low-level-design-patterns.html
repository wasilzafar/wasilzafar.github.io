<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="robots" content="index, archive" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Master Low-Level Design (LLD) fundamentals including object-oriented design, SOLID principles, design patterns, data modeling, and code architecture for building maintainable systems." />
    <meta name="author" content="Wasil Zafar" />
    <meta name="keywords" content="Low-Level Design, LLD, Object-Oriented Design, SOLID Principles, Design Patterns, Factory Pattern, Singleton, Observer, Data Modeling, Schema Design, Code Architecture" />
    <meta property="og:title" content="System Design Series Part 12: Low-Level Design (LLD) Fundamentals" />
    <meta property="og:description" content="Master Low-Level Design including OOD, SOLID principles, design patterns, and data modeling for maintainable systems." />
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2026-01-25" />
    <meta property="article:author" content="Wasil Zafar" />
    <meta property="article:section" content="Technology" />
    
    <title>System Design Series Part 12: Low-Level Design (LLD) Fundamentals - Wasil Zafar</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../../css/main.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" id="prism-theme" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" id="prism-default" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-dark.min.css" id="prism-dark" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" id="prism-twilight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" id="prism-okaidia" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-solarizedlight.min.css" id="prism-solarizedlight" disabled />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="../../../images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../images/favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../images/favicon_io/favicon-16x16.png">
    <link rel="manifest" href="../../../images/favicon_io/site.webmanifest">

    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('consent', 'default', { 'ad_storage': 'denied', 'ad_user_data': 'denied', 'ad_personalization': 'denied', 'analytics_storage': 'denied', 'region': ['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE'] });
        gtag('consent', 'default', { 'ad_storage': 'granted', 'ad_user_data': 'granted', 'ad_personalization': 'granted', 'analytics_storage': 'granted' });
        gtag('set', 'url_passthrough', true);
    </script>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PBS8M2JR');</script>

    <style>
        .blog-hero { background: linear-gradient(135deg, var(--color-navy) 0%, var(--color-blue) 100%); color: white; padding: 80px 0; }
        .blog-header { margin-bottom: 2rem; }
        .blog-meta { font-size: 0.95rem; color: var(--color-teal); margin-bottom: 1rem; display: flex; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .print-btn { background: var(--color-teal); color: white; border: none; padding: 0.4rem 1rem; border-radius: 4px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 0.5rem; }
        .print-btn:hover { background: var(--color-crimson); }
        @media print { .print-btn, nav, .navbar, footer, .back-link, .related-posts, .scroll-to-top, .toc-toggle-btn, .sidenav-toc, .sidenav-overlay { display: none !important; } }
        .blog-content { max-width: 900px; margin: 0 auto; font-size: 1.05rem; line-height: 1.8; color: #333; }
        .blog-content h2 { font-size: 1.8rem; font-weight: 700; margin-top: 2.5rem; margin-bottom: 1.5rem; color: var(--color-navy); border-bottom: 3px solid var(--color-teal); padding-bottom: 0.5rem; }
        .blog-content h3 { font-size: 1.3rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; color: var(--color-blue); }
        .blog-content h4 { font-size: 1.1rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.75rem; color: var(--color-crimson); }
        .blog-content p { margin-bottom: 1.2rem; text-align: justify; }
        .blog-content strong { color: var(--color-crimson); }
        .highlight-box { background: rgba(59, 151, 151, 0.1); border-left: 4px solid var(--color-teal); padding: 1.5rem; margin: 2rem 0; border-radius: 4px; }
        .experiment-card { background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; transition: all 0.3s ease; }
        .experiment-card:hover { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); transform: translateY(-2px); }
        .experiment-card h4 { color: var(--color-crimson); font-weight: 700; }
        pre[class*="language-"] { margin: 1.5rem 0; padding-top: 3rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); }
        .toc-toggle-btn { position: fixed; bottom: 2rem; left: 2rem; width: 50px; height: 50px; background: var(--color-teal); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; box-shadow: 0 4px 12px rgba(59, 151, 151, 0.4); transition: all 0.3s ease; z-index: 1049; display: flex; align-items: center; justify-content: center; }
        .toc-toggle-btn:hover { background: var(--color-crimson); transform: scale(1.1); }
        .sidenav-toc { height: calc(100% - 64px); width: 0; position: fixed; z-index: 1050; top: 64px; left: 0; background: linear-gradient(135deg, var(--color-navy) 0%, var(--color-blue) 100%); overflow-x: hidden; overflow-y: auto; transition: width 0.4s ease; padding-top: 30px; box-shadow: 4px 0 15px rgba(0, 0, 0, 0.3); }
        .sidenav-toc.open { width: 350px; }
        .sidenav-toc .toc-header { display: flex; align-items: center; justify-content: space-between; padding: 20px 30px; margin-bottom: 20px; border-bottom: 2px solid var(--color-teal); opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .sidenav-toc.open .toc-header { opacity: 1; visibility: visible; }
        .sidenav-toc .closebtn { font-size: 32px; color: white; background: transparent; border: none; cursor: pointer; }
        .sidenav-toc .closebtn:hover { color: var(--color-crimson); transform: rotate(90deg); }
        .sidenav-toc h3 { color: white; margin: 0; font-weight: 700; font-size: 1.3rem; flex-grow: 1; }
        .sidenav-toc ol { list-style: decimal; padding-left: 30px; color: rgba(255, 255, 255, 0.9); }
        .sidenav-toc ol li { margin-bottom: 8px; }
        .sidenav-toc ul { list-style-type: lower-alpha; padding-left: 30px; margin-top: 8px; }
        .sidenav-toc a { padding: 12px 30px; text-decoration: none; font-size: 0.95rem; color: rgba(255, 255, 255, 0.85); display: block; transition: all 0.3s ease; border-left: 4px solid transparent; }
        .sidenav-toc a:hover { color: white; background: rgba(59, 151, 151, 0.2); border-left-color: var(--color-teal); padding-left: 35px; }
        .sidenav-toc a.active { color: white; background: rgba(191, 9, 47, 0.3); border-left-color: var(--color-crimson); font-weight: 600; }
        .sidenav-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1049; }
        .sidenav-overlay.show { display: block; }
        @media (max-width: 768px) { .sidenav-toc.open { width: 280px; } .toc-toggle-btn { width: 45px; height: 45px; left: 1rem; bottom: 1rem; } }
        html { scroll-behavior: smooth; }
        .reading-time { display: inline-block; background: var(--color-crimson); color: white; padding: 0.3rem 0.8rem; border-radius: 4px; font-size: 0.9rem; }
        .back-link { display: inline-block; color: white; text-decoration: none; transition: all 0.3s ease; margin-bottom: 1rem; opacity: 0.9; }
        .back-link:hover { color: var(--color-teal); opacity: 1; transform: translateX(-5px); }
        .related-posts { background: #f8f9fa; border-radius: 8px; padding: 2rem; margin-top: 3rem; }
        .related-posts h3 { color: var(--color-navy); margin-bottom: 1.5rem; }
        .related-post-item { padding: 1rem; border-left: 3px solid var(--color-teal); margin-bottom: 1rem; }
        .related-post-item:hover { background: white; border-left-color: var(--color-crimson); }
        .related-post-item a { color: var(--color-blue); text-decoration: none; font-weight: 600; }
        .scroll-to-top { position: fixed; bottom: 2rem; right: 2rem; width: 50px; height: 50px; background: var(--color-teal); color: white; border: none; border-radius: 50%; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(59, 151, 151, 0.3); z-index: 999; }
        .scroll-to-top.show { opacity: 1; visibility: visible; }
        .scroll-to-top:hover { background: var(--color-crimson); transform: translateY(-3px); }
    </style>
</head>
<body>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PBS8M2JR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <div id="cookieBanner" class="light display-bottom" style="display: none;">
        <div class="content-wrap">
            <div class="msg-wrap"><p style="font-size: 14px; color: var(--color-navy);">We use cookies. See our <a href="/privacy-policy.html" style="color: var(--color-teal);">Privacy Policy</a>.</p></div>
            <div class="btn-wrap">
                <button id="cookieAccept" style="background: var(--color-teal); color: white;">Accept All</button>
                <button id="cookieReject" style="background: transparent; color: var(--color-navy); border: 2px solid var(--color-teal);">Reject All</button>
            </div>
        </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="/"><span class="gradient-text">Wasil Zafar</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#skills">Skills</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#certifications">Certifications</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#interests">Interests</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="blog-hero">
        <div class="container py-5">
            <div class="blog-header">
                <a href="/pages/categories/technology.html" class="back-link"><i class="fas fa-arrow-left me-2"></i>Back to Technology</a>
                <h1 class="display-4 fw-bold mb-3">System Design Series Part 12: Low-Level Design (LLD) Fundamentals</h1>
                <div class="blog-meta">
                    <span><i class="fas fa-calendar me-2"></i>January 25, 2026</span>
                    <span><i class="fas fa-user me-2"></i>Wasil Zafar</span>
                    <span class="reading-time"><i class="fas fa-clock me-1"></i>50 min read</span>
                    <button onclick="window.print()" class="print-btn"><i class="fas fa-print"></i> Print</button>
                </div>
                <p class="lead">Master Low-Level Design (LLD) fundamentals including object-oriented design principles, SOLID, design patterns (Factory, Singleton, Observer), data modeling, schema design, and building maintainable, modular code architectures.</p>
            </div>
        </div>
    </section>

    <button class="toc-toggle-btn" onclick="openNav()" title="Table of Contents"><i class="fas fa-list"></i></button>

    <div id="tocSidenav" class="sidenav-toc">
        <div class="toc-header">
            <h3><i class="fas fa-list me-2"></i>Table of Contents</h3>
            <button class="closebtn" onclick="closeNav()">&times;</button>
        </div>
        <ol>
            <li><a href="#introduction" onclick="closeNav()">LLD vs HLD</a>
                <ul>
                    <li><a href="#introduction" onclick="closeNav()">What is Low-Level Design?</a></li>
                    <li><a href="#hld-vs-lld" onclick="closeNav()">HLD vs LLD Comparison</a></li>
                </ul>
            </li>
            <li><a href="#ood" onclick="closeNav()">Object-Oriented Design</a>
                <ul>
                    <li><a href="#ood" onclick="closeNav()">OOD Fundamentals</a></li>
                    <li><a href="#encapsulation" onclick="closeNav()">Encapsulation & Abstraction</a></li>
                    <li><a href="#inheritance" onclick="closeNav()">Inheritance & Polymorphism</a></li>
                </ul>
            </li>
            <li><a href="#solid" onclick="closeNav()">SOLID Principles</a>
                <ul>
                    <li><a href="#solid" onclick="closeNav()">Single Responsibility</a></li>
                    <li><a href="#open-closed" onclick="closeNav()">Open/Closed Principle</a></li>
                    <li><a href="#liskov" onclick="closeNav()">Liskov Substitution</a></li>
                    <li><a href="#interface-segregation" onclick="closeNav()">Interface Segregation</a></li>
                    <li><a href="#dependency-inversion" onclick="closeNav()">Dependency Inversion</a></li>
                </ul>
            </li>
            <li><a href="#design-patterns" onclick="closeNav()">Design Patterns</a>
                <ul>
                    <li><a href="#creational" onclick="closeNav()">Creational Patterns</a></li>
                    <li><a href="#structural" onclick="closeNav()">Structural Patterns</a></li>
                    <li><a href="#behavioral" onclick="closeNav()">Behavioral Patterns</a></li>
                </ul>
            </li>
            <li><a href="#data-modeling" onclick="closeNav()">Data Modeling & Schema Design</a>
                <ul>
                    <li><a href="#data-modeling" onclick="closeNav()">Data Modeling Basics</a></li>
                    <li><a href="#normalization" onclick="closeNav()">Normalization vs Denormalization</a></li>
                    <li><a href="#indexing" onclick="closeNav()">Indexing Strategies</a></li>
                </ul>
            </li>
            <li><a href="#modularity" onclick="closeNav()">Code Modularity & Reusability</a></li>
            <li><a href="#next-steps" onclick="closeNav()">Next Steps</a></li>
        </ol>
    </div>

    <div id="tocOverlay" class="sidenav-overlay" onclick="closeNav()"></div>

    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">

                <div id="introduction" class="blog-content">
                    <h2><i class="fas fa-code me-2 text-teal"></i>Low-Level Design vs High-Level Design</h2>
                    
                    <div class="highlight-box" style="background: rgba(191, 9, 47, 0.1); border-left-color: var(--color-crimson);">
                        <i class="fas fa-book me-2"></i>
                        <strong>Series Navigation:</strong> This is Part 12 of the 15-part System Design Series. <a href="system-design-real-world-case-studies.html">Review Part 11: Real-World Case Studies</a> first.
                    </div>

                    <div class="experiment-card">
                        <h4><i class="fas fa-map-signs me-2"></i>Complete Series Navigation</h4>
                        <div class="meta mb-2">
                            <span class="badge bg-teal me-2">15-Part Series</span>
                            <span class="badge bg-crimson">System Design Mastery</span>
                        </div>
                        <div class="content">
                            <ol>
                                <li><a href="system-design-introduction.html">Introduction to System Design</a> - Fundamentals, why it matters, key concepts</li>
                                <li><a href="system-design-scalability-fundamentals.html">Scalability Fundamentals</a> - Horizontal vs vertical scaling, stateless design</li>
                                <li><a href="system-design-load-balancing-caching.html">Load Balancing & Caching</a> - Algorithms, Redis, CDN patterns</li>
                                <li><a href="system-design-database-sharding.html">Database Design & Sharding</a> - SQL vs NoSQL, replication, partitioning</li>
                                <li><a href="system-design-microservices-architecture.html">Microservices Architecture</a> - Service decomposition, API gateways, sagas</li>
                                <li><a href="system-design-api-rest-graphql.html">API Design & REST/GraphQL</a> - RESTful principles, GraphQL, gRPC</li>
                                <li><a href="system-design-message-queues-event-driven.html">Message Queues & Event-Driven</a> - Kafka, RabbitMQ, event sourcing</li>
                                <li><a href="system-design-cap-theorem-consistency.html">CAP Theorem & Consistency</a> - Distributed trade-offs, eventual consistency</li>
                                <li><a href="system-design-rate-limiting-security.html">Rate Limiting & Security</a> - Throttling algorithms, DDoS protection</li>
                                <li><a href="system-design-monitoring-observability.html">Monitoring & Observability</a> - Logging, metrics, distributed tracing</li>
                                <li><a href="system-design-real-world-case-studies.html">Real-World Case Studies</a> - URL shortener, chat, feed, video streaming</li>
                                <li><strong>Low-Level Design Patterns (This Guide)</strong> - SOLID, OOP patterns, data modeling</li>
                                <li><a href="system-design-distributed-systems-deep-dive.html">Distributed Systems Deep Dive</a> - Consensus, Paxos, Raft, coordination</li>
                                <li><a href="system-design-authentication-security.html">Authentication & Security</a> - OAuth, JWT, zero trust, compliance</li>
                                <li><a href="system-design-interview-preparation.html">Interview Preparation</a> - 4-step framework, estimation, strategies</li>
                            </ol>
                        </div>
                    </div>
                    
                    <p><strong>Low-Level Design (LLD)</strong> focuses on the internal workings of individual componentsâ€”class diagrams, method signatures, data structures, and algorithms. While High-Level Design (HLD) answers "what components do we need?", LLD answers "how do we implement each component?"</p>

                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> Great system architects understand both HLD and LLD. HLD without LLD leads to architectures that can't be implemented; LLD without HLD leads to code that doesn't fit together.
                    </div>
                </div>

                <div id="hld-vs-lld" class="blog-content mt-5">
                    <h3>HLD vs LLD Comparison</h3>
                    
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Aspect</th>
                                <th>High-Level Design (HLD)</th>
                                <th>Low-Level Design (LLD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Focus</strong></td>
                                <td>System architecture, components</td>
                                <td>Class design, methods, algorithms</td>
                            </tr>
                            <tr>
                                <td><strong>Abstraction</strong></td>
                                <td>High (boxes and arrows)</td>
                                <td>Low (code-level detail)</td>
                            </tr>
                            <tr>
                                <td><strong>Audience</strong></td>
                                <td>Architects, product managers</td>
                                <td>Developers, code reviewers</td>
                            </tr>
                            <tr>
                                <td><strong>Artifacts</strong></td>
                                <td>Architecture diagrams, data flow</td>
                                <td>Class diagrams, sequence diagrams</td>
                            </tr>
                            <tr>
                                <td><strong>Questions</strong></td>
                                <td>"How do components interact?"</td>
                                <td>"How is this class implemented?"</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="ood" class="blog-content mt-5">
                    <h2><i class="fas fa-cubes me-2 text-teal"></i>Object-Oriented Design Fundamentals</h2>
                    
                    <p>Object-Oriented Design (OOD) is the foundation of LLD. It focuses on organizing code into objects that contain both data and behavior. The four pillars of OOP are:</p>
                    
                    <ul>
                        <li><strong>Encapsulation:</strong> Hide internal state, expose controlled interfaces</li>
                        <li><strong>Abstraction:</strong> Focus on what objects do, not how they do it</li>
                        <li><strong>Inheritance:</strong> Reuse code through hierarchical relationships</li>
                        <li><strong>Polymorphism:</strong> Treat different types through common interfaces</li>
                    </ul>
                </div>

                <div id="encapsulation" class="blog-content mt-5">
                    <h3>Encapsulation & Abstraction</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-lock me-2"></i>Encapsulation Example</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Bad: Exposed internal state
class BankAccount:
    def __init__(self):
        self.balance = 0  # Public - anyone can modify!

# Good: Encapsulated with controlled access
class BankAccount:
    def __init__(self, initial_balance=0):
        self._balance = initial_balance  # Protected
        self._transactions = []
    
    @property
    def balance(self):
        """Read-only access to balance"""
        return self._balance
    
    def deposit(self, amount):
        """Controlled mutation with validation"""
        if amount <= 0:
            raise ValueError("Deposit amount must be positive")
        self._balance += amount
        self._transactions.append(('deposit', amount))
    
    def withdraw(self, amount):
        """Controlled mutation with business logic"""
        if amount <= 0:
            raise ValueError("Withdrawal amount must be positive")
        if amount > self._balance:
            raise InsufficientFundsError()
        self._balance -= amount
        self._transactions.append(('withdraw', amount))
    
    def get_statement(self):
        """Controlled access to transaction history"""
        return list(self._transactions)  # Return copy, not reference</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-layer-group me-2"></i>Abstraction Example</h4>
                        <div class="experiment-content">
<pre><code class="language-python">from abc import ABC, abstractmethod

# Abstract base class - defines WHAT, not HOW
class PaymentProcessor(ABC):
    @abstractmethod
    def process_payment(self, amount: float, currency: str) -> bool:
        """Process a payment. Implementation varies by provider."""
        pass
    
    @abstractmethod
    def refund(self, transaction_id: str) -> bool:
        """Refund a transaction."""
        pass

# Concrete implementations - define HOW
class StripeProcessor(PaymentProcessor):
    def __init__(self, api_key):
        self.stripe = StripeClient(api_key)
    
    def process_payment(self, amount, currency):
        return self.stripe.charges.create(
            amount=int(amount * 100),
            currency=currency
        )
    
    def refund(self, transaction_id):
        return self.stripe.refunds.create(charge=transaction_id)

class PayPalProcessor(PaymentProcessor):
    def __init__(self, client_id, secret):
        self.paypal = PayPalClient(client_id, secret)
    
    def process_payment(self, amount, currency):
        return self.paypal.create_payment(amount, currency)
    
    def refund(self, transaction_id):
        return self.paypal.refund_payment(transaction_id)

# Client code works with abstraction
def checkout(processor: PaymentProcessor, amount: float):
    """Works with ANY payment processor"""
    return processor.process_payment(amount, 'USD')</code></pre>
                        </div>
                    </div>
                </div>

                <div id="inheritance" class="blog-content mt-5">
                    <h3>Inheritance & Polymorphism</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-sitemap me-2"></i>Inheritance Hierarchy</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Base class
class Shape:
    def __init__(self, color):
        self.color = color
    
    def area(self):
        raise NotImplementedError("Subclasses must implement area()")
    
    def perimeter(self):
        raise NotImplementedError("Subclasses must implement perimeter()")
    
    def describe(self):
        return f"A {self.color} {self.__class__.__name__}"

# Derived classes
class Rectangle(Shape):
    def __init__(self, color, width, height):
        super().__init__(color)
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height
    
    def perimeter(self):
        return 2 * (self.width + self.height)

class Circle(Shape):
    def __init__(self, color, radius):
        super().__init__(color)
        self.radius = radius
    
    def area(self):
        return 3.14159 * self.radius ** 2
    
    def perimeter(self):
        return 2 * 3.14159 * self.radius

# Polymorphism: Same interface, different behavior
def total_area(shapes: list[Shape]) -> float:
    """Works with ANY shape - polymorphism in action"""
    return sum(shape.area() for shape in shapes)

# Usage
shapes = [
    Rectangle('red', 10, 5),
    Circle('blue', 7),
    Rectangle('green', 3, 3)
]
print(total_area(shapes))  # Works for all shapes</code></pre>
                        </div>
                    </div>
                </div>

                <div id="solid" class="blog-content mt-5">
                    <h2><i class="fas fa-check-double me-2 text-teal"></i>SOLID Principles</h2>
                    
                    <div class="highlight-box">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Key Insight:</strong> SOLID principles are the foundation of maintainable object-oriented code. They help create systems that are easy to extend, modify, and test.
                    </div>
                    
                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-user me-2"></i>S - Single Responsibility Principle</h4>
                        <div class="experiment-content">
                            <p><strong>Definition:</strong> A class should have only one reason to change.</p>
<pre><code class="language-python"># Bad: Multiple responsibilities
class UserManager:
    def create_user(self, data): ...
    def send_welcome_email(self, user): ...  # Email responsibility
    def generate_report(self, users): ...     # Reporting responsibility
    def save_to_database(self, user): ...     # Persistence responsibility

# Good: Single responsibility per class
class UserService:
    def __init__(self, repository, email_service):
        self.repository = repository
        self.email_service = email_service
    
    def create_user(self, data):
        user = User(**data)
        self.repository.save(user)
        self.email_service.send_welcome(user)
        return user

class UserRepository:
    def save(self, user): ...
    def find_by_id(self, id): ...
    def find_all(self): ...

class EmailService:
    def send_welcome(self, user): ...
    def send_password_reset(self, user): ...

class ReportGenerator:
    def generate_user_report(self, users): ...</code></pre>
                        </div>
                    </div>
                </div>

                <div id="open-closed" class="blog-content mt-5">
                    <h3>Open/Closed Principle</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-door-open me-2"></i>O - Open for Extension, Closed for Modification</h4>
                        <div class="experiment-content">
                            <p><strong>Definition:</strong> Software entities should be open for extension but closed for modification.</p>
<pre><code class="language-python"># Bad: Must modify class to add new discount types
class DiscountCalculator:
    def calculate(self, order, discount_type):
        if discount_type == 'percentage':
            return order.total * 0.1
        elif discount_type == 'fixed':
            return 10.0
        elif discount_type == 'bogo':  # Adding new type requires modification
            return order.total * 0.5

# Good: Open for extension via new classes
from abc import ABC, abstractmethod

class DiscountStrategy(ABC):
    @abstractmethod
    def calculate(self, order) -> float:
        pass

class PercentageDiscount(DiscountStrategy):
    def __init__(self, percent):
        self.percent = percent
    
    def calculate(self, order):
        return order.total * (self.percent / 100)

class FixedDiscount(DiscountStrategy):
    def __init__(self, amount):
        self.amount = amount
    
    def calculate(self, order):
        return min(self.amount, order.total)

class BuyOneGetOneDiscount(DiscountStrategy):
    def calculate(self, order):
        return order.total * 0.5

# Adding new discount = new class, no modification needed
class LoyaltyDiscount(DiscountStrategy):
    def calculate(self, order):
        return order.total * (order.customer.loyalty_years * 0.02)

# Calculator is closed for modification
class DiscountCalculator:
    def apply(self, order, strategy: DiscountStrategy):
        return strategy.calculate(order)</code></pre>
                        </div>
                    </div>
                </div>

                <div id="liskov" class="blog-content mt-5">
                    <h3>Liskov Substitution Principle</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-exchange-alt me-2"></i>L - Subtypes Must Be Substitutable</h4>
                        <div class="experiment-content">
                            <p><strong>Definition:</strong> Objects of a superclass should be replaceable with objects of its subclasses without breaking the application.</p>
<pre><code class="language-python"># Bad: Square violates LSP for Rectangle
class Rectangle:
    def __init__(self, width, height):
        self._width = width
        self._height = height
    
    def set_width(self, width):
        self._width = width
    
    def set_height(self, height):
        self._height = height
    
    def area(self):
        return self._width * self._height

class Square(Rectangle):  # Square IS-A Rectangle?
    def set_width(self, width):
        self._width = width
        self._height = width  # Violates expected behavior!
    
    def set_height(self, height):
        self._width = height
        self._height = height

# This breaks with Square:
def test_rectangle(rect: Rectangle):
    rect.set_width(5)
    rect.set_height(4)
    assert rect.area() == 20  # Fails for Square!

# Good: Separate hierarchy
class Shape(ABC):
    @abstractmethod
    def area(self) -> float:
        pass

class Rectangle(Shape):
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height

class Square(Shape):  # Square is NOT a subtype of Rectangle
    def __init__(self, side):
        self.side = side
    
    def area(self):
        return self.side ** 2</code></pre>
                        </div>
                    </div>
                </div>

                <div id="interface-segregation" class="blog-content mt-5">
                    <h3>Interface Segregation Principle</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-cut me-2"></i>I - Prefer Many Specific Interfaces</h4>
                        <div class="experiment-content">
                            <p><strong>Definition:</strong> Clients should not be forced to depend on interfaces they don't use.</p>
<pre><code class="language-python"># Bad: Fat interface
class Worker(ABC):
    @abstractmethod
    def work(self): pass
    
    @abstractmethod
    def eat(self): pass
    
    @abstractmethod
    def sleep(self): pass

class Robot(Worker):
    def work(self):
        print("Working...")
    
    def eat(self):
        pass  # Robots don't eat! Forced to implement.
    
    def sleep(self):
        pass  # Robots don't sleep! Forced to implement.

# Good: Segregated interfaces
class Workable(ABC):
    @abstractmethod
    def work(self): pass

class Eatable(ABC):
    @abstractmethod
    def eat(self): pass

class Sleepable(ABC):
    @abstractmethod
    def sleep(self): pass

class Human(Workable, Eatable, Sleepable):
    def work(self):
        print("Human working...")
    
    def eat(self):
        print("Human eating...")
    
    def sleep(self):
        print("Human sleeping...")

class Robot(Workable):  # Only implements what it needs
    def work(self):
        print("Robot working...")</code></pre>
                        </div>
                    </div>
                </div>

                <div id="dependency-inversion" class="blog-content mt-5">
                    <h3>Dependency Inversion Principle</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-arrow-down me-2"></i>D - Depend on Abstractions, Not Concretions</h4>
                        <div class="experiment-content">
                            <p><strong>Definition:</strong> High-level modules should not depend on low-level modules. Both should depend on abstractions.</p>
<pre><code class="language-python"># Bad: High-level depends on low-level
class MySQLDatabase:
    def save(self, data):
        print(f"Saving to MySQL: {data}")

class UserService:
    def __init__(self):
        self.db = MySQLDatabase()  # Tight coupling!
    
    def create_user(self, data):
        self.db.save(data)  # Locked to MySQL

# Good: Both depend on abstraction
class Database(ABC):
    @abstractmethod
    def save(self, data): pass
    
    @abstractmethod
    def find(self, id): pass

class MySQLDatabase(Database):
    def save(self, data):
        print(f"Saving to MySQL: {data}")
    
    def find(self, id):
        return {"id": id, "source": "mysql"}

class MongoDatabase(Database):
    def save(self, data):
        print(f"Saving to MongoDB: {data}")
    
    def find(self, id):
        return {"id": id, "source": "mongodb"}

class UserService:
    def __init__(self, db: Database):  # Depends on abstraction
        self.db = db
    
    def create_user(self, data):
        self.db.save(data)

# Flexible - can swap implementations
mysql_service = UserService(MySQLDatabase())
mongo_service = UserService(MongoDatabase())</code></pre>
                        </div>
                    </div>
                </div>

                <div id="design-patterns" class="blog-content mt-5">
                    <h2><i class="fas fa-puzzle-piece me-2 text-teal"></i>Design Patterns</h2>
                    
                    <p>Design patterns are reusable solutions to common software design problems. They fall into three categories:</p>
                    
                    <ul>
                        <li><strong>Creational:</strong> Object creation mechanisms</li>
                        <li><strong>Structural:</strong> Object composition and relationships</li>
                        <li><strong>Behavioral:</strong> Object communication and responsibility</li>
                    </ul>
                </div>

                <div id="creational" class="blog-content mt-5">
                    <h3>Creational Patterns</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-industry me-2"></i>Factory Pattern</h4>
                        <div class="experiment-content">
                            <p>Encapsulates object creation logic, allowing the client to request objects without knowing the concrete class.</p>
<pre><code class="language-python"># Factory Pattern
class NotificationFactory:
    @staticmethod
    def create(notification_type: str, message: str):
        if notification_type == 'email':
            return EmailNotification(message)
        elif notification_type == 'sms':
            return SMSNotification(message)
        elif notification_type == 'push':
            return PushNotification(message)
        else:
            raise ValueError(f"Unknown type: {notification_type}")

# Usage - client doesn't know concrete classes
notification = NotificationFactory.create('email', 'Hello!')
notification.send()</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-star me-2"></i>Singleton Pattern</h4>
                        <div class="experiment-content">
                            <p>Ensures a class has only one instance and provides global access to it.</p>
<pre><code class="language-python"># Thread-safe Singleton
import threading

class DatabaseConnection:
    _instance = None
    _lock = threading.Lock()
    
    def __new__(cls):
        if cls._instance is None:
            with cls._lock:
                if cls._instance is None:
                    cls._instance = super().__new__(cls)
                    cls._instance._initialize()
        return cls._instance
    
    def _initialize(self):
        self.connection = self._create_connection()
    
    def _create_connection(self):
        return "Connected to database"

# Usage - always same instance
db1 = DatabaseConnection()
db2 = DatabaseConnection()
print(db1 is db2)  # True</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-hammer me-2"></i>Builder Pattern</h4>
                        <div class="experiment-content">
                            <p>Separates construction of complex objects from their representation.</p>
<pre><code class="language-python"># Builder Pattern
class QueryBuilder:
    def __init__(self):
        self._select = []
        self._from = None
        self._where = []
        self._order_by = []
        self._limit = None
    
    def select(self, *columns):
        self._select.extend(columns)
        return self
    
    def from_table(self, table):
        self._from = table
        return self
    
    def where(self, condition):
        self._where.append(condition)
        return self
    
    def order_by(self, column, direction='ASC'):
        self._order_by.append(f"{column} {direction}")
        return self
    
    def limit(self, count):
        self._limit = count
        return self
    
    def build(self):
        query = f"SELECT {', '.join(self._select) or '*'} FROM {self._from}"
        if self._where:
            query += f" WHERE {' AND '.join(self._where)}"
        if self._order_by:
            query += f" ORDER BY {', '.join(self._order_by)}"
        if self._limit:
            query += f" LIMIT {self._limit}"
        return query

# Fluent interface
query = (QueryBuilder()
    .select('name', 'email', 'created_at')
    .from_table('users')
    .where('status = "active"')
    .where('age > 18')
    .order_by('created_at', 'DESC')
    .limit(10)
    .build())

print(query)
# SELECT name, email, created_at FROM users WHERE status = "active" AND age > 18 ORDER BY created_at DESC LIMIT 10</code></pre>
                        </div>
                    </div>
                </div>

                <div id="structural" class="blog-content mt-5">
                    <h3>Structural Patterns</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-plug me-2"></i>Adapter Pattern</h4>
                        <div class="experiment-content">
                            <p>Allows incompatible interfaces to work together by wrapping an object with a compatible interface.</p>
<pre><code class="language-python"># Adapter Pattern
# Legacy payment system
class LegacyPaymentGateway:
    def make_payment(self, account_number, amount_in_cents):
        print(f"Legacy: Charging {amount_in_cents} cents to {account_number}")
        return True

# Modern interface we want to use
class PaymentProcessor(ABC):
    @abstractmethod
    def charge(self, card: dict, amount: float) -> bool:
        pass

# Adapter bridges the gap
class LegacyPaymentAdapter(PaymentProcessor):
    def __init__(self, legacy_gateway: LegacyPaymentGateway):
        self.legacy = legacy_gateway
    
    def charge(self, card: dict, amount: float) -> bool:
        # Convert modern call to legacy format
        account = card['number'].replace('-', '')
        cents = int(amount * 100)
        return self.legacy.make_payment(account, cents)

# Usage - modern interface, legacy implementation
adapter = LegacyPaymentAdapter(LegacyPaymentGateway())
adapter.charge({'number': '1234-5678-9012-3456'}, 99.99)</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-paint-brush me-2"></i>Decorator Pattern</h4>
                        <div class="experiment-content">
                            <p>Dynamically adds behavior to objects without modifying their class.</p>
<pre><code class="language-python"># Decorator Pattern
class Coffee(ABC):
    @abstractmethod
    def cost(self) -> float:
        pass
    
    @abstractmethod
    def description(self) -> str:
        pass

class SimpleCoffee(Coffee):
    def cost(self):
        return 2.00
    
    def description(self):
        return "Simple coffee"

class CoffeeDecorator(Coffee):
    def __init__(self, coffee: Coffee):
        self._coffee = coffee

class MilkDecorator(CoffeeDecorator):
    def cost(self):
        return self._coffee.cost() + 0.50
    
    def description(self):
        return self._coffee.description() + ", milk"

class SugarDecorator(CoffeeDecorator):
    def cost(self):
        return self._coffee.cost() + 0.25
    
    def description(self):
        return self._coffee.description() + ", sugar"

class WhippedCreamDecorator(CoffeeDecorator):
    def cost(self):
        return self._coffee.cost() + 0.75
    
    def description(self):
        return self._coffee.description() + ", whipped cream"

# Build complex object by stacking decorators
coffee = SimpleCoffee()
coffee = MilkDecorator(coffee)
coffee = SugarDecorator(coffee)
coffee = WhippedCreamDecorator(coffee)

print(coffee.description())  # "Simple coffee, milk, sugar, whipped cream"
print(f"${coffee.cost():.2f}")  # "$3.50"</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-theater-masks me-2"></i>Facade Pattern</h4>
                        <div class="experiment-content">
                            <p>Provides a simplified interface to a complex subsystem.</p>
<pre><code class="language-python"># Facade Pattern
# Complex subsystems
class VideoDecoder:
    def decode(self, file): return f"Decoded: {file}"

class AudioDecoder:
    def decode(self, file): return f"Audio extracted: {file}"

class SubtitleLoader:
    def load(self, file): return f"Subtitles loaded: {file}"

class VideoPlayer:
    def play(self, video, audio, subtitles):
        print(f"Playing: {video} with {audio} and {subtitles}")

# Facade - simple interface
class MediaPlayerFacade:
    def __init__(self):
        self.video_decoder = VideoDecoder()
        self.audio_decoder = AudioDecoder()
        self.subtitle_loader = SubtitleLoader()
        self.player = VideoPlayer()
    
    def play_movie(self, filename):
        """Simple interface to complex subsystem"""
        video = self.video_decoder.decode(filename)
        audio = self.audio_decoder.decode(filename)
        subtitles = self.subtitle_loader.load(filename)
        self.player.play(video, audio, subtitles)

# Usage - client only knows facade
player = MediaPlayerFacade()
player.play_movie("movie.mp4")</code></pre>
                        </div>
                    </div>
                </div>

                <div id="behavioral" class="blog-content mt-5">
                    <h3>Behavioral Patterns</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-eye me-2"></i>Observer Pattern</h4>
                        <div class="experiment-content">
                            <p>Defines a one-to-many dependency so that when one object changes state, all dependents are notified.</p>
<pre><code class="language-python"># Observer Pattern
class EventEmitter:
    def __init__(self):
        self._observers = {}
    
    def subscribe(self, event: str, callback):
        if event not in self._observers:
            self._observers[event] = []
        self._observers[event].append(callback)
    
    def unsubscribe(self, event: str, callback):
        if event in self._observers:
            self._observers[event].remove(callback)
    
    def emit(self, event: str, data=None):
        if event in self._observers:
            for callback in self._observers[event]:
                callback(data)

# Usage
class UserService(EventEmitter):
    def create_user(self, data):
        user = User(**data)
        self.emit('user_created', user)
        return user

# Subscribe to events
service = UserService()
service.subscribe('user_created', lambda u: print(f"Sending welcome email to {u.email}"))
service.subscribe('user_created', lambda u: print(f"Logging: User {u.id} created"))
service.subscribe('user_created', lambda u: print(f"Updating analytics..."))

service.create_user({'name': 'Alice', 'email': 'alice@example.com'})</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-chess me-2"></i>Strategy Pattern</h4>
                        <div class="experiment-content">
                            <p>Defines a family of algorithms, encapsulates each one, and makes them interchangeable.</p>
<pre><code class="language-python"># Strategy Pattern
class CompressionStrategy(ABC):
    @abstractmethod
    def compress(self, data: bytes) -> bytes:
        pass

class ZipCompression(CompressionStrategy):
    def compress(self, data):
        import zlib
        return zlib.compress(data)

class GzipCompression(CompressionStrategy):
    def compress(self, data):
        import gzip
        return gzip.compress(data)

class NoCompression(CompressionStrategy):
    def compress(self, data):
        return data

class FileUploader:
    def __init__(self, compression: CompressionStrategy):
        self.compression = compression
    
    def upload(self, data: bytes, filename: str):
        compressed = self.compression.compress(data)
        print(f"Uploading {filename}: {len(data)} â†’ {len(compressed)} bytes")
        # Upload logic...

# Switch strategies at runtime
uploader = FileUploader(ZipCompression())
uploader.upload(b"x" * 1000, "file.txt")

uploader.compression = GzipCompression()  # Change strategy
uploader.upload(b"x" * 1000, "file2.txt")</code></pre>
                        </div>
                    </div>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-terminal me-2"></i>Command Pattern</h4>
                        <div class="experiment-content">
                            <p>Encapsulates a request as an object, allowing parameterization, queuing, and undo operations.</p>
<pre><code class="language-python"># Command Pattern
class Command(ABC):
    @abstractmethod
    def execute(self): pass
    
    @abstractmethod
    def undo(self): pass

class TextEditor:
    def __init__(self):
        self.content = ""
    
    def insert(self, text, position):
        self.content = self.content[:position] + text + self.content[position:]
    
    def delete(self, start, end):
        self.content = self.content[:start] + self.content[end:]

class InsertCommand(Command):
    def __init__(self, editor: TextEditor, text: str, position: int):
        self.editor = editor
        self.text = text
        self.position = position
    
    def execute(self):
        self.editor.insert(self.text, self.position)
    
    def undo(self):
        self.editor.delete(self.position, self.position + len(self.text))

class CommandHistory:
    def __init__(self):
        self.history = []
    
    def execute(self, command: Command):
        command.execute()
        self.history.append(command)
    
    def undo(self):
        if self.history:
            command = self.history.pop()
            command.undo()

# Usage with undo support
editor = TextEditor()
history = CommandHistory()

history.execute(InsertCommand(editor, "Hello", 0))
print(editor.content)  # "Hello"

history.execute(InsertCommand(editor, " World", 5))
print(editor.content)  # "Hello World"

history.undo()
print(editor.content)  # "Hello"</code></pre>
                        </div>
                    </div>
                </div>

                <div id="data-modeling" class="blog-content mt-5">
                    <h2><i class="fas fa-database me-2 text-teal"></i>Data Modeling & Schema Design</h2>
                    
                    <p>Good data modeling is essential for LLD. It determines how data is stored, accessed, and maintained. Key considerations:</p>
                    
                    <ul>
                        <li><strong>Entity relationships:</strong> One-to-one, one-to-many, many-to-many</li>
                        <li><strong>Data integrity:</strong> Constraints, foreign keys, cascades</li>
                        <li><strong>Query patterns:</strong> Design schema around common queries</li>
                        <li><strong>Scalability:</strong> Plan for data growth and access patterns</li>
                    </ul>
                </div>

                <div id="normalization" class="blog-content mt-5">
                    <h3>Normalization vs Denormalization</h3>
                    
                    <table class="table table-bordered">
                        <thead class="table-dark">
                            <tr>
                                <th>Aspect</th>
                                <th>Normalized</th>
                                <th>Denormalized</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Data duplication</strong></td>
                                <td>Minimal</td>
                                <td>Intentional redundancy</td>
                            </tr>
                            <tr>
                                <td><strong>Write performance</strong></td>
                                <td>Fast (single update)</td>
                                <td>Slower (multiple updates)</td>
                            </tr>
                            <tr>
                                <td><strong>Read performance</strong></td>
                                <td>Requires JOINs</td>
                                <td>Fast (no JOINs)</td>
                            </tr>
                            <tr>
                                <td><strong>Data consistency</strong></td>
                                <td>Easy to maintain</td>
                                <td>Must sync duplicates</td>
                            </tr>
                            <tr>
                                <td><strong>Use case</strong></td>
                                <td>OLTP, write-heavy</td>
                                <td>OLAP, read-heavy</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="experiment-card mt-4">
                        <h4><i class="fas fa-table me-2"></i>Example: E-commerce Schema</h4>
                        <div class="experiment-content">
<pre><code class="language-sql">-- Normalized Schema (3NF)
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customers(id),
    created_at TIMESTAMP DEFAULT NOW(),
    status VARCHAR(20) DEFAULT 'pending'
);

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    price DECIMAL(10, 2) NOT NULL
);

CREATE TABLE order_items (
    order_id INT REFERENCES orders(id),
    product_id INT REFERENCES products(id),
    quantity INT NOT NULL,
    unit_price DECIMAL(10, 2) NOT NULL,  -- Denormalized: price at time of order
    PRIMARY KEY (order_id, product_id)
);

-- Denormalized for reporting (materialized view)
CREATE MATERIALIZED VIEW order_summary AS
SELECT 
    o.id AS order_id,
    c.name AS customer_name,
    c.email AS customer_email,
    o.created_at,
    o.status,
    SUM(oi.quantity * oi.unit_price) AS total_amount,
    COUNT(oi.product_id) AS item_count
FROM orders o
JOIN customers c ON o.customer_id = c.id
JOIN order_items oi ON o.id = oi.order_id
GROUP BY o.id, c.name, c.email, o.created_at, o.status;</code></pre>
                        </div>
                    </div>
                </div>

                <div id="indexing" class="blog-content mt-5">
                    <h3>Indexing Strategies</h3>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-search me-2"></i>Index Types and When to Use Them</h4>
                        <div class="experiment-content">
<pre><code class="language-sql">-- B-Tree Index (default) - Equality and range queries
CREATE INDEX idx_orders_customer ON orders(customer_id);
CREATE INDEX idx_orders_created ON orders(created_at);

-- Composite Index - Multi-column queries
-- Order matters! (customer_id, status) supports:
--   WHERE customer_id = ?
--   WHERE customer_id = ? AND status = ?
-- But NOT: WHERE status = ?
CREATE INDEX idx_orders_cust_status ON orders(customer_id, status);

-- Partial Index - Index subset of rows
CREATE INDEX idx_pending_orders ON orders(created_at)
WHERE status = 'pending';

-- Expression Index - Index computed values
CREATE INDEX idx_orders_date ON orders(DATE(created_at));

-- Full-text Index - Text search
CREATE INDEX idx_products_search ON products 
USING gin(to_tsvector('english', name || ' ' || description));

-- Hash Index - Equality only (no range)
CREATE INDEX idx_users_email ON users USING hash(email);</code></pre>
                        </div>
                    </div>

                    <div class="highlight-box mt-4">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Index Guidelines:</strong> Index columns in WHERE, JOIN, ORDER BY clauses. Avoid over-indexing (slows writes). Monitor query plans with EXPLAIN ANALYZE.
                    </div>
                </div>

                <div id="modularity" class="blog-content mt-5">
                    <h2><i class="fas fa-layer-group me-2 text-teal"></i>Code Modularity & Reusability</h2>
                    
                    <div class="experiment-card">
                        <h4><i class="fas fa-folder-tree me-2"></i>Layered Architecture</h4>
                        <div class="experiment-content">
<pre><code class="language-python"># Clean Architecture / Layered Structure
"""
project/
â”œâ”€â”€ domain/              # Core business logic (no dependencies)
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â””â”€â”€ user.py
â”‚   â”œâ”€â”€ repositories/   # Interfaces only
â”‚   â”‚   â””â”€â”€ user_repository.py
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ user_service.py
â”œâ”€â”€ infrastructure/      # External integrations
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ postgres_user_repository.py
â”‚   â””â”€â”€ external/
â”‚       â””â”€â”€ email_client.py
â”œâ”€â”€ application/         # Use cases, orchestration
â”‚   â””â”€â”€ use_cases/
â”‚       â””â”€â”€ create_user.py
â””â”€â”€ presentation/        # API, CLI, Web
    â””â”€â”€ api/
        â””â”€â”€ user_routes.py
"""

# Domain Layer - Pure business logic
class User:
    def __init__(self, email: str, name: str):
        self.email = email
        self.name = name
        self.validate()
    
    def validate(self):
        if '@' not in self.email:
            raise ValueError("Invalid email")

class UserRepository(ABC):
    @abstractmethod
    def save(self, user: User) -> User: pass
    
    @abstractmethod
    def find_by_email(self, email: str) -> User | None: pass

# Infrastructure Layer - Concrete implementations
class PostgresUserRepository(UserRepository):
    def __init__(self, connection):
        self.conn = connection
    
    def save(self, user: User) -> User:
        self.conn.execute(
            "INSERT INTO users (email, name) VALUES (%s, %s)",
            (user.email, user.name)
        )
        return user

# Application Layer - Use cases
class CreateUserUseCase:
    def __init__(self, repo: UserRepository, email_service: EmailService):
        self.repo = repo
        self.email_service = email_service
    
    def execute(self, email: str, name: str) -> User:
        existing = self.repo.find_by_email(email)
        if existing:
            raise UserAlreadyExistsError()
        
        user = User(email, name)
        self.repo.save(user)
        self.email_service.send_welcome(user)
        return user</code></pre>
                        </div>
                    </div>

                    <div class="highlight-box mt-4">
                        <i class="fas fa-lightbulb"></i>
                        <strong>Dependency Rule:</strong> Dependencies point inward. Domain has no dependencies. Infrastructure depends on domain. Application orchestrates both.
                    </div>
                </div>

                <div id="next-steps" class="blog-content mt-5">
                    <h2><i class="fas fa-arrow-right me-2 text-teal"></i>Next Steps</h2>
                    
                    <p>You now have a strong foundation in Low-Level Design! Continue to Part 13 to explore Distributed Systems Deep Dive, covering consensus algorithms, distributed coordination, and distributed file systems.</p>
                    
                    <div class="related-posts">
                        <h3><i class="fas fa-book-reader me-2"></i>Continue the Series</h3>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 13: Distributed Systems Deep Dive</h5>
                            <p class="text-muted small mb-2">Master consensus algorithms, coordination, and distributed file systems.</p>
                            <a href="system-design-distributed-systems-deep-dive.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 11: Real-World Case Studies</h5>
                            <p class="text-muted small mb-2">Apply system design principles to real-world systems.</p>
                            <a href="system-design-real-world-case-studies.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                        <div class="related-post-item">
                            <h5 class="mb-2">Part 14: Authentication & Security</h5>
                            <p class="text-muted small mb-2">Learn OAuth, JWT, RBAC, and security best practices.</p>
                            <a href="system-design-authentication-security.html">Read Article <i class="fas fa-arrow-right ms-1"></i></a>
                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>
    </section>

    <footer id="social-media" class="bg-dark text-light py-5">
        <div class="container py-5">
            <div class="row mb-4">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h5 class="fw-bold mb-3">Let's Connect</h5>
                    <p class="text-light">
                        I'm always interested in sharing content about my interests on different topics. Read disclaimer and feel free to share further.
                    </p>
                </div>
                <div class="col-lg-6">
                    <h5 class="fw-bold mb-3">Follow Me</h5>
                    <div class="social-links d-flex gap-2 flex-wrap">
                        <a href="https://www.facebook.com/wasil.zafar/" target="_blank" class="social-icon" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://twitter.com/wasilzafar" target="_blank" class="social-icon" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/wasilzafar" target="_blank" class="social-icon" title="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.youtube.com/@wasilzafar" target="_blank" class="social-icon" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://www.instagram.com/itswzee/" target="_blank" class="social-icon" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://in.pinterest.com/wasilz/" target="_blank" class="social-icon" title="Pinterest">
                            <i class="fab fa-pinterest-p"></i>
                        </a>
                        <a href="mailto:wasil.zafar@gmail.com" class="social-icon" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>

            <hr class="bg-secondary">

            <div class="row mt-4">
                <div class="col-md-6">
                    <p class="small">
                        <i class="fas fa-icons me-2"></i>Icons from <a href="https://www.flaticon.com/" target="_blank" class="text-light">Flaticon</a> &amp; <a href="https://fontawesome.com/" target="_blank" class="text-light">Font Awesome</a>
                    </p>
                    <p class="small mt-3">
                        <a href="/" class="text-light text-decoration-none">Home</a> | 
                        <a href="/disclaimer.html" class="text-light text-decoration-none">Disclaimer</a> | 
                        <a href="/privacy-policy.html" class="text-light text-decoration-none">Privacy Policy</a>
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="small">
                        Enjoying this content? â˜• <a href="https://buymeacoffee.com/itswzee" target="_blank" class="text-light" style="text-decoration: underline;">Buy me a coffee</a> to fuel more deep dives!
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <button id="scrollToTop" class="scroll-to-top"><i class="fas fa-arrow-up"></i></button>
    <script src="../../../js/cookie-consent.js"></script>
    <script src="../../../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToTopBtn = document.getElementById('scrollToTop');
            window.addEventListener('scroll', function() { scrollToTopBtn.classList.toggle('show', window.scrollY > 300); });
            scrollToTopBtn.addEventListener('click', function() { window.scrollTo({ top: 0, behavior: 'smooth' }); });
        });
        function openNav() { document.getElementById('tocSidenav').classList.add('open'); document.getElementById('tocOverlay').classList.add('show'); document.body.style.overflow = 'hidden'; }
        function closeNav() { document.getElementById('tocSidenav').classList.remove('open'); document.getElementById('tocOverlay').classList.remove('show'); document.body.style.overflow = 'auto'; }
        document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeNav(); });
        const themes = { 'prism-theme': 'Tomorrow Night', 'prism-default': 'Default', 'prism-dark': 'Dark', 'prism-twilight': 'Twilight', 'prism-okaidia': 'Okaidia', 'prism-solarizedlight': 'Solarized Light' };
        const savedTheme = localStorage.getItem('prism-theme') || 'prism-theme';
        function switchTheme(themeId) { Object.keys(themes).forEach(id => { const link = document.getElementById(id); if (link) link.disabled = true; }); const selectedLink = document.getElementById(themeId); if (selectedLink) { selectedLink.disabled = false; localStorage.setItem('prism-theme', themeId); } setTimeout(() => Prism.highlightAll(), 10); }
        document.addEventListener('DOMContentLoaded', function() { switchTheme(savedTheme); });
        Prism.plugins.toolbar.registerButton('theme-switcher', function() { const select = document.createElement('select'); Object.keys(themes).forEach(id => { const opt = document.createElement('option'); opt.value = id; opt.textContent = themes[id]; if (id === savedTheme) opt.selected = true; select.appendChild(opt); }); select.addEventListener('change', e => switchTheme(e.target.value)); return select; });
    </script>
</body>
</html>
